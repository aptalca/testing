{"version":3,"sources":["webpack:///./node_modules/synclounge-libjass/lib/libjass.js"],"names":["root","factory","global","this","registeredModules","Object","create","installedModules","def","moduleId","deps","body","req","exports","map","push","apply","__decorate","decorators","target","key","desc","d","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__extends","b","p","hasOwnProperty","__","constructor","prototype","settings","settings_11","set","set_2","map_15","promise","promise_8","webworker","parts","parser","renderers","serialization_8","ass_2","attachment_3","dialogue_3","script_properties_2","style_3","misc_9","version_1","configure","newConfig","debugMode","setDebugMode","verboseMode","setVerboseMode","Set","setImplementation","Map","Promise","DeferredPromise","serialize","deserialize","ASS","Attachment","AttachmentType","Dialogue","ScriptProperties","Style","BorderStyle","Format","WrappingStyle","version","defineProperties","get","value","console","warn","base_4","auto_2","manual_2","video_2","default_1","null_2","renderer_2","settings_10","ClockEvent","EventSource","AutoClock","ManualClock","VideoClock","DefaultRenderer","NullRenderer","WebRenderer","RendererSettings","video_1","renderer_1","_super","video","ass","call","document","createElement","_video","parentElement","replaceChild","libjassSubsWrapper","insertBefore","firstElementChild","resize","videoWidth","videoHeight","videoOffsetWidth","offsetWidth","videoOffsetHeight","offsetHeight","ratio","Math","min","subsWrapperWidth","subsWrapperHeight","subsWrapperLeft","subsWrapperTop","resizeVideo","_ready","ttf_1","settings_9","attachment_2","misc_8","map_14","mixin_3","promise_7","base_3","null_1","animation_collection_1","drawing_styles_1","font_size_2","keyframe_1","span_styles_1","fontSrcUrlRegex","clock","_this","HTMLDivElement","temp","_libjassSubsWrapper","_layerWrappers","_layerAlignmentWrappers","_fontMetricsCache","_currentSubs","_preRenderedSubs","_eventListeners","classList","add","_subsWrapper","appendChild","className","_fontSizeElement","createTextNode","log","preloadFontPromises","fontFetchPromisesCache","fontMap","attachedFontsMap","useAttachedFonts","attachments","forEach","attachment","type","Font","ttfNames","getTtfNames","ex","error","attachmentUrl","contents","name","correspondingFontMapEntry","undefined","existingList","srcs","fontFamily","fontFamilyMetricsPromise","fonts","source_1","src","match","join","attachedFontUrls","_i","attachedFontUrls_1","url","existingFontFaces_1","fontFace","family","fontFetchPromise","FontFace","quotedFontFace","any","load","_calculateFontMetricsAfterFetch","catch","reason","urls_1","split","trim","filter","concat","thisFontFamilysFetchPromises","resolve","reject","xhr","XMLHttpRequest","addEventListener","err","open","send","allFontsFetchedPromise","first","then","metrics","all","enumerable","configurable","width","height","left","top","_removeAllSubs","style","toFixed","_subsWrapperWidth","_scaleX","properties","resolutionX","_scaleY","resolutionY","clear","currentTime","_onClockTick","preRender","dialogue","currentTimeRelativeToDialogueStart","start","containsTransformTag","alreadyPreRenderedSub","id","sub","marginLeft","marginRight","marginTop","marginBottom","marginVertical","minWidth","dialogueAnimationStylesElement","dialogueAnimationCollection","AnimationCollection","svgElement","createElementNS","setAttribute","baseVal","valueAsString","svgDefsElement","currentSpan","currentSpanStyles","SpanStyles","currentAnimationCollection","previousAddNewLine","startNewSpan","addNewLine","hasChildNodes","setStylesOnSpan","animationDelays","delay","makeNewLine","currentDrawingStyles","DrawingStyles","wrappingStyle","karaokeTimesAccumulator","_a","part","Italic","italic","Bold","bold","Underline","underline","StrikeThrough","strikeThrough","Border","outlineWidth","outlineHeight","BorderX","BorderY","Shadow","shadowDepthX","shadowDepthY","ShadowX","ShadowY","Blur","blur","GaussianBlur","gaussianBlur","FontName","fontName","FontSize","fontSize","FontSizePlus","FontSizeMinus","FontScaleX","fontScaleX","FontScaleY","fontScaleY","LetterSpacing","letterSpacing","RotateX","rotationX","RotateY","rotationY","RotateZ","rotationZ","SkewX","skewX","SkewY","skewY","PrimaryColor","primaryColor","SecondaryColor","secondaryColor","OutlineColor","outlineColor","ShadowColor","shadowColor","Alpha","primaryAlpha","secondaryAlpha","outlineAlpha","shadowAlpha","PrimaryAlpha","SecondaryAlpha","OutlineAlpha","ShadowAlpha","Alignment","ColorKaraoke","Keyframe","withAlpha","toString","duration","Reset","newStyleName","reset","styles","Position","position","x","y","Move","x1","y1","t1","t2","x2","y2","end","Fade","keyframes","ComplexFade","a1","a2","t3","t4","a3","Transform","progression","pow","accel","_b","_c","tags","tag","interpolate","DrawingMode","scale","DrawingBaselineOffset","baselineOffset","DrawingInstructions","toSVG","Text","Comment","NewLine","SoftNewLine","NoLineWrapping","divTransformStyle","transformOrigin","_transformOrigins","alignment","transformOriginString","_d","_e","webkitTransform","transform","webkitTransformOrigin","EndOfLineWrapping","whiteSpace","SmartWrappingWithWiderTopLine","SmartWrappingWithWiderBottomLine","textAlign","webkitAnimation","animationStyle","animation","textContent","result","draw","has","thePreRenderedSub","preRenderedSub","cloneNode","applyAnimationDelays","node","animationNames","animationName","webkitAnimationName","rate","webkitAnimationDelay","animationDelay","animatedDescendants","querySelectorAll","layer","layerWrapper","insertBeforeElement","insertBeforeLayer","layerAlignmentWrapper","insertBeforeAlignment","getElementsByTagName","sheet","cssRules","cssText","_onClockPlay","display","remove","delete","parentNode","removeChild","_onClockPause","_onClockStop","_onClockRateChange","_dispatchEvent","fontSizeElement","lastly","calculateFontMetrics","fallbackFonts","mixin","font_size_1","renderer","scaleX","scaleY","fontMetricsCache","_settings","_svgDefsElement","_nextFilterId","_id","_defaultStyle","newStyle","outlineThickness","shadowDepth","alpha","span","animationCollection","isTextOnlySpan","childNodes","fontStyleOrWeight","_italic","_bold","lineHeight","_fontScaleX","_fontSize","fontSizeForLineHeight","_fontName","font","textDecoration","_underline","_strikeThrough","_fontScaleY","_skewX","_skewY","_letterSpacing","_outlineWidth","_outlineHeight","_shadowDepthX","_shadowDepthY","_primaryColor","_primaryAlpha","_outlineColor","_outlineAlpha","_shadowColor","_shadowAlpha","enableSvg","opacity","color","_svg","_textShadow","_rotationX","_rotationY","filterElement","source","in1","sourceAlphaTransferNode","SVGComponentTransferFunctionElement","SVG_FECOMPONENTTRANSFER_TYPE_LINEAR","intercept","slope","mergedOutlines_1","outlineNumber_1","increment_1","preciseOutlines","_gaussianBlur","addOutline","sqrt","outlineId","outlineFilter","operator","SVGFEMorphologyElement","SVG_MORPHOLOGY_OPERATOR_DILATE","radiusX","radiusY","outlineReferenceNode","dx","dy","coloredOutline","createComponentTransferFilter","gaussianBlurFilter","stdDeviationX","stdDeviationY","_blur","blurFilter","edgeMode","SVGFEConvolveMatrixElement","SVG_EDGEMODE_NONE","cutoutNode","in2","SVGFECompositeElement","SVG_FECOMPOSITE_OPERATOR_OUT","shadowFilter","coloredShadow","lastFilter","mergedResult","shadowReferenceNode","sourceGraphicReferenceNode","childElementCount","filterId","filterProperty","webkitFilter","outlineCssString_1","shadowCssString_1","maxY","textShadow","substr","shadowCssString","valueOrDefault","_rotationZ","_secondaryColor","_secondaryAlpha","redTransferNode","red","greenTransferNode","green","blueTransferNode","blue","alphaTransferNode","newValue","defaultValue","promise_6","prepareFontSizeElement","lineHeightForFontSize","setTimeout","lineHeightForFontSizeSync","fontMetricsFromLineHeights","lowerLineHeight","upperLineHeight","fontSizeFromMetrics","factor","existingMetrics","lowerLineHeight_1","outputScaleX","outputScaleY","_outputScaleX","_outputScaleY","_scale","_baselineOffset","drawingInstructions","fillColor","svg","instructions","scaleFactor","path","pathString","bboxMinX","Infinity","bboxMaxX","bboxMinY","bboxMaxY","instruction","drawing","MoveInstruction","max","LineInstruction","CubicBezierCurveInstruction","x3","y3","bboxWidth","bboxHeight","g","map_13","_style","_animationStyle","_animationDelays","_numAnimations","_nextId","_rate","timingFunction","keyframes_1","keyframe","time","Error","ruleCssText","keyframes_2","_time","_properties","settings_7","base_2","settings_8","_ass","_clock","_lastRendererId","from","Play","Tick","Pause","Stop","RateChange","enable","disable","toggle","setEnabled","enabled","dialogues","preRenderTime","map_12","set_1","DataType","fieldDecorators","OffsetTable","field","Uint16","struct","TableRecord","Char","Uint32","NameTableHeader","NameRecord","decoded","atob","bytes","Uint8Array","ArrayBuffer","charCodeAt","reader","dataView","DataView","buffer","offsetTable","read","nameTableRecord","numTables","tableRecord","c1","c2","c3","c4","offset","nameTableHeader","count","nameRecord","nameId","recordOffset","stringOffset","nameBytes","subarray","platformId","name_4","j","String","fromCharCode","name_5","clazz","fields","__fields","fields_1","field_1","getInt8","getUint16","getUint32","existingDecorator","proto","ctor","settings_6","map_11","makeFontMapFromStyleElement","linkStyle","styleSheet","rule","isFontFaceRule","name_3","getPropertyValue","line","matches","object","testSupportsSvg","_f","_g","CSSRule","FONT_FACE_RULE","morphologyFilter","DOMException","domException","code","NO_MODIFICATION_ALLOWED_ERR","getAttribute","auto_1","_autoClock","play","pause","seeking","setRate","playbackRate","paused","listener","settings_5","manual_1","getCurrentTime","autoPauseAfter","_getCurrentTime","_autoPauseAfter","_manualClock","_nextAnimationFrameRequestId","_lastKnownExternalTime","_lastKnownExternalTimeObtainedAt","_startTicking","_stopTicking","seek","_onTimerTick","timeStamp","currentExternalTime","tick","requestAnimationFrame","cancelAnimationFrame","map_10","mixin_2","base_1","_currentTime","_enabled","_paused","stop","mixins","mixins_1","mixin_1","getOwnPropertyNames","name_2","listeners","args","listeners_1","parse_3","streams_2","stream_parsers_2","parse","BrowserReadableStream","StringStream","XhrStream","StreamParser","SrtStreamParser","settings_4","ass_1","attachment_1","dialogue_2","style_2","map_9","promise_5","misc_7","Section","stream","_stream","_minimalDeferred","_deferred","_shouldSwallowBom","_currentSection","ScriptInfo","_currentAttachment","nextLine","_onNextLine","addAttachment","EOF","scriptProperties","currentSection","Styles","Events","Fonts","Graphics","Other","property","parseLineIntoProperty","parseInt","scaleBorderAndShadow","stylesFormatSpecifier","property_1","str","addStyle","stack","dialoguesFormatSpecifier","property_2","addEvent","startOfNewAttachmentRegex","startOfNewAttachment","exec","Graphic","uuencodedToBase64","filename","_currentDialogueNumber","_currentDialogueStart","_currentDialogueEnd","_currentDialogueText","test","replace","substring","charCode","misc_5","stream_parsers_1","streams_1","serialization_7","settings_3","map_8","promise_4","dialogue_1","misc_6","script_properties_1","style_1","_styles","_dialogues","_attachments","_stylesFormatSpecifier","_dialoguesFormatSpecifier","fromString","raw","fromStream","SRT","fromUrl","fetchPromise","fetch","isSupported","response","ok","status","fromReadableStream","encoding","fromJSON","obj","keys","name_1","styleLine","parseLineIntoTypedTemplate","styleTemplate","template","repr_1","dialogueLine","dialogueTemplate","repr_2","toJSON","_classTag","registerClass","serialization_6","_resolutionX","_resolutionY","_wrappingStyle","_scaleBorderAndShadow","misc_4","parse_2","serialization_5","settings_2","map_7","_parts","_containsTransformTag","normalizedTemplate_2","toLowerCase","_lastDialogueId","styleName","_start","toTime","_end","_layer","isNaN","text","_rawPartsString","_parsePartsString","_alignment","index","possiblyIncorrectParses","indexOf","reduce","previousValue","currentValue","parseFloat","parse_1","serialization_4","map_6","misc_3","normalizedTemplate_1","_name","_outlineThickness","_borderStyle","_shadowDepth","_marginLeft","_marginRight","_marginVertical","serialization_3","_filename","_type","_contents","map_5","colonPos","formatSpecifier","slice","formatKey","promise_3","_str","_readTill","nextNewLinePos","_xhr","_pendingDeferred","_failedError","_onXhrProgress","_onXhrLoad","event","_onXhrError","deferred","_tryResolveNextLine","readyState","DONE","responseText","_buffer","_reader","getReader","_decoder","TextDecoder","ignoreBOM","ReadableStream","next","done","decode","settings_1","map_4","promise_2","commands_3","misc_2","rules","input","ParserRun","ParseNode","parent","_parent","_children","children","_value","_setEnd","pop","splice","newEnd","_input","ruleFunction","_parseTree","_result","parse_dialogueParts","current","_haveMore","enclosedTagsNode","parse_enclosedTags","whiteSpaceOrTextNode","parse_newline","parse_soft_newline","parse_hardspace","parse_text","previousTextPart","inDrawingMode","_peek","childNode","parse_tag_alpha","parse_tag_iclip","parse_tag_xbord","parse_tag_ybord","parse_tag_xshad","parse_tag_yshad","parse_tag_blur","parse_tag_bord","parse_tag_clip","parse_tag_fade","parse_tag_fscx","parse_tag_fscy","parse_tag_move","parse_tag_shad","parse_tag_fad","parse_tag_fax","parse_tag_fay","parse_tag_frx","parse_tag_fry","parse_tag_frz","parse_tag_fsp","parse_tag_fsplus","parse_tag_fsminus","parse_tag_org","parse_tag_pbo","parse_tag_pos","parse_tag_an","parse_tag_be","parse_tag_fn","parse_tag_fr","parse_tag_fs","parse_tag_kf","parse_tag_ko","parse_tag_1a","parse_tag_1c","parse_tag_2a","parse_tag_2c","parse_tag_3a","parse_tag_3c","parse_tag_4a","parse_tag_4c","parse_tag_a","parse_tag_b","parse_tag_c","parse_tag_i","parse_tag_k","parse_tag_K","parse_tag_p","parse_tag_q","parse_tag_r","parse_tag_s","parse_tag_t","parse_tag_u","parse_comment","valueNode","next2","parse_enableDisable","_parse_tag_clip_or_iclip","startNode","parse_decimal","endNode","a1Node","a2Node","a3Node","t1Node","t2Node","t3Node","t4Node","SweepingColorKaraoke","OutlineKaraoke","x1Node","y1Node","x2Node","y2Node","xNode","yNode","RotationOrigin","accelNode","firstNode","secondNode","thirdNode","transformTags","parse_drawingInstructions","currentType","numberParts","numberPart","typePart","newType","parse_decimalInt32","isNegative","numberNode","parse_hexInt32","parse_decimalOrHexInt32","negative","numericalPart","parse_unsignedDecimal","characteristicNode","mantissaNode","parse_color","Color","parse_alpha","parse_colorWithAlpha","tagName","scaleNode","commandsNode","RectangularClip","VectorClip","makeTagParserFunction","tagConstructor","valueParser","required","registerWorkerCommand","WorkerCommands","Parse","parameters","serialization_2","_red","_green","_blue","_alpha","final","_duration","_x","_y","_x1","_y1","_x2","_y2","_t1","_t2","_a1","_a2","_a3","_t3","_t4","_accel","_tags","inside","_inside","_instructions","addToString","ctorName","propertyNames_1","Function","_x3","_y3","converter","validator","channel_1","commands_2","supported","Worker","_scriptNode","currentScript","createWorker","scriptPath","WorkerChannelImpl","WorkerGlobalScope","serialization_1","map_3","promise_1","commands_1","misc_1","comm","_comm","_pendingRequests","ev","_onMessage","data","request","command","requestId","_lastRequestId","requestMessage","postMessage","cancelRequest","_respond","message","Response","rawMessage","responseMessage","requestId_1","commandCallback","getWorkerCommandHandler","Ping","map_2","workerCommands","handler","map_1","classes","size","JSON","stringify","hydratedValue","enqueueJob","MutationObserver","WebkitMutationObserver","process","nextTick","nextTick_1","callback","pending_1","currentlyPending_1","div_1","observer","processing","processing_1","observe","attributes","SimplePromise","executor","_state","state","_fulfillReactions","_rejectReactions","TypeError","_createResolvingFunctions","values","numUnresolved","race","values_1","onFulfilled","onRejected","resultCapability","fulfillReaction","capabilities","rejectReaction","enqueueFulfilledReactionJob","enqueueRejectedReactionJob","alreadyResolved","resolution","_fulfill","_reject","_resolveWithThenable","thenable","reactions","reactions_1","reaction","reactions_2","_promise","promises","first_rec","previousRejections","head","tail","handlerResult","SimpleMap","iterable","Array","isArray","iterable_2","element","keyToProperty","_values","_keys","_size","callbackfn","thisArg","globalMap","SimpleSet","iterable_1","toProperty","_elements","globalSet"],"mappings":"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","file":"js/chunk-2d0c7b5d.6061f5c4.js","sourcesContent":["/**\n * libjass\n *\n * https://github.com/Arnavion/libjass\n *\n * Copyright 2013 Arnav Singh\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @license\n */\n(function (root, factory) {\n    var global = this;\n    if (typeof define === \"function\" && define.amd) {\n        define([], function () {\n            return factory(global);\n        });\n    } else if (typeof exports === \"object\" && typeof module === \"object\") {\n        module.exports = factory(global);\n    } else if (typeof exports === \"object\") {\n        exports.libjass = factory(global);\n    } else {\n        root.libjass = factory(global);\n    }\n})(this, function (global) {\n    \"use strict\";\n    var registeredModules = Object.create(null);\n    var installedModules = Object.create(null);\n    function def(moduleId, deps, body) {\n        installedModules[moduleId] = {\n            deps: deps,\n            body: body\n        };\n    }\n    function req(moduleId) {\n        if (moduleId in registeredModules) {\n            return registeredModules[moduleId];\n        }\n        var exports = registeredModules[moduleId] = Object.create(null);\n        var deps = installedModules[moduleId].deps.map(req);\n        deps.push(exports);\n        installedModules[moduleId].body.apply(null, deps);\n        return exports;\n    }\n    var __decorate = function (decorators, target, key, desc) {\n        var c = arguments.length;\n        var r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc;\n        var d;\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc); else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\n    };\n    var __extends = function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n    def(\"index\", [ \"settings\", \"settings\", \"utility/set\", \"utility/set\", \"utility/map\", \"utility/map\", \"utility/promise\", \"utility/promise\", \"webworker/index\", \"parts/index\", \"parser/index\", \"renderers/index\", \"serialization\", \"types/ass\", \"types/attachment\", \"types/dialogue\", \"types/script-properties\", \"types/style\", \"types/misc\", \"version\" ], function (settings, settings_11, set, set_2, map, map_15, promise, promise_8, webworker, parts, parser, renderers, serialization_8, ass_2, attachment_3, dialogue_3, script_properties_2, style_3, misc_9, version_1, exports) {\n        exports.debugMode = settings_11.debugMode;\n        exports.verboseMode = settings_11.verboseMode;\n        exports.Set = set_2.Set;\n        exports.Map = map_15.Map;\n        exports.Promise = promise_8.Promise;\n        exports.DeferredPromise = promise_8.DeferredPromise;\n        exports.webworker = webworker;\n        exports.parts = parts;\n        exports.parser = parser;\n        exports.renderers = renderers;\n        exports.serialize = serialization_8.serialize;\n        exports.deserialize = serialization_8.deserialize;\n        exports.ASS = ass_2.ASS;\n        exports.Attachment = attachment_3.Attachment;\n        exports.AttachmentType = attachment_3.AttachmentType;\n        exports.Dialogue = dialogue_3.Dialogue;\n        exports.ScriptProperties = script_properties_2.ScriptProperties;\n        exports.Style = style_3.Style;\n        exports.BorderStyle = misc_9.BorderStyle;\n        exports.Format = misc_9.Format;\n        exports.WrappingStyle = misc_9.WrappingStyle;\n        exports.version = version_1.version;\n        /**\n         * Configures libjass with the given properties.\n         *\n         * @param {!*} newConfig\n         * @param {?boolean} newConfig[\"debugMode\"] When true, libjass logs some debug messages.\n         * @param {?boolean} newConfig[\"verboseMode\"] When true, libjass logs some more debug messages. This setting is independent of {@link libjass.debugMode}\n         * @param {?function(new:Set, !Array.<T>=)} newConfig[\"Set\"] Sets the Set implementation used by libjass to the provided one. If null, {@link ./utility/set.SimpleSet} is used.\n         * @param {?function(new:Map, !Array.<!Array.<*>>=)} newConfig[\"Map\"] Sets the Map implementation used by libjass to the provided one. If null, {@link ./utility/map.SimpleMap} is used.\n         * @param {?function(new:Promise)} newConfig[\"Promise\"] Sets the Promise implementation used by libjass to the provided one. If null, {@link ./utility/promise.SimplePromise} is used.\n         *\n         * @memberOf libjass\n         */\n        function configure(newConfig) {\n            if (typeof newConfig.debugMode === \"boolean\") {\n                settings.setDebugMode(newConfig.debugMode);\n            }\n            if (typeof newConfig.verboseMode === \"boolean\") {\n                settings.setVerboseMode(newConfig.verboseMode);\n            }\n            if (typeof newConfig.Set === \"function\" || newConfig.Set === null) {\n                set.setImplementation(newConfig.Set);\n            }\n            if (typeof newConfig.Map === \"function\" || newConfig.Map === null) {\n                map.setImplementation(newConfig.Map);\n            }\n            if (typeof newConfig.Promise === \"function\" || newConfig.Promise === null) {\n                promise.setImplementation(newConfig.Promise);\n            }\n        }\n        exports.configure = configure;\n        // Getters below are to work around https://github.com/Microsoft/TypeScript/issues/6366\n        Object.defineProperties(exports, {\n            debugMode: {\n                get: function () {\n                    return settings.debugMode;\n                },\n                set: function (value) {\n                    console.warn(\"Setter `libjass.debugMode = value` has been deprecated. Use `libjass.configure({ debugMode: value })` instead.\");\n                    settings.setDebugMode(value);\n                }\n            },\n            verboseMode: {\n                get: function () {\n                    return settings.verboseMode;\n                },\n                set: function (value) {\n                    console.warn(\"Setter `libjass.verboseMode = value` has been deprecated. Use `libjass.configure({ verboseMode: value })` instead.\");\n                    settings.setVerboseMode(value);\n                }\n            },\n            Set: {\n                get: function () {\n                    return set.Set;\n                },\n                set: function (value) {\n                    console.warn(\"Setter `libjass.Set = value` has been deprecated. Use `libjass.configure({ Set: value })` instead.\");\n                    set.setImplementation(value);\n                }\n            },\n            Map: {\n                get: function () {\n                    return map.Map;\n                },\n                set: function (value) {\n                    console.warn(\"Setter `libjass.Map = value` has been deprecated. Use `libjass.configure({ Map: value })` instead.\");\n                    map.setImplementation(value);\n                }\n            },\n            Promise: {\n                get: function () {\n                    return promise.Promise;\n                },\n                set: function (value) {\n                    console.warn(\"Setter `libjass.Promise = value` has been deprecated. Use `libjass.configure({ Promise: value })` instead.\");\n                    promise.setImplementation(value);\n                }\n            }\n        });\n    });\n    def(\"version\", [], function (exports) {\n        /**\n         * The version of libjass. An array like\n         *\n         *     [\"0.12.0\", 0, 12, 0]\n         *\n         * @type {!Array.<string|number>}\n         */\n        exports.version = [ \"0.13.0\", 0, 13, 0 ];\n    });\n    def(\"renderers/index\", [ \"renderers/clocks/base\", \"renderers/clocks/auto\", \"renderers/clocks/manual\", \"renderers/clocks/video\", \"renderers/default\", \"renderers/null\", \"renderers/web/renderer\", \"renderers/settings\" ], function (base_4, auto_2, manual_2, video_2, default_1, null_2, renderer_2, settings_10, exports) {\n        exports.ClockEvent = base_4.ClockEvent;\n        exports.EventSource = base_4.EventSource;\n        exports.AutoClock = auto_2.AutoClock;\n        exports.ManualClock = manual_2.ManualClock;\n        exports.VideoClock = video_2.VideoClock;\n        exports.DefaultRenderer = default_1.DefaultRenderer;\n        exports.NullRenderer = null_2.NullRenderer;\n        exports.WebRenderer = renderer_2.WebRenderer;\n        exports.RendererSettings = settings_10.RendererSettings;\n    });\n    def(\"renderers/default\", [ \"renderers/clocks/video\", \"renderers/web/renderer\" ], function (video_1, renderer_1, exports) {\n        /**\n         * A default renderer implementation.\n         *\n         * @param {!HTMLVideoElement} video\n         * @param {!libjass.ASS} ass\n         * @param {libjass.renderers.RendererSettings} settings\n         *\n         * @constructor\n         * @extends {libjass.renderers.WebRenderer}\n         * @memberOf libjass.renderers\n         */\n        var DefaultRenderer = function (_super) {\n            __extends(DefaultRenderer, _super);\n            function DefaultRenderer(video, ass, settings) {\n                _super.call(this, ass, new video_1.VideoClock(video), document.createElement(\"div\"), settings);\n                this._video = video;\n                this._video.parentElement.replaceChild(this.libjassSubsWrapper, this._video);\n                this.libjassSubsWrapper.insertBefore(this._video, this.libjassSubsWrapper.firstElementChild);\n            }\n            /**\n             * Resize the subtitles to the dimensions of the video element.\n             *\n             * This method accounts for letterboxing if the video element's size is not the same ratio as the video resolution.\n             */\n            DefaultRenderer.prototype.resize = function () {\n                // Handle letterboxing around the video. If the width or height are greater than the video can be, then consider that dead space.\n                var videoWidth = this._video.videoWidth;\n                var videoHeight = this._video.videoHeight;\n                var videoOffsetWidth = this._video.offsetWidth;\n                var videoOffsetHeight = this._video.offsetHeight;\n                var ratio = Math.min(videoOffsetWidth / videoWidth, videoOffsetHeight / videoHeight);\n                var subsWrapperWidth = videoWidth * ratio;\n                var subsWrapperHeight = videoHeight * ratio;\n                var subsWrapperLeft = (videoOffsetWidth - subsWrapperWidth) / 2;\n                var subsWrapperTop = (videoOffsetHeight - subsWrapperHeight) / 2;\n                _super.prototype.resize.call(this, subsWrapperWidth, subsWrapperHeight, subsWrapperLeft, subsWrapperTop);\n            };\n            /**\n             * @deprecated\n             */\n            DefaultRenderer.prototype.resizeVideo = function () {\n                console.warn(\"`DefaultRenderer.resizeVideo(width, height)` has been deprecated. Use `DefaultRenderer.resize()` instead.\");\n                this.resize();\n            };\n            DefaultRenderer.prototype._ready = function () {\n                this.resize();\n                _super.prototype._ready.call(this);\n            };\n            return DefaultRenderer;\n        }(renderer_1.WebRenderer);\n        exports.DefaultRenderer = DefaultRenderer;\n    });\n    def(\"renderers/web/renderer\", [ \"parser/ttf\", \"parts/index\", \"settings\", \"types/attachment\", \"types/misc\", \"utility/map\", \"utility/mixin\", \"utility/promise\", \"renderers/clocks/base\", \"renderers/null\", \"renderers/web/animation-collection\", \"renderers/web/drawing-styles\", \"renderers/web/font-size\", \"renderers/web/keyframe\", \"renderers/web/span-styles\" ], function (ttf_1, parts, settings_9, attachment_2, misc_8, map_14, mixin_3, promise_7, base_3, null_1, animation_collection_1, drawing_styles_1, font_size_2, keyframe_1, span_styles_1, exports) {\n        var fontSrcUrlRegex = /^(url|local)\\([\"']?(.+?)[\"']?\\)$/;\n        /**\n         * A renderer implementation that draws subtitles to the given <div>\n         *\n         * After the renderer fires its ready event, {@link libjass.renderers.WebRenderer.resize} must be called to initialize its size before starting the clock.\n         *\n         * @param {!libjass.ASS} ass\n         * @param {!libjass.renderers.Clock} clock\n         * @param {!HTMLDivElement} libjassSubsWrapper Subtitles will be rendered to this <div>\n         * @param {!libjass.renderers.RendererSettings} settings\n         *\n         * @constructor\n         * @extends {libjass.renderers.NullRenderer}\n         * @implements {libjass.renderers.EventSource.<string>}\n         * @memberOf libjass.renderers\n         */\n        var WebRenderer = function (_super) {\n            __extends(WebRenderer, _super);\n            function WebRenderer(ass, clock, libjassSubsWrapper, settings) {\n                var _this = this;\n                _super.call(this, ass, clock, function () {\n                    if (!(libjassSubsWrapper instanceof HTMLDivElement)) {\n                        var temp = settings;\n                        settings = libjassSubsWrapper;\n                        libjassSubsWrapper = temp;\n                        console.warn(\"WebRenderer's constructor now takes libjassSubsWrapper as the third parameter and settings as the fourth parameter. Please update the caller.\");\n                    }\n                    return settings;\n                }());\n                this._libjassSubsWrapper = libjassSubsWrapper;\n                this._layerWrappers = [];\n                this._layerAlignmentWrappers = [];\n                this._fontMetricsCache = new map_14.Map();\n                this._currentSubs = new map_14.Map();\n                this._preRenderedSubs = new map_14.Map();\n                // EventSource members\n                /**\n                 * @type {!Map.<T, !Array.<Function>>}\n                 */\n                this._eventListeners = new map_14.Map();\n                this._libjassSubsWrapper.classList.add(\"libjass-wrapper\");\n                this._subsWrapper = document.createElement(\"div\");\n                this._libjassSubsWrapper.appendChild(this._subsWrapper);\n                this._subsWrapper.className = \"libjass-subs\";\n                this._fontSizeElement = document.createElement(\"div\");\n                this._libjassSubsWrapper.appendChild(this._fontSizeElement);\n                this._fontSizeElement.className = \"libjass-font-measure\";\n                this._fontSizeElement.appendChild(document.createTextNode(\"M\"));\n                // Preload fonts\n                if (settings_9.debugMode) {\n                    console.log(\"Preloading fonts...\");\n                }\n                var preloadFontPromises = [];\n                var fontFetchPromisesCache = new map_14.Map();\n                var fontMap = this.settings.fontMap === null ? new map_14.Map() : this.settings.fontMap;\n                var attachedFontsMap = new map_14.Map();\n                if (this.settings.useAttachedFonts) {\n                    ass.attachments.forEach(function (attachment) {\n                        if (attachment.type !== attachment_2.AttachmentType.Font) {\n                            return;\n                        }\n                        var ttfNames;\n                        try {\n                            ttfNames = ttf_1.getTtfNames(attachment);\n                        } catch (ex) {\n                            console.error(ex);\n                            return;\n                        }\n                        var attachmentUrl = \"data:application/x-font-ttf;base64,\" + attachment.contents;\n                        ttfNames.forEach(function (name) {\n                            var correspondingFontMapEntry = fontMap.get(name);\n                            if (correspondingFontMapEntry !== undefined) {\n                                // Also defined in fontMap.\n                                if (typeof correspondingFontMapEntry !== \"string\") {\n                                    // Entry in fontMap is an array. Append this URL to it.\n                                    correspondingFontMapEntry.push(attachmentUrl);\n                                } else {\n                                    /* The entry in fontMap is a string. Don't append this URL to it. Instead, put it in attachedFontsMap now\n                                     * and it'll be merged with the entry from fontMap later. If it was added here, and later the string needed\n                                     * to be split on commas, then the commas in the data URI would break the result.\n                                     */\n                                    var existingList = attachedFontsMap.get(name);\n                                    if (existingList === undefined) {\n                                        attachedFontsMap.set(name, existingList = []);\n                                    }\n                                    existingList.push(attachmentUrl);\n                                }\n                            } else {\n                                // Not defined in fontMap. Add it there.\n                                fontMap.set(name, [ attachmentUrl ]);\n                            }\n                        });\n                    });\n                }\n                fontMap.forEach(function (srcs, fontFamily) {\n                    var fontFamilyMetricsPromise;\n                    if (global.document && global.document.fonts && global.document.fonts.add) {\n                        // value should be string. If it's string[], combine it into string\n                        var source_1 = typeof srcs === \"string\" ? srcs : srcs.map(function (src) {\n                            return src.match(fontSrcUrlRegex) !== null ? src : 'url(\"' + src + '\")';\n                        }).join(\", \");\n                        var attachedFontUrls = attachedFontsMap.get(fontFamily);\n                        if (attachedFontUrls !== undefined) {\n                            for (var _i = 0, attachedFontUrls_1 = attachedFontUrls; _i < attachedFontUrls_1.length; _i++) {\n                                var url = attachedFontUrls_1[_i];\n                                source_1 += ', url(\"' + url + '\")';\n                            }\n                        }\n                        var existingFontFaces_1 = [];\n                        global.document.fonts.forEach(function (fontFace) {\n                            if (fontFace.family === fontFamily || fontFace.family === '\"' + fontFamily + '\"') {\n                                existingFontFaces_1.push(fontFace);\n                            }\n                        });\n                        var fontFetchPromise = void 0;\n                        if (existingFontFaces_1.length === 0) {\n                            var fontFace = new global.FontFace(fontFamily, source_1);\n                            var quotedFontFace = new global.FontFace('\"' + fontFamily + '\"', source_1);\n                            global.document.fonts.add(fontFace);\n                            global.document.fonts.add(quotedFontFace);\n                            fontFetchPromise = promise_7.any([ fontFace.load(), quotedFontFace.load() ]);\n                        } else {\n                            fontFetchPromise = promise_7.any(existingFontFaces_1.map(function (fontFace) {\n                                return fontFace.load();\n                            }));\n                        }\n                        fontFamilyMetricsPromise = _this._calculateFontMetricsAfterFetch(fontFamily, fontFetchPromise.catch(function (reason) {\n                            console.warn(\"Fetching fonts for \" + fontFamily + \" at \" + source_1 + \" failed: %o\", reason);\n                            return null;\n                        }));\n                    } else {\n                        // value should be string[]. If it's string, split it into string[]\n                        var urls_1 = (typeof srcs === \"string\" ? srcs.split(/,/) : srcs).map(function (url) {\n                            return url.trim();\n                        }).map(function (url) {\n                            var match = url.match(fontSrcUrlRegex);\n                            if (match === null) {\n                                // A URL\n                                return url;\n                            }\n                            if (match[1] === \"local\") {\n                                // A local() URL. Don't fetch it.\n                                return null;\n                            }\n                            // A url() URL. Extract the raw URL.\n                            return match[2];\n                        }).filter(function (url) {\n                            return url !== null;\n                        });\n                        var attachedFontUrls = attachedFontsMap.get(fontFamily);\n                        if (attachedFontUrls !== undefined) {\n                            urls_1 = urls_1.concat(attachedFontUrls);\n                        }\n                        var thisFontFamilysFetchPromises = urls_1.map(function (url) {\n                            var fontFetchPromise = fontFetchPromisesCache.get(url);\n                            if (fontFetchPromise === undefined) {\n                                fontFetchPromise = new promise_7.Promise(function (resolve, reject) {\n                                    var xhr = new XMLHttpRequest();\n                                    xhr.addEventListener(\"load\", function () {\n                                        if (settings_9.debugMode) {\n                                            console.log(\"Preloaded \" + url + \".\");\n                                        }\n                                        resolve(null);\n                                    });\n                                    xhr.addEventListener(\"error\", function (err) {\n                                        reject(err);\n                                    });\n                                    xhr.open(\"GET\", url, true);\n                                    xhr.send();\n                                });\n                                fontFetchPromisesCache.set(url, fontFetchPromise);\n                            }\n                            return fontFetchPromise;\n                        });\n                        var allFontsFetchedPromise = thisFontFamilysFetchPromises.length === 0 ? promise_7.Promise.resolve(null) : promise_7.first(thisFontFamilysFetchPromises).catch(function (reason) {\n                            console.warn(\"Fetching fonts for \" + fontFamily + \" at \" + urls_1.join(\", \") + \" failed: %o\", reason);\n                            return null;\n                        });\n                        fontFamilyMetricsPromise = _this._calculateFontMetricsAfterFetch(fontFamily, allFontsFetchedPromise);\n                    }\n                    preloadFontPromises.push(fontFamilyMetricsPromise.then(function (metrics) {\n                        return _this._fontMetricsCache.set(fontFamily, metrics);\n                    }));\n                });\n                promise_7.Promise.all(preloadFontPromises).then(function () {\n                    if (settings_9.debugMode) {\n                        console.log(\"All fonts have been preloaded.\");\n                    }\n                    _this._ready();\n                });\n            }\n            Object.defineProperty(WebRenderer.prototype, \"libjassSubsWrapper\", {\n                /**\n                 * @type {!HTMLDivElement}\n                 */\n                get: function () {\n                    return this._libjassSubsWrapper;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Resize the subtitles to the given new dimensions.\n             *\n             * @param {number} width\n             * @param {number} height\n             * @param {number=0} left\n             * @param {number=0} top\n             */\n            WebRenderer.prototype.resize = function (width, height, left, top) {\n                if (left === void 0) {\n                    left = 0;\n                }\n                if (top === void 0) {\n                    top = 0;\n                }\n                this._removeAllSubs();\n                this._subsWrapper.style.width = width.toFixed(3) + \"px\";\n                this._subsWrapper.style.height = height.toFixed(3) + \"px\";\n                this._subsWrapper.style.left = left.toFixed(3) + \"px\";\n                this._subsWrapper.style.top = top.toFixed(3) + \"px\";\n                this._subsWrapperWidth = width;\n                this._scaleX = width / this.ass.properties.resolutionX;\n                this._scaleY = height / this.ass.properties.resolutionY;\n                // Any dialogues which have been pre-rendered will need to be pre-rendered again.\n                this._preRenderedSubs.clear();\n                // this.currentTime will be -1 if resize() is called before the clock begins playing for the first time. In this situation, there is no need to force a redraw.\n                if (this.clock.currentTime !== -1) {\n                    this._onClockTick();\n                }\n            };\n            /**\n             * The magic happens here. The subtitle div is rendered and stored. Call {@link libjass.renderers.WebRenderer.draw} to get a clone of the div to display.\n             *\n             * @param {!libjass.Dialogue} dialogue\n             * @return {PreRenderedSub}\n             */\n            WebRenderer.prototype.preRender = function (dialogue) {\n                var _this = this;\n                var currentTimeRelativeToDialogueStart = this.clock.currentTime - dialogue.start;\n                if (dialogue.containsTransformTag && currentTimeRelativeToDialogueStart < 0) {\n                    // draw() expects this function to always return non-null, but it only calls this function when currentTimeRelativeToDialogueStart would be >= 0\n                    return null;\n                }\n                var alreadyPreRenderedSub = this._preRenderedSubs.get(dialogue.id);\n                if (alreadyPreRenderedSub) {\n                    return alreadyPreRenderedSub;\n                }\n                var sub = document.createElement(\"div\");\n                sub.style.marginLeft = (this._scaleX * dialogue.style.marginLeft).toFixed(3) + \"px\";\n                sub.style.marginRight = (this._scaleX * dialogue.style.marginRight).toFixed(3) + \"px\";\n                sub.style.marginTop = sub.style.marginBottom = (this._scaleY * dialogue.style.marginVertical).toFixed(3) + \"px\";\n                sub.style.minWidth = (this._subsWrapperWidth - this._scaleX * (dialogue.style.marginLeft + dialogue.style.marginRight)).toFixed(3) + \"px\";\n                var dialogueAnimationStylesElement = document.createElement(\"style\");\n                dialogueAnimationStylesElement.id = \"libjass-animation-styles-\" + this.id + \"-\" + dialogue.id;\n                dialogueAnimationStylesElement.type = \"text/css\";\n                var dialogueAnimationCollection = new animation_collection_1.AnimationCollection(this, dialogueAnimationStylesElement);\n                var svgElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n                svgElement.setAttribute(\"version\", \"1.1\");\n                svgElement.setAttribute(\"class\", \"libjass-filters\");\n                svgElement.width.baseVal.valueAsString = \"0\";\n                svgElement.height.baseVal.valueAsString = \"0\";\n                var svgDefsElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n                svgElement.appendChild(svgDefsElement);\n                var currentSpan = null;\n                var currentSpanStyles = new span_styles_1.SpanStyles(this, dialogue, this._scaleX, this._scaleY, this.settings, this._fontSizeElement, svgDefsElement, this._fontMetricsCache);\n                var currentAnimationCollection = null;\n                var previousAddNewLine = false;\n                // If two or more \\N's are encountered in sequence, then all but the first will be created using currentSpanStyles.makeNewLine() instead\n                var startNewSpan = function (addNewLine) {\n                    if (currentSpan !== null && currentSpan.hasChildNodes()) {\n                        sub.appendChild(currentSpanStyles.setStylesOnSpan(currentSpan, currentAnimationCollection));\n                    }\n                    if (currentAnimationCollection !== null) {\n                        currentAnimationCollection.animationDelays.forEach(function (delay, name) {\n                            return dialogueAnimationCollection.animationDelays.set(name, delay);\n                        });\n                    }\n                    if (addNewLine) {\n                        if (previousAddNewLine) {\n                            sub.appendChild(currentSpanStyles.makeNewLine());\n                        } else {\n                            sub.appendChild(document.createElement(\"br\"));\n                        }\n                    }\n                    currentSpan = document.createElement(\"span\");\n                    currentAnimationCollection = new animation_collection_1.AnimationCollection(_this, dialogueAnimationStylesElement);\n                    previousAddNewLine = addNewLine;\n                };\n                startNewSpan(false);\n                var currentDrawingStyles = new drawing_styles_1.DrawingStyles(this._scaleX, this._scaleY);\n                var wrappingStyle = this.ass.properties.wrappingStyle;\n                var karaokeTimesAccumulator = 0;\n                for (var _i = 0, _a = dialogue.parts; _i < _a.length; _i++) {\n                    var part = _a[_i];\n                    if (part instanceof parts.Italic) {\n                        currentSpanStyles.italic = part.value;\n                    } else if (part instanceof parts.Bold) {\n                        currentSpanStyles.bold = part.value;\n                    } else if (part instanceof parts.Underline) {\n                        currentSpanStyles.underline = part.value;\n                    } else if (part instanceof parts.StrikeThrough) {\n                        currentSpanStyles.strikeThrough = part.value;\n                    } else if (part instanceof parts.Border) {\n                        currentSpanStyles.outlineWidth = part.value;\n                        currentSpanStyles.outlineHeight = part.value;\n                    } else if (part instanceof parts.BorderX) {\n                        currentSpanStyles.outlineWidth = part.value;\n                    } else if (part instanceof parts.BorderY) {\n                        currentSpanStyles.outlineHeight = part.value;\n                    } else if (part instanceof parts.Shadow) {\n                        currentSpanStyles.shadowDepthX = part.value;\n                        currentSpanStyles.shadowDepthY = part.value;\n                    } else if (part instanceof parts.ShadowX) {\n                        currentSpanStyles.shadowDepthX = part.value;\n                    } else if (part instanceof parts.ShadowY) {\n                        currentSpanStyles.shadowDepthY = part.value;\n                    } else if (part instanceof parts.Blur) {\n                        currentSpanStyles.blur = part.value;\n                    } else if (part instanceof parts.GaussianBlur) {\n                        currentSpanStyles.gaussianBlur = part.value;\n                    } else if (part instanceof parts.FontName) {\n                        currentSpanStyles.fontName = part.value;\n                    } else if (part instanceof parts.FontSize) {\n                        currentSpanStyles.fontSize = part.value;\n                    } else if (part instanceof parts.FontSizePlus) {\n                        currentSpanStyles.fontSize *= 1 + part.value;\n                    } else if (part instanceof parts.FontSizeMinus) {\n                        currentSpanStyles.fontSize *= 1 - part.value;\n                    } else if (part instanceof parts.FontScaleX) {\n                        currentSpanStyles.fontScaleX = part.value;\n                    } else if (part instanceof parts.FontScaleY) {\n                        currentSpanStyles.fontScaleY = part.value;\n                    } else if (part instanceof parts.LetterSpacing) {\n                        currentSpanStyles.letterSpacing = part.value;\n                    } else if (part instanceof parts.RotateX) {\n                        currentSpanStyles.rotationX = part.value;\n                    } else if (part instanceof parts.RotateY) {\n                        currentSpanStyles.rotationY = part.value;\n                    } else if (part instanceof parts.RotateZ) {\n                        currentSpanStyles.rotationZ = part.value;\n                    } else if (part instanceof parts.SkewX) {\n                        currentSpanStyles.skewX = part.value;\n                    } else if (part instanceof parts.SkewY) {\n                        currentSpanStyles.skewY = part.value;\n                    } else if (part instanceof parts.PrimaryColor) {\n                        currentSpanStyles.primaryColor = part.value;\n                    } else if (part instanceof parts.SecondaryColor) {\n                        currentSpanStyles.secondaryColor = part.value;\n                    } else if (part instanceof parts.OutlineColor) {\n                        currentSpanStyles.outlineColor = part.value;\n                    } else if (part instanceof parts.ShadowColor) {\n                        currentSpanStyles.shadowColor = part.value;\n                    } else if (part instanceof parts.Alpha) {\n                        currentSpanStyles.primaryAlpha = part.value;\n                        currentSpanStyles.secondaryAlpha = part.value;\n                        currentSpanStyles.outlineAlpha = part.value;\n                        currentSpanStyles.shadowAlpha = part.value;\n                    } else if (part instanceof parts.PrimaryAlpha) {\n                        currentSpanStyles.primaryAlpha = part.value;\n                    } else if (part instanceof parts.SecondaryAlpha) {\n                        currentSpanStyles.secondaryAlpha = part.value;\n                    } else if (part instanceof parts.OutlineAlpha) {\n                        currentSpanStyles.outlineAlpha = part.value;\n                    } else if (part instanceof parts.ShadowAlpha) {\n                        currentSpanStyles.shadowAlpha = part.value;\n                    } else if (part instanceof parts.Alignment) {} else if (part instanceof parts.ColorKaraoke) {\n                        startNewSpan(false);\n                        currentAnimationCollection.add(\"step-end\", [ new keyframe_1.Keyframe(0, new map_14.Map([ [ \"color\", currentSpanStyles.secondaryColor.withAlpha(currentSpanStyles.secondaryAlpha).toString() ] ])), new keyframe_1.Keyframe(karaokeTimesAccumulator, new map_14.Map([ [ \"color\", currentSpanStyles.primaryColor.withAlpha(currentSpanStyles.primaryAlpha).toString() ] ])) ]);\n                        karaokeTimesAccumulator += part.duration;\n                    } else if (part instanceof parts.WrappingStyle) {\n                        wrappingStyle = part.value;\n                    } else if (part instanceof parts.Reset) {\n                        var newStyleName = part.value;\n                        if (newStyleName === null) {\n                            currentSpanStyles.reset(null);\n                        } else {\n                            currentSpanStyles.reset(this.ass.styles.get(newStyleName));\n                        }\n                    } else if (part instanceof parts.Position) {\n                        sub.style.position = \"absolute\";\n                        sub.style.left = (this._scaleX * part.x).toFixed(3) + \"px\";\n                        sub.style.top = (this._scaleY * part.y).toFixed(3) + \"px\";\n                    } else if (part instanceof parts.Move) {\n                        sub.style.position = \"absolute\";\n                        dialogueAnimationCollection.add(\"linear\", [ new keyframe_1.Keyframe(0, new map_14.Map([ [ \"left\", (this._scaleX * part.x1).toFixed(3) + \"px\" ], [ \"top\", (this._scaleY * part.y1).toFixed(3) + \"px\" ] ])), new keyframe_1.Keyframe(part.t1, new map_14.Map([ [ \"left\", (this._scaleX * part.x1).toFixed(3) + \"px\" ], [ \"top\", (this._scaleY * part.y1).toFixed(3) + \"px\" ] ])), new keyframe_1.Keyframe(part.t2, new map_14.Map([ [ \"left\", (this._scaleX * part.x2).toFixed(3) + \"px\" ], [ \"top\", (this._scaleY * part.y2).toFixed(3) + \"px\" ] ])), new keyframe_1.Keyframe(dialogue.end - dialogue.start, new map_14.Map([ [ \"left\", (this._scaleX * part.x2).toFixed(3) + \"px\" ], [ \"top\", (this._scaleY * part.y2).toFixed(3) + \"px\" ] ])) ]);\n                    } else if (part instanceof parts.Fade) {\n                        var keyframes = [];\n                        if (part.start !== 0) {\n                            keyframes.push(new keyframe_1.Keyframe(0, new map_14.Map([ [ \"opacity\", \"0\" ] ])));\n                        }\n                        keyframes.push(new keyframe_1.Keyframe(part.start, new map_14.Map([ [ \"opacity\", \"1\" ] ])), new keyframe_1.Keyframe(dialogue.end - dialogue.start - part.end, new map_14.Map([ [ \"opacity\", \"1\" ] ])));\n                        if (part.end !== 0) {\n                            keyframes.push(new keyframe_1.Keyframe(dialogue.end - dialogue.start, new map_14.Map([ [ \"opacity\", \"0\" ] ])));\n                        }\n                        dialogueAnimationCollection.add(\"linear\", keyframes);\n                    } else if (part instanceof parts.ComplexFade) {\n                        dialogueAnimationCollection.add(\"linear\", [ new keyframe_1.Keyframe(0, new map_14.Map([ [ \"opacity\", part.a1.toFixed(3) ] ])), new keyframe_1.Keyframe(part.t1, new map_14.Map([ [ \"opacity\", part.a1.toFixed(3) ] ])), new keyframe_1.Keyframe(part.t2, new map_14.Map([ [ \"opacity\", part.a2.toFixed(3) ] ])), new keyframe_1.Keyframe(part.t3, new map_14.Map([ [ \"opacity\", part.a2.toFixed(3) ] ])), new keyframe_1.Keyframe(part.t4, new map_14.Map([ [ \"opacity\", part.a3.toFixed(3) ] ])), new keyframe_1.Keyframe(dialogue.end - dialogue.start, new map_14.Map([ [ \"opacity\", part.a3.toFixed(3) ] ])) ]);\n                    } else if (part instanceof parts.Transform) {\n                        var progression = currentTimeRelativeToDialogueStart <= part.start ? 0 : currentTimeRelativeToDialogueStart >= part.end ? 1 : Math.pow((currentTimeRelativeToDialogueStart - part.start) / (part.end - part.start), part.accel);\n                        for (var _b = 0, _c = part.tags; _b < _c.length; _b++) {\n                            var tag = _c[_b];\n                            if (tag instanceof parts.Border) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.outlineWidth += progression * (tag.value - currentSpanStyles.outlineWidth);\n                                    currentSpanStyles.outlineHeight += progression * (tag.value - currentSpanStyles.outlineHeight);\n                                } else {\n                                    currentSpanStyles.outlineWidth = null;\n                                    currentSpanStyles.outlineHeight = null;\n                                }\n                            } else if (tag instanceof parts.BorderX) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.outlineWidth += progression * (tag.value - currentSpanStyles.outlineWidth);\n                                } else {\n                                    currentSpanStyles.outlineWidth = null;\n                                }\n                            } else if (tag instanceof parts.BorderY) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.outlineHeight += progression * (tag.value - currentSpanStyles.outlineHeight);\n                                } else {\n                                    currentSpanStyles.outlineHeight = null;\n                                }\n                            } else if (tag instanceof parts.Shadow) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.shadowDepthX += progression * (tag.value - currentSpanStyles.shadowDepthX);\n                                    currentSpanStyles.shadowDepthY += progression * (tag.value - currentSpanStyles.shadowDepthY);\n                                } else {\n                                    currentSpanStyles.shadowDepthX = null;\n                                    currentSpanStyles.shadowDepthY = null;\n                                }\n                            } else if (tag instanceof parts.ShadowX) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.shadowDepthX += progression * (tag.value - currentSpanStyles.shadowDepthX);\n                                } else {\n                                    currentSpanStyles.shadowDepthX = null;\n                                }\n                            } else if (tag instanceof parts.ShadowY) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.shadowDepthY += progression * (tag.value - currentSpanStyles.shadowDepthY);\n                                } else {\n                                    currentSpanStyles.shadowDepthY = null;\n                                }\n                            } else if (tag instanceof parts.Blur) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.blur += progression * (tag.value - currentSpanStyles.blur);\n                                } else {\n                                    currentSpanStyles.blur = null;\n                                }\n                            } else if (tag instanceof parts.GaussianBlur) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.gaussianBlur += progression * (tag.value - currentSpanStyles.gaussianBlur);\n                                } else {\n                                    currentSpanStyles.gaussianBlur = null;\n                                }\n                            } else if (tag instanceof parts.FontSize) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.fontSize += progression * (tag.value - currentSpanStyles.fontSize);\n                                } else {\n                                    currentSpanStyles.fontSize = null;\n                                }\n                            } else if (tag instanceof parts.FontSizePlus) {\n                                currentSpanStyles.fontSize *= 1 + progression * tag.value;\n                            } else if (tag instanceof parts.FontSizeMinus) {\n                                currentSpanStyles.fontSize *= 1 - progression * tag.value;\n                            } else if (tag instanceof parts.FontScaleX) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.fontScaleX += progression * (tag.value - currentSpanStyles.fontScaleX);\n                                } else {\n                                    currentSpanStyles.fontScaleX = null;\n                                }\n                            } else if (tag instanceof parts.FontScaleY) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.fontScaleY += progression * (tag.value - currentSpanStyles.fontScaleY);\n                                } else {\n                                    currentSpanStyles.fontScaleY = null;\n                                }\n                            } else if (tag instanceof parts.LetterSpacing) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.letterSpacing += progression * (tag.value - currentSpanStyles.letterSpacing);\n                                } else {\n                                    currentSpanStyles.letterSpacing = null;\n                                }\n                            } else if (tag instanceof parts.RotateX) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.rotationX += progression * (tag.value - currentSpanStyles.rotationX);\n                                } else {\n                                    currentSpanStyles.rotationX = null;\n                                }\n                            } else if (tag instanceof parts.RotateY) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.rotationY += progression * (tag.value - currentSpanStyles.rotationY);\n                                } else {\n                                    currentSpanStyles.rotationY = null;\n                                }\n                            } else if (tag instanceof parts.RotateZ) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.rotationZ += progression * (tag.value - currentSpanStyles.rotationZ);\n                                } else {\n                                    currentSpanStyles.rotationZ = null;\n                                }\n                            } else if (tag instanceof parts.SkewX) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.skewX += progression * (tag.value - currentSpanStyles.skewX);\n                                } else {\n                                    currentSpanStyles.skewX = null;\n                                }\n                            } else if (tag instanceof parts.SkewY) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.skewY += progression * (tag.value - currentSpanStyles.skewY);\n                                } else {\n                                    currentSpanStyles.skewY = null;\n                                }\n                            } else if (tag instanceof parts.PrimaryColor) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.primaryColor = currentSpanStyles.primaryColor.interpolate(tag.value, progression);\n                                } else {\n                                    currentSpanStyles.primaryColor = null;\n                                }\n                            } else if (tag instanceof parts.SecondaryColor) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.secondaryColor = currentSpanStyles.secondaryColor.interpolate(tag.value, progression);\n                                } else {\n                                    currentSpanStyles.secondaryColor = null;\n                                }\n                            } else if (tag instanceof parts.OutlineColor) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.outlineColor = currentSpanStyles.outlineColor.interpolate(tag.value, progression);\n                                } else {\n                                    currentSpanStyles.outlineColor = null;\n                                }\n                            } else if (tag instanceof parts.ShadowColor) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.shadowColor = currentSpanStyles.shadowColor.interpolate(tag.value, progression);\n                                } else {\n                                    currentSpanStyles.shadowColor = null;\n                                }\n                            } else if (tag instanceof parts.Alpha) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.primaryAlpha += progression * (tag.value - currentSpanStyles.primaryAlpha);\n                                    currentSpanStyles.secondaryAlpha += progression * (tag.value - currentSpanStyles.secondaryAlpha);\n                                    currentSpanStyles.outlineAlpha += progression * (tag.value - currentSpanStyles.outlineAlpha);\n                                    currentSpanStyles.shadowAlpha += progression * (tag.value - currentSpanStyles.shadowAlpha);\n                                } else {\n                                    currentSpanStyles.primaryAlpha = null;\n                                    currentSpanStyles.secondaryAlpha = null;\n                                    currentSpanStyles.outlineAlpha = null;\n                                    currentSpanStyles.shadowAlpha = null;\n                                }\n                            } else if (tag instanceof parts.PrimaryAlpha) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.primaryAlpha += progression * (tag.value - currentSpanStyles.primaryAlpha);\n                                } else {\n                                    currentSpanStyles.primaryAlpha = null;\n                                }\n                            } else if (tag instanceof parts.SecondaryAlpha) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.secondaryAlpha += progression * (tag.value - currentSpanStyles.secondaryAlpha);\n                                } else {\n                                    currentSpanStyles.secondaryAlpha = null;\n                                }\n                            } else if (tag instanceof parts.OutlineAlpha) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.outlineAlpha += progression * (tag.value - currentSpanStyles.outlineAlpha);\n                                } else {\n                                    currentSpanStyles.outlineAlpha = null;\n                                }\n                            } else if (tag instanceof parts.ShadowAlpha) {\n                                if (tag.value !== null) {\n                                    currentSpanStyles.shadowAlpha += progression * (tag.value - currentSpanStyles.shadowAlpha);\n                                } else {\n                                    currentSpanStyles.shadowAlpha = null;\n                                }\n                            }\n                        }\n                    } else if (part instanceof parts.DrawingMode) {\n                        if (part.scale !== 0) {\n                            currentDrawingStyles.scale = part.scale;\n                        }\n                    } else if (part instanceof parts.DrawingBaselineOffset) {\n                        currentDrawingStyles.baselineOffset = part.value;\n                    } else if (part instanceof parts.DrawingInstructions) {\n                        currentSpan.appendChild(currentDrawingStyles.toSVG(part, currentSpanStyles.primaryColor.withAlpha(currentSpanStyles.primaryAlpha)));\n                        startNewSpan(false);\n                    } else if (part instanceof parts.Text) {\n                        currentSpan.appendChild(document.createTextNode(part.value + \"\\u200c\"));\n                        startNewSpan(false);\n                    } else if (settings_9.debugMode && part instanceof parts.Comment) {\n                        currentSpan.appendChild(document.createTextNode(part.value));\n                        startNewSpan(false);\n                    } else if (part instanceof parts.NewLine) {\n                        startNewSpan(true);\n                    } else if (part instanceof parts.SoftNewLine) {\n                        if (wrappingStyle === misc_8.WrappingStyle.NoLineWrapping) {\n                            startNewSpan(true);\n                        } else {\n                            currentSpan.appendChild(document.createTextNode(\" \"));\n                        }\n                    }\n                }\n                var divTransformStyle = \"\";\n                var transformOrigin = WebRenderer._transformOrigins[dialogue.alignment];\n                var transformOriginString = transformOrigin[0] + \"% \" + transformOrigin[1] + \"%\";\n                for (var _d = 0, _e = dialogue.parts; _d < _e.length; _d++) {\n                    var part = _e[_d];\n                    if (part instanceof parts.Position || part instanceof parts.Move) {\n                        divTransformStyle = \"translate(\" + -transformOrigin[0] + \"%, \" + -transformOrigin[1] + \"%) translate(-\" + sub.style.marginLeft + \", -\" + sub.style.marginTop + \")\";\n                        break;\n                    }\n                }\n                if (currentSpanStyles.rotationY !== 0) {\n                    divTransformStyle += \" rotateY(\" + currentSpanStyles.rotationY + \"deg)\";\n                }\n                if (currentSpanStyles.rotationX !== 0) {\n                    divTransformStyle += \" rotateX(\" + currentSpanStyles.rotationX + \"deg)\";\n                }\n                if (currentSpanStyles.rotationZ !== 0) {\n                    divTransformStyle += \" rotateZ(\" + -1 * currentSpanStyles.rotationZ + \"deg)\";\n                }\n                sub.style.webkitTransform = divTransformStyle;\n                sub.style.transform = divTransformStyle;\n                sub.style.webkitTransformOrigin = transformOriginString;\n                sub.style.transformOrigin = transformOriginString;\n                switch (wrappingStyle) {\n                  case misc_8.WrappingStyle.EndOfLineWrapping:\n                    sub.style.whiteSpace = \"pre-wrap\";\n                    break;\n\n                  case misc_8.WrappingStyle.NoLineWrapping:\n                    sub.style.whiteSpace = \"pre\";\n                    break;\n\n                  case misc_8.WrappingStyle.SmartWrappingWithWiderTopLine:\n                  case misc_8.WrappingStyle.SmartWrappingWithWiderBottomLine:\n                    /* Not supported. Treat the same as EndOfLineWrapping */\n                    sub.style.whiteSpace = \"pre-wrap\";\n                    break;\n                }\n                if (sub.style.position !== \"\") {\n                    // Explicitly set text alignment on absolutely-positioned subs because they'll go in a .an0 <div> and so won't get alignment CSS text-align.\n                    switch (dialogue.alignment) {\n                      case 1:\n                      case 4:\n                      case 7:\n                        sub.style.textAlign = \"left\";\n                        break;\n\n                      case 2:\n                      case 5:\n                      case 8:\n                        sub.style.textAlign = \"center\";\n                        break;\n\n                      case 3:\n                      case 6:\n                      case 9:\n                        sub.style.textAlign = \"right\";\n                        break;\n                    }\n                }\n                sub.style.webkitAnimation = dialogueAnimationCollection.animationStyle;\n                sub.style.animation = dialogueAnimationCollection.animationStyle;\n                sub.setAttribute(\"data-dialogue-id\", this.id + \"-\" + dialogue.id);\n                if (dialogueAnimationStylesElement.textContent !== \"\") {\n                    sub.appendChild(dialogueAnimationStylesElement);\n                }\n                if (svgDefsElement.hasChildNodes()) {\n                    sub.appendChild(svgElement);\n                }\n                var result = {\n                    sub: sub,\n                    animationDelays: dialogueAnimationCollection.animationDelays\n                };\n                if (!dialogue.containsTransformTag) {\n                    this._preRenderedSubs.set(dialogue.id, result);\n                }\n                return result;\n            };\n            /**\n             * Returns the subtitle div for display. The {@link libjass.renderers.Clock.currentTime} of the {@link libjass.renderers.NullRenderer.clock} is used to shift the\n             * animations appropriately, so that at the time the div is inserted into the DOM and the animations begin, they are in sync with the clock time.\n             *\n             * @param {!libjass.Dialogue} dialogue\n             */\n            WebRenderer.prototype.draw = function (dialogue) {\n                var _this = this;\n                if (this._currentSubs.has(dialogue) && !dialogue.containsTransformTag) {\n                    return;\n                }\n                if (settings_9.debugMode) {\n                    console.log(dialogue.toString());\n                }\n                var thePreRenderedSub = this._preRenderedSubs.get(dialogue.id);\n                if (thePreRenderedSub === undefined) {\n                    thePreRenderedSub = this.preRender(dialogue);\n                    if (settings_9.debugMode) {\n                        console.log(dialogue.toString());\n                    }\n                }\n                var preRenderedSub = thePreRenderedSub;\n                var result = preRenderedSub.sub.cloneNode(true);\n                var applyAnimationDelays = function (node) {\n                    var animationNames = node.style.animationName || node.style.webkitAnimationName || \"\";\n                    if (animationNames !== \"\") {\n                        var animationDelays = animationNames.split(\",\").map(function (name) {\n                            name = name.trim();\n                            var delay = preRenderedSub.animationDelays.get(name);\n                            return ((delay + dialogue.start - _this.clock.currentTime) / _this.clock.rate).toFixed(3) + \"s\";\n                        }).join(\", \");\n                        node.style.webkitAnimationDelay = animationDelays;\n                        node.style.animationDelay = animationDelays;\n                    }\n                };\n                applyAnimationDelays(result);\n                var animatedDescendants = result.querySelectorAll('[style*=\"animation:\"]');\n                for (var i = 0; i < animatedDescendants.length; i++) {\n                    applyAnimationDelays(animatedDescendants[i]);\n                }\n                var layer = dialogue.layer;\n                var alignment = result.style.position === \"absolute\" ? 0 : dialogue.alignment;\n                // Alignment 0 is for absolutely-positioned subs\n                // Create the layer wrapper div and the alignment div inside it if not already created\n                if (this._layerWrappers[layer] === undefined) {\n                    var layerWrapper = document.createElement(\"div\");\n                    layerWrapper.className = \"layer layer\" + layer;\n                    // Find the next greater layer div and insert this div before that one\n                    var insertBeforeElement = null;\n                    for (var insertBeforeLayer = layer + 1; insertBeforeLayer < this._layerWrappers.length && insertBeforeElement === null; insertBeforeLayer++) {\n                        if (this._layerWrappers[insertBeforeLayer] !== undefined) {\n                            insertBeforeElement = this._layerWrappers[insertBeforeLayer];\n                        }\n                    }\n                    this._subsWrapper.insertBefore(layerWrapper, insertBeforeElement);\n                    this._layerWrappers[layer] = layerWrapper;\n                    this._layerAlignmentWrappers[layer] = [];\n                }\n                var layerAlignmentWrapper = this._layerAlignmentWrappers[layer][alignment];\n                if (layerAlignmentWrapper === undefined) {\n                    layerAlignmentWrapper = this._layerAlignmentWrappers[layer][alignment] = document.createElement(\"div\");\n                    layerAlignmentWrapper.className = \"an an\" + alignment;\n                    // Find the next greater layer,alignment div and insert this div before that one\n                    var layerWrapper = this._layerWrappers[layer];\n                    var insertBeforeElement = null;\n                    for (var insertBeforeAlignment = alignment + 1; insertBeforeAlignment < this._layerAlignmentWrappers[layer].length && insertBeforeElement === null; insertBeforeAlignment++) {\n                        if (this._layerAlignmentWrappers[layer][insertBeforeAlignment] !== undefined) {\n                            insertBeforeElement = this._layerAlignmentWrappers[layer][insertBeforeAlignment];\n                        }\n                    }\n                    layerWrapper.insertBefore(layerAlignmentWrapper, insertBeforeElement);\n                }\n                if (alignment >= 1 && alignment <= 3) {\n                    // New subs go above existing subs\n                    layerAlignmentWrapper.insertBefore(result, layerAlignmentWrapper.firstElementChild);\n                } else {\n                    // New subs go below existing subs\n                    layerAlignmentWrapper.appendChild(result);\n                }\n                // Workaround for IE\n                var dialogueAnimationStylesElement = result.getElementsByTagName(\"style\")[0];\n                if (dialogueAnimationStylesElement !== undefined) {\n                    var sheet = dialogueAnimationStylesElement.sheet;\n                    if (sheet.cssRules.length === 0) {\n                        sheet.cssText = dialogueAnimationStylesElement.textContent;\n                    }\n                }\n                this._currentSubs.set(dialogue, result);\n            };\n            WebRenderer.prototype._onClockPlay = function () {\n                _super.prototype._onClockPlay.call(this);\n                this._removeAllSubs();\n                this._subsWrapper.style.display = \"\";\n                this._subsWrapper.classList.remove(\"paused\");\n            };\n            WebRenderer.prototype._onClockTick = function () {\n                // Remove dialogues that should be removed before adding new ones via super._onClockTick()\n                var _this = this;\n                var currentTime = this.clock.currentTime;\n                this._currentSubs.forEach(function (sub, dialogue) {\n                    if (dialogue.start > currentTime || dialogue.end < currentTime || dialogue.containsTransformTag) {\n                        _this._currentSubs.delete(dialogue);\n                        sub.parentNode.removeChild(sub);\n                    }\n                });\n                _super.prototype._onClockTick.call(this);\n            };\n            WebRenderer.prototype._onClockPause = function () {\n                _super.prototype._onClockPause.call(this);\n                this._subsWrapper.classList.add(\"paused\");\n            };\n            WebRenderer.prototype._onClockStop = function () {\n                _super.prototype._onClockStop.call(this);\n                this._subsWrapper.style.display = \"none\";\n            };\n            WebRenderer.prototype._onClockRateChange = function () {\n                _super.prototype._onClockRateChange.call(this);\n                // Any dialogues which have been pre-rendered will need to be pre-rendered again.\n                this._preRenderedSubs.clear();\n            };\n            WebRenderer.prototype._ready = function () {\n                this._dispatchEvent(\"ready\", []);\n            };\n            /**\n             * @param {string} fontFamily\n             * @param {!Promise.<*>} fontFetchPromise\n             * @return {!Promise.<[number, number]>}\n             *\n             * @private\n             */\n            WebRenderer.prototype._calculateFontMetricsAfterFetch = function (fontFamily, fontFetchPromise) {\n                var _this = this;\n                return fontFetchPromise.then(function () {\n                    var fontSizeElement = _this._fontSizeElement.cloneNode(true);\n                    _this._libjassSubsWrapper.appendChild(fontSizeElement);\n                    return promise_7.lastly(font_size_2.calculateFontMetrics(fontFamily, _this.settings.fallbackFonts, fontSizeElement), function () {\n                        _this._libjassSubsWrapper.removeChild(fontSizeElement);\n                    });\n                });\n            };\n            WebRenderer.prototype._removeAllSubs = function () {\n                this._currentSubs.forEach(function (sub) {\n                    return sub.parentNode.removeChild(sub);\n                });\n                this._currentSubs.clear();\n            };\n            WebRenderer._transformOrigins = [ [], [ 0, 100 ], [ 50, 100 ], [ 100, 100 ], [ 0, 50 ], [ 50, 50 ], [ 100, 50 ], [ 0, 0 ], [ 50, 0 ], [ 100, 0 ] ];\n            return WebRenderer;\n        }(null_1.NullRenderer);\n        exports.WebRenderer = WebRenderer;\n        mixin_3.mixin(WebRenderer, [ base_3.EventSource ]);\n    });\n    def(\"renderers/web/span-styles\", [ \"renderers/web/font-size\" ], function (font_size_1, exports) {\n        /**\n         * This class represents the style attribute of a span.\n         * As a Dialogue's div is rendered, individual parts are added to span's, and this class is used to maintain the style attribute of those.\n         *\n         * @param {!libjass.renderers.NullRenderer} renderer The renderer that this set of styles is associated with\n         * @param {!libjass.Dialogue} dialogue The Dialogue that this set of styles is associated with\n         * @param {number} scaleX The horizontal scaling of the subtitles\n         * @param {number} scaleY The vertical scaling of the subtitles\n         * @param {!libjass.renderers.RendererSettings} settings The renderer settings\n         * @param {!HTMLDivElement} fontSizeElement A <div> element to measure font sizes with\n         * @param {!SVGDefsElement} svgDefsElement An SVG <defs> element to append filter definitions to\n         * @param {!Map<string, [number, number]>} fontMetricsCache Font metrics cache\n         *\n         * @constructor\n         */\n        var SpanStyles = function () {\n            function SpanStyles(renderer, dialogue, scaleX, scaleY, settings, fontSizeElement, svgDefsElement, fontMetricsCache) {\n                this._scaleX = scaleX;\n                this._scaleY = scaleY;\n                this._settings = settings;\n                this._fontSizeElement = fontSizeElement;\n                this._svgDefsElement = svgDefsElement;\n                this._fontMetricsCache = fontMetricsCache;\n                this._nextFilterId = 0;\n                this._id = renderer.id + \"-\" + dialogue.id;\n                this._defaultStyle = dialogue.style;\n                this.reset(null);\n            }\n            /**\n             * Resets the styles to the defaults provided by the argument.\n             *\n             * @param {libjass.Style} newStyle The new defaults to reset the style to. If null, the styles are reset to the default style of the Dialogue.\n             */\n            SpanStyles.prototype.reset = function (newStyle) {\n                if (newStyle === undefined || newStyle === null) {\n                    newStyle = this._defaultStyle;\n                }\n                this.italic = newStyle.italic;\n                this.bold = newStyle.bold;\n                this.underline = newStyle.underline;\n                this.strikeThrough = newStyle.strikeThrough;\n                this.outlineWidth = newStyle.outlineThickness;\n                this.outlineHeight = newStyle.outlineThickness;\n                this.shadowDepthX = newStyle.shadowDepth;\n                this.shadowDepthY = newStyle.shadowDepth;\n                this.fontName = newStyle.fontName;\n                this.fontSize = newStyle.fontSize;\n                this.fontScaleX = newStyle.fontScaleX;\n                this.fontScaleY = newStyle.fontScaleY;\n                this.letterSpacing = newStyle.letterSpacing;\n                this.rotationX = 0;\n                this.rotationY = 0;\n                this.rotationZ = newStyle.rotationZ;\n                this.skewX = 0;\n                this.skewY = 0;\n                this.primaryColor = newStyle.primaryColor;\n                this.secondaryColor = newStyle.secondaryColor;\n                this.outlineColor = newStyle.outlineColor;\n                this.shadowColor = newStyle.shadowColor;\n                this.primaryAlpha = newStyle.primaryColor.alpha;\n                this.secondaryAlpha = newStyle.secondaryColor.alpha;\n                this.outlineAlpha = newStyle.outlineColor.alpha;\n                this.shadowAlpha = newStyle.shadowColor.alpha;\n                this.blur = null;\n                this.gaussianBlur = null;\n            };\n            /**\n             * Sets the style attribute on the given span element.\n             *\n             * @param {!HTMLSpanElement} span\n             * @param {!AnimationCollection} animationCollection\n             * @return {!HTMLSpanElement} The resulting <span> with the CSS styles applied. This may be a wrapper around the input <span> if the styles were applied using SVG filters.\n             */\n            SpanStyles.prototype.setStylesOnSpan = function (span, animationCollection) {\n                var isTextOnlySpan = span.childNodes[0] instanceof Text;\n                var fontStyleOrWeight = \"\";\n                if (this._italic) {\n                    fontStyleOrWeight += \"italic \";\n                }\n                if (this._bold === true) {\n                    fontStyleOrWeight += \"bold \";\n                } else if (this._bold !== false) {\n                    fontStyleOrWeight += this._bold.toFixed(0) + \" \";\n                }\n                var lineHeight = this._scaleY * (isTextOnlySpan ? this._fontScaleX : 1) * this._fontSize;\n                var fontSize = font_size_1.fontSizeForLineHeight(this._fontName, lineHeight, this._settings.fallbackFonts, this._fontSizeElement, this._fontMetricsCache);\n                var fonts = this._fontName;\n                // Quote the font family unless it's a generic family, as those must never be quoted\n                switch (fonts) {\n                  case \"cursive\":\n                  case \"fantasy\":\n                  case \"monospace\":\n                  case \"sans-serif\":\n                  case \"serif\":\n                    break;\n\n                  default:\n                    fonts = '\"' + fonts + '\"';\n                    break;\n                }\n                if (this._settings.fallbackFonts !== \"\") {\n                    fonts += \", \" + this._settings.fallbackFonts;\n                }\n                span.style.font = \"\" + fontStyleOrWeight + fontSize.toFixed(3) + \"px/\" + lineHeight.toFixed(3) + \"px \" + fonts;\n                var textDecoration = \"\";\n                if (this._underline) {\n                    textDecoration = \"underline\";\n                }\n                if (this._strikeThrough) {\n                    textDecoration += \" line-through\";\n                }\n                span.style.textDecoration = textDecoration.trim();\n                var transform = \"\";\n                if (isTextOnlySpan) {\n                    if (this._fontScaleY !== this._fontScaleX) {\n                        transform += \"scaleY(\" + (this._fontScaleY / this._fontScaleX).toFixed(3) + \") \";\n                    }\n                } else {\n                    if (this._fontScaleX !== 1) {\n                        transform += \"scaleX(\" + this._fontScaleX + \") \";\n                    }\n                    if (this._fontScaleY !== 1) {\n                        transform += \"scaleY(\" + this._fontScaleY + \") \";\n                    }\n                }\n                if (this._skewX !== 0 || this._skewY !== 0) {\n                    transform += \"matrix(1, \" + this._skewY + \", \" + this._skewX + \", 1, 0, 0) \";\n                }\n                if (transform !== \"\") {\n                    span.style.webkitTransform = transform;\n                    span.style.webkitTransformOrigin = \"50% 50%\";\n                    span.style.transform = transform;\n                    span.style.transformOrigin = \"50% 50%\";\n                    span.style.display = \"inline-block\";\n                }\n                span.style.letterSpacing = (this._scaleX * this._letterSpacing).toFixed(3) + \"px\";\n                var outlineWidth = this._scaleX * this._outlineWidth;\n                var outlineHeight = this._scaleY * this._outlineHeight;\n                var shadowDepthX = this._scaleX * this._shadowDepthX;\n                var shadowDepthY = this._scaleY * this._shadowDepthY;\n                var primaryColor = this._primaryColor.withAlpha(this._primaryAlpha);\n                var outlineColor = this._outlineColor.withAlpha(this._outlineAlpha);\n                var shadowColor = this._shadowColor.withAlpha(this._shadowAlpha);\n                // If we're in non-SVG mode and all colors have the same alpha, then set all colors to alpha === 1 and set the common alpha as the span's opacity property instead\n                if (!this._settings.enableSvg && (outlineWidth === 0 && outlineHeight === 0 || outlineColor.alpha === primaryColor.alpha) && (this._shadowDepthX === 0 && this._shadowDepthY === 0 || shadowColor.alpha === primaryColor.alpha)) {\n                    primaryColor = this._primaryColor.withAlpha(1);\n                    outlineColor = this._outlineColor.withAlpha(1);\n                    shadowColor = this._shadowColor.withAlpha(1);\n                    span.style.opacity = this._primaryAlpha.toFixed(3);\n                }\n                span.style.color = primaryColor.toString();\n                if (this._settings.enableSvg) {\n                    this._svg(span, outlineWidth, outlineHeight, outlineColor, shadowDepthX, shadowDepthY, shadowColor);\n                } else {\n                    this._textShadow(span, outlineWidth, outlineHeight, outlineColor, shadowDepthX, shadowDepthY, shadowColor);\n                }\n                if (this._rotationX !== 0 || this._rotationY !== 0) {\n                    // Perspective needs to be set on a \"transformable element\"\n                    span.style.display = \"inline-block\";\n                }\n                span.style.webkitAnimation = animationCollection.animationStyle;\n                span.style.animation = animationCollection.animationStyle;\n                return span;\n            };\n            /**\n             * @return {!HTMLBRElement}\n             */\n            SpanStyles.prototype.makeNewLine = function () {\n                var result = document.createElement(\"br\");\n                result.style.lineHeight = (this._scaleY * this._fontSize).toFixed(3) + \"px\";\n                return result;\n            };\n            /**\n             * @param {!HTMLSpanElement} span\n             * @param {number} outlineWidth\n             * @param {number} outlineHeight\n             * @param {!libjass.parts.Color} outlineColor\n             * @param {number} shadowDepthX\n             * @param {number} shadowDepthY\n             * @param {!libjass.parts.Color} shadowColor\n             *\n             * @private\n             */\n            SpanStyles.prototype._svg = function (span, outlineWidth, outlineHeight, outlineColor, shadowDepthX, shadowDepthY, shadowColor) {\n                var filterElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"filter\");\n                if (outlineWidth > 0 || outlineHeight > 0 || shadowDepthX > 0 || shadowDepthY > 0) {\n                    // Start with SourceAlpha. Leave the alpha as 0 if it's 0, and set it to 1 if it's greater than 0\n                    var source = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feComponentTransfer\");\n                    filterElement.appendChild(source);\n                    source.in1.baseVal = \"SourceAlpha\";\n                    source.result.baseVal = \"source\";\n                    var sourceAlphaTransferNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feFuncA\");\n                    source.appendChild(sourceAlphaTransferNode);\n                    sourceAlphaTransferNode.type.baseVal = SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR;\n                    sourceAlphaTransferNode.intercept.baseVal = 0;\n                    /* The alphas of all colored pixels of the SourceAlpha should be made as close to 1 as possible. This way the summed outlines below will be uniformly dark.\n                     * Multiply the pixels by 1 / primaryAlpha so that the primaryAlpha pixels become 1. A higher value would make the outline larger and too sharp,\n                     * leading to jagged outer edge and transparent space around the inner edge between itself and the SourceGraphic.\n                     */\n                    sourceAlphaTransferNode.slope.baseVal = this._primaryAlpha === 0 ? 1 : 1 / this._primaryAlpha;\n                    /* Construct an elliptical border by merging together many rectangles. The border is creating using dilate morphology filters, but these only support\n                     * generating rectangles.   http://lists.w3.org/Archives/Public/public-fx/2012OctDec/0003.html\n                     */\n                    // Merge the individual outlines\n                    var mergedOutlines_1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMerge\");\n                    filterElement.appendChild(mergedOutlines_1);\n                    mergedOutlines_1.result.baseVal = \"outline-alpha\";\n                    var outlineNumber_1 = 0;\n                    var increment_1 = !this._settings.preciseOutlines && this._gaussianBlur > 0 ? this._gaussianBlur : 1;\n                    (function (addOutline) {\n                        if (outlineWidth <= outlineHeight) {\n                            if (outlineWidth > 0) {\n                                var x = void 0;\n                                for (x = 0; x <= outlineWidth; x += increment_1) {\n                                    addOutline(x, outlineHeight / outlineWidth * Math.sqrt(outlineWidth * outlineWidth - x * x));\n                                }\n                                if (x !== outlineWidth + increment_1) {\n                                    addOutline(outlineWidth, 0);\n                                }\n                            } else {\n                                addOutline(0, outlineHeight);\n                            }\n                        } else {\n                            if (outlineHeight > 0) {\n                                var y = void 0;\n                                for (y = 0; y <= outlineHeight; y += increment_1) {\n                                    addOutline(outlineWidth / outlineHeight * Math.sqrt(outlineHeight * outlineHeight - y * y), y);\n                                }\n                                if (y !== outlineHeight + increment_1) {\n                                    addOutline(0, outlineHeight);\n                                }\n                            } else {\n                                addOutline(outlineWidth, 0);\n                            }\n                        }\n                    })(function (x, y) {\n                        var outlineId = \"outline\" + outlineNumber_1;\n                        var outlineFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMorphology\");\n                        filterElement.insertBefore(outlineFilter, mergedOutlines_1);\n                        outlineFilter.in1.baseVal = \"source\";\n                        outlineFilter.operator.baseVal = SVGFEMorphologyElement.SVG_MORPHOLOGY_OPERATOR_DILATE;\n                        outlineFilter.radiusX.baseVal = x;\n                        outlineFilter.radiusY.baseVal = y;\n                        outlineFilter.result.baseVal = outlineId;\n                        var outlineReferenceNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMergeNode\");\n                        mergedOutlines_1.appendChild(outlineReferenceNode);\n                        outlineReferenceNode.in1.baseVal = outlineId;\n                        outlineNumber_1++;\n                    });\n                    (function (addOutline) {\n                        if (outlineWidth % 1 > 0) {\n                            addOutline(outlineWidth, 0);\n                            addOutline(-outlineWidth, 0);\n                        }\n                        if (outlineHeight % 1 > 0) {\n                            addOutline(0, outlineHeight);\n                            addOutline(0, -outlineHeight);\n                        }\n                    })(function (x, y) {\n                        var outlineId = \"outline\" + outlineNumber_1;\n                        var outlineFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feOffset\");\n                        filterElement.insertBefore(outlineFilter, mergedOutlines_1);\n                        outlineFilter.in1.baseVal = \"source\";\n                        outlineFilter.dx.baseVal = x;\n                        outlineFilter.dy.baseVal = y;\n                        outlineFilter.result.baseVal = outlineId;\n                        var outlineReferenceNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMergeNode\");\n                        mergedOutlines_1.appendChild(outlineReferenceNode);\n                        outlineReferenceNode.in1.baseVal = outlineId;\n                        outlineNumber_1++;\n                    });\n                    // Color it with the outline color\n                    var coloredOutline = createComponentTransferFilter(outlineColor);\n                    filterElement.appendChild(coloredOutline);\n                    coloredOutline.in1.baseVal = \"outline-alpha\";\n                    // Blur the merged outline\n                    if (this._gaussianBlur > 0) {\n                        var gaussianBlurFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feGaussianBlur\");\n                        filterElement.appendChild(gaussianBlurFilter);\n                        // Don't use setStdDeviation - cloneNode() clears it in Chrome\n                        gaussianBlurFilter.stdDeviationX.baseVal = this._gaussianBlur;\n                        gaussianBlurFilter.stdDeviationY.baseVal = this._gaussianBlur;\n                    }\n                    for (var i = 0; i < this._blur; i++) {\n                        var blurFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feConvolveMatrix\");\n                        filterElement.appendChild(blurFilter);\n                        blurFilter.setAttribute(\"kernelMatrix\", \"1 2 1 2 4 2 1 2 1\");\n                        blurFilter.edgeMode.baseVal = SVGFEConvolveMatrixElement.SVG_EDGEMODE_NONE;\n                    }\n                    // Cut out the source, so only the exterior remains\n                    var cutoutNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feComposite\");\n                    filterElement.appendChild(cutoutNode);\n                    cutoutNode.in2.baseVal = \"source\";\n                    cutoutNode.operator.baseVal = SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_OUT;\n                    cutoutNode.result.baseVal = \"outline-colored\";\n                    if (shadowDepthX > 0 || shadowDepthY > 0) {\n                        var shadowFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feOffset\");\n                        filterElement.appendChild(shadowFilter);\n                        shadowFilter.in1.baseVal = \"outline-alpha\";\n                        shadowFilter.dx.baseVal = shadowDepthX;\n                        shadowFilter.dy.baseVal = shadowDepthY;\n                        // Color it with the shadow color\n                        var coloredShadow = createComponentTransferFilter(shadowColor);\n                        filterElement.appendChild(coloredShadow);\n                        var lastFilter = coloredShadow;\n                        // Blur the shadow\n                        if (this._gaussianBlur > 0) {\n                            var gaussianBlurFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feGaussianBlur\");\n                            filterElement.appendChild(gaussianBlurFilter);\n                            // Don't use setStdDeviation - cloneNode() clears it in Chrome\n                            gaussianBlurFilter.stdDeviationX.baseVal = this._gaussianBlur;\n                            gaussianBlurFilter.stdDeviationY.baseVal = this._gaussianBlur;\n                            lastFilter = gaussianBlurFilter;\n                        }\n                        for (var i = 0; i < this._blur; i++) {\n                            var blurFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feConvolveMatrix\");\n                            filterElement.appendChild(blurFilter);\n                            blurFilter.setAttribute(\"kernelMatrix\", \"1 2 1 2 4 2 1 2 1\");\n                            blurFilter.edgeMode.baseVal = SVGFEConvolveMatrixElement.SVG_EDGEMODE_NONE;\n                            lastFilter = blurFilter;\n                        }\n                        lastFilter.result.baseVal = \"shadow\";\n                    }\n                    // Merge the main text, outline and shadow\n                    var mergedResult = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMerge\");\n                    filterElement.appendChild(mergedResult);\n                    if (shadowDepthX > 0 || shadowDepthY > 0) {\n                        var shadowReferenceNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMergeNode\");\n                        mergedResult.appendChild(shadowReferenceNode);\n                        shadowReferenceNode.in1.baseVal = \"shadow\";\n                    }\n                    var outlineReferenceNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMergeNode\");\n                    mergedResult.appendChild(outlineReferenceNode);\n                    outlineReferenceNode.in1.baseVal = \"outline-colored\";\n                    var sourceGraphicReferenceNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMergeNode\");\n                    mergedResult.appendChild(sourceGraphicReferenceNode);\n                    sourceGraphicReferenceNode.in1.baseVal = \"SourceGraphic\";\n                } else {\n                    // Blur the source graphic directly\n                    if (this._gaussianBlur > 0) {\n                        var gaussianBlurFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feGaussianBlur\");\n                        filterElement.appendChild(gaussianBlurFilter);\n                        // Don't use setStdDeviation - cloneNode() clears it in Chrome\n                        gaussianBlurFilter.stdDeviationX.baseVal = this._gaussianBlur;\n                        gaussianBlurFilter.stdDeviationY.baseVal = this._gaussianBlur;\n                    }\n                    for (var i = 0; i < this._blur; i++) {\n                        var blurFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feConvolveMatrix\");\n                        filterElement.appendChild(blurFilter);\n                        blurFilter.setAttribute(\"kernelMatrix\", \"1 2 1 2 4 2 1 2 1\");\n                        blurFilter.edgeMode.baseVal = SVGFEConvolveMatrixElement.SVG_EDGEMODE_NONE;\n                    }\n                }\n                if (filterElement.childElementCount > 0) {\n                    var filterId = \"libjass-svg-filter-\" + this._id + \"-\" + this._nextFilterId++;\n                    this._svgDefsElement.appendChild(filterElement);\n                    filterElement.id = filterId;\n                    filterElement.x.baseVal.valueAsString = \"-50%\";\n                    filterElement.width.baseVal.valueAsString = \"200%\";\n                    filterElement.y.baseVal.valueAsString = \"-50%\";\n                    filterElement.height.baseVal.valueAsString = \"200%\";\n                    var filterProperty = 'url(\"#' + filterId + '\")';\n                    span.style.webkitFilter = filterProperty;\n                    span.style.filter = filterProperty;\n                }\n            };\n            /**\n             * @param {!HTMLSpanElement} span\n             * @param {number} outlineWidth\n             * @param {number} outlineHeight\n             * @param {!libjass.parts.Color} outlineColor\n             * @param {number} shadowDepthX\n             * @param {number} shadowDepthY\n             * @param {!libjass.parts.Color} shadowColor\n             *\n             * @private\n             */\n            SpanStyles.prototype._textShadow = function (span, outlineWidth, outlineHeight, outlineColor, shadowDepthX, shadowDepthY, shadowColor) {\n                var _this = this;\n                if (outlineWidth > 0 || outlineHeight > 0) {\n                    var outlineCssString_1 = \"\";\n                    var shadowCssString_1 = \"\";\n                    (function (addOutline) {\n                        for (var x = 0; x <= outlineWidth; x++) {\n                            var maxY = outlineWidth === 0 ? outlineHeight : outlineHeight * Math.sqrt(1 - x * x / (outlineWidth * outlineWidth));\n                            for (var y = 0; y <= maxY; y++) {\n                                addOutline(x, y);\n                                if (x !== 0) {\n                                    addOutline(-x, y);\n                                }\n                                if (y !== 0) {\n                                    addOutline(x, -y);\n                                }\n                                if (x !== 0 && y !== 0) {\n                                    addOutline(-x, -y);\n                                }\n                            }\n                        }\n                        if (outlineWidth % 1 > 0) {\n                            addOutline(outlineWidth, 0);\n                            addOutline(-outlineWidth, 0);\n                        }\n                        if (outlineHeight % 1 > 0) {\n                            addOutline(0, outlineHeight);\n                            addOutline(0, -outlineHeight);\n                        }\n                    })(function (x, y) {\n                        outlineCssString_1 += \", \" + outlineColor.toString() + \" \" + x.toFixed(3) + \"px \" + y.toFixed(3) + \"px \" + _this._gaussianBlur.toFixed(3) + \"px\";\n                        if (_this._shadowDepthX !== 0 || _this._shadowDepthY !== 0) {\n                            shadowCssString_1 += \", \" + shadowColor.toString() + \" \" + (x + shadowDepthX).toFixed(3) + \"px \" + (y + shadowDepthY).toFixed(3) + \"px \" + _this._gaussianBlur.toFixed(3) + \"px\";\n                        }\n                    });\n                    span.style.textShadow = (outlineCssString_1 + shadowCssString_1).substr(\", \".length);\n                } else if (this._shadowDepthX !== 0 || this._shadowDepthY !== 0) {\n                    var shadowCssString = shadowColor.toString() + \" \" + shadowDepthX.toFixed(3) + \"px \" + shadowDepthY.toFixed(3) + \"px 0px\";\n                    if (span.style.textShadow === \"\") {\n                        span.style.textShadow = shadowCssString;\n                    } else {\n                        span.style.textShadow += \", \" + shadowCssString;\n                    }\n                }\n            };\n            Object.defineProperty(SpanStyles.prototype, \"italic\", {\n                /**\n                 * Sets the italic property. null defaults it to the default style's value.\n                 *\n                 * @type {?boolean}\n                 */\n                set: function (value) {\n                    this._italic = valueOrDefault(value, this._defaultStyle.italic);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"bold\", {\n                /**\n                 * Sets the bold property. null defaults it to the default style's value.\n                 *\n                 * @type {(?boolean|?number)}\n                 */\n                set: function (value) {\n                    this._bold = valueOrDefault(value, this._defaultStyle.bold);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"underline\", {\n                /**\n                 * Sets the underline property. null defaults it to the default style's value.\n                 *\n                 * @type {?boolean}\n                 */\n                set: function (value) {\n                    this._underline = valueOrDefault(value, this._defaultStyle.underline);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"strikeThrough\", {\n                /**\n                 * Sets the strike-through property. null defaults it to the default style's value.\n                 *\n                 * @type {?boolean}\n                 */\n                set: function (value) {\n                    this._strikeThrough = valueOrDefault(value, this._defaultStyle.strikeThrough);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"outlineWidth\", {\n                /**\n                 * Gets the outline width property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._outlineWidth;\n                },\n                /**\n                 * Sets the outline width property. null defaults it to the style's original outline width value.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._outlineWidth = valueOrDefault(value, this._defaultStyle.outlineThickness);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"outlineHeight\", {\n                /**\n                 * Gets the outline height property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._outlineHeight;\n                },\n                /**\n                 * Sets the outline height property. null defaults it to the style's original outline height value.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._outlineHeight = valueOrDefault(value, this._defaultStyle.outlineThickness);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"shadowDepthX\", {\n                /**\n                 * Gets the shadow width property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._shadowDepthX;\n                },\n                /**\n                 * Sets the shadow width property. null defaults it to the style's original shadow depth value.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._shadowDepthX = valueOrDefault(value, this._defaultStyle.shadowDepth);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"shadowDepthY\", {\n                /**\n                 * Gets the shadow height property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._shadowDepthY;\n                },\n                /**\n                 * Sets the shadow height property. null defaults it to the style's original shadow depth value.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._shadowDepthY = valueOrDefault(value, this._defaultStyle.shadowDepth);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"blur\", {\n                /**\n                 * Gets the blur property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._blur;\n                },\n                /**\n                 * Sets the blur property. null defaults it to 0.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._blur = valueOrDefault(value, 0);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"gaussianBlur\", {\n                /**\n                 * Gets the Gaussian blur property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._gaussianBlur;\n                },\n                /**\n                 * Sets the Gaussian blur property. null defaults it to 0.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._gaussianBlur = valueOrDefault(value, 0);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"fontName\", {\n                /**\n                 * Sets the font name property. null defaults it to the default style's value.\n                 *\n                 * @type {?string}\n                 */\n                set: function (value) {\n                    this._fontName = valueOrDefault(value, this._defaultStyle.fontName);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"fontSize\", {\n                /**\n                 * Gets the font size property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._fontSize;\n                },\n                /**\n                 * Sets the font size property. null defaults it to the default style's value.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._fontSize = valueOrDefault(value, this._defaultStyle.fontSize);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"fontScaleX\", {\n                /**\n                 * Gets the horizontal font scaling property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._fontScaleX;\n                },\n                /**\n                 * Sets the horizontal font scaling property. null defaults it to the default style's value.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._fontScaleX = valueOrDefault(value, this._defaultStyle.fontScaleX);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"fontScaleY\", {\n                /**\n                 * Gets the vertical font scaling property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._fontScaleY;\n                },\n                /**\n                 * Sets the vertical font scaling property. null defaults it to the default style's value.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._fontScaleY = valueOrDefault(value, this._defaultStyle.fontScaleY);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"letterSpacing\", {\n                /**\n                 * Gets the letter spacing property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._letterSpacing;\n                },\n                /**\n                 * Sets the letter spacing property. null defaults it to the default style's value.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._letterSpacing = valueOrDefault(value, this._defaultStyle.letterSpacing);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"rotationX\", {\n                /**\n                 * Gets the X-axis rotation property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._rotationX;\n                },\n                /**\n                 * Sets the X-axis rotation property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._rotationX = valueOrDefault(value, 0);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"rotationY\", {\n                /**\n                 * Gets the Y-axis rotation property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._rotationY;\n                },\n                /**\n                 * Sets the Y-axis rotation property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._rotationY = valueOrDefault(value, 0);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"rotationZ\", {\n                /**\n                 * Gets the Z-axis rotation property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._rotationZ;\n                },\n                /**\n                 * Sets the Z-axis rotation property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._rotationZ = valueOrDefault(value, this._defaultStyle.rotationZ);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"skewX\", {\n                /**\n                 * Gets the X-axis skew property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._skewX;\n                },\n                /**\n                 * Sets the X-axis skew property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._skewX = valueOrDefault(value, 0);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"skewY\", {\n                /**\n                 * Gets the Y-axis skew property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._skewY;\n                },\n                /**\n                 * Sets the Y-axis skew property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._skewY = valueOrDefault(value, 0);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"primaryColor\", {\n                /**\n                 * Gets the primary color property.\n                 *\n                 * @type {!libjass.Color}\n                 */\n                get: function () {\n                    return this._primaryColor;\n                },\n                /**\n                 * Sets the primary color property. null defaults it to the default style's value.\n                 *\n                 * @type {libjass.Color}\n                 */\n                set: function (value) {\n                    this._primaryColor = valueOrDefault(value, this._defaultStyle.primaryColor);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"secondaryColor\", {\n                /**\n                 * Gets the secondary color property.\n                 *\n                 * @type {!libjass.Color}\n                 */\n                get: function () {\n                    return this._secondaryColor;\n                },\n                /**\n                 * Sets the secondary color property. null defaults it to the default style's value.\n                 *\n                 * @type {libjass.Color}\n                 */\n                set: function (value) {\n                    this._secondaryColor = valueOrDefault(value, this._defaultStyle.secondaryColor);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"outlineColor\", {\n                /**\n                 * Gets the outline color property.\n                 *\n                 * @type {!libjass.Color}\n                 */\n                get: function () {\n                    return this._outlineColor;\n                },\n                /**\n                 * Sets the outline color property. null defaults it to the default style's value.\n                 *\n                 * @type {libjass.Color}\n                 */\n                set: function (value) {\n                    this._outlineColor = valueOrDefault(value, this._defaultStyle.outlineColor);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"shadowColor\", {\n                /**\n                 * Gets the shadow color property.\n                 *\n                 * @type {!libjass.Color}\n                 */\n                get: function () {\n                    return this._shadowColor;\n                },\n                /**\n                 * Sets the shadow color property. null defaults it to the default style's value.\n                 *\n                 * @type {libjass.Color}\n                 */\n                set: function (value) {\n                    this._shadowColor = valueOrDefault(value, this._defaultStyle.shadowColor);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"primaryAlpha\", {\n                /**\n                 * Gets the primary alpha property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._primaryAlpha;\n                },\n                /**\n                 * Sets the primary alpha property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._primaryAlpha = valueOrDefault(value, this._defaultStyle.primaryColor.alpha);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"secondaryAlpha\", {\n                /**\n                 * Gets the secondary alpha property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._secondaryAlpha;\n                },\n                /**\n                 * Sets the secondary alpha property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._secondaryAlpha = valueOrDefault(value, this._defaultStyle.secondaryColor.alpha);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"outlineAlpha\", {\n                /**\n                 * Gets the outline alpha property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._outlineAlpha;\n                },\n                /**\n                 * Sets the outline alpha property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._outlineAlpha = valueOrDefault(value, this._defaultStyle.outlineColor.alpha);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(SpanStyles.prototype, \"shadowAlpha\", {\n                /**\n                 * Gets the shadow alpha property.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._shadowAlpha;\n                },\n                /**\n                 * Sets the shadow alpha property.\n                 *\n                 * @type {?number}\n                 */\n                set: function (value) {\n                    this._shadowAlpha = valueOrDefault(value, this._defaultStyle.shadowColor.alpha);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return SpanStyles;\n        }();\n        exports.SpanStyles = SpanStyles;\n        /**\n         * @param {!libjass.parts.Color} color\n         * @return {!SVGFEComponentTransferElement}\n         *\n         * @private\n         */\n        function createComponentTransferFilter(color) {\n            var result = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feComponentTransfer\");\n            var redTransferNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feFuncR\");\n            result.appendChild(redTransferNode);\n            redTransferNode.type.baseVal = SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR;\n            redTransferNode.slope.baseVal = 0;\n            redTransferNode.intercept.baseVal = color.red / 255;\n            var greenTransferNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feFuncG\");\n            result.appendChild(greenTransferNode);\n            greenTransferNode.type.baseVal = SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR;\n            greenTransferNode.slope.baseVal = 0;\n            greenTransferNode.intercept.baseVal = color.green / 255;\n            var blueTransferNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feFuncB\");\n            result.appendChild(blueTransferNode);\n            blueTransferNode.type.baseVal = SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR;\n            blueTransferNode.slope.baseVal = 0;\n            blueTransferNode.intercept.baseVal = color.blue / 255;\n            var alphaTransferNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feFuncA\");\n            result.appendChild(alphaTransferNode);\n            alphaTransferNode.type.baseVal = SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR;\n            alphaTransferNode.slope.baseVal = color.alpha;\n            alphaTransferNode.intercept.baseVal = 0;\n            return result;\n        }\n        /**\n         * @param {?T} newValue\n         * @param {!T} defaultValue\n         * @return {!T}\n         *\n         * @template T\n         * @private\n         */\n        function valueOrDefault(newValue, defaultValue) {\n            return newValue !== null ? newValue : defaultValue;\n        }\n    });\n    def(\"renderers/web/font-size\", [ \"utility/promise\" ], function (promise_6, exports) {\n        /**\n         * @param {string} fontFamily\n         * @param {number} fontSize\n         * @param {string} fallbackFonts\n         * @param {!HTMLDivElement} fontSizeElement\n         *\n         * @private\n         */\n        function prepareFontSizeElement(fontFamily, fontSize, fallbackFonts, fontSizeElement) {\n            var fonts = '\"' + fontFamily + '\"';\n            if (fallbackFonts !== \"\") {\n                fonts += \", \" + fallbackFonts;\n            }\n            fontSizeElement.style.fontFamily = fonts;\n            fontSizeElement.style.fontSize = fontSize + \"px\";\n        }\n        /**\n         * @param {string} fontFamily\n         * @param {number} fontSize\n         * @param {string} fallbackFonts\n         * @param {!HTMLDivElement} fontSizeElement\n         * @return {!Promise.<number>}\n         *\n         * @private\n         */\n        function lineHeightForFontSize(fontFamily, fontSize, fallbackFonts, fontSizeElement) {\n            prepareFontSizeElement(fontFamily, fontSize, fallbackFonts, fontSizeElement);\n            return new promise_6.Promise(function (resolve) {\n                return setTimeout(function () {\n                    return resolve(fontSizeElement.offsetHeight);\n                }, 1e3);\n            });\n        }\n        /**\n         * @param {string} fontFamily\n         * @param {number} fontSize\n         * @param {string} fallbackFonts\n         * @param {!HTMLDivElement} fontSizeElement\n         * @return {number}\n         *\n         * @private\n         */\n        function lineHeightForFontSizeSync(fontFamily, fontSize, fallbackFonts, fontSizeElement) {\n            prepareFontSizeElement(fontFamily, fontSize, fallbackFonts, fontSizeElement);\n            return fontSizeElement.offsetHeight;\n        }\n        /**\n         * @param {number} lowerLineHeight\n         * @param {number} upperLineHeight\n         * @return {[number, number]}\n         *\n         * @private\n         */\n        function fontMetricsFromLineHeights(lowerLineHeight, upperLineHeight) {\n            return [ lowerLineHeight, (360 - 180) / (upperLineHeight - lowerLineHeight) ];\n        }\n        /**\n         * Calculates font metrics for the given font family.\n         *\n         * @param {string} fontFamily\n         * @param {string} fallbackFonts\n         * @param {!HTMLDivElement} fontSizeElement\n         * @return {!Promise.<[number, number]>}\n         */\n        function calculateFontMetrics(fontFamily, fallbackFonts, fontSizeElement) {\n            return lineHeightForFontSize(fontFamily, 180, fallbackFonts, fontSizeElement).then(function (lowerLineHeight) {\n                return lineHeightForFontSize(fontFamily, 360, fallbackFonts, fontSizeElement).then(function (upperLineHeight) {\n                    return fontMetricsFromLineHeights(lowerLineHeight, upperLineHeight);\n                });\n            });\n        }\n        exports.calculateFontMetrics = calculateFontMetrics;\n        /**\n         * @param {number} lineHeight\n         * @param {number} lowerLineHeight\n         * @param {number} factor\n         * @return {number}\n         *\n         * @private\n         */\n        function fontSizeFromMetrics(lineHeight, lowerLineHeight, factor) {\n            return 180 + (lineHeight - lowerLineHeight) * factor;\n        }\n        /**\n         * Uses linear interpolation to calculate the CSS font size that would give the specified line height for the specified font family.\n         *\n         * WARNING: If fontMetricsCache doesn't already contain a cached value for this font family, and it is not a font already installed on the user's device, then this function\n         * may return wrong values. To avoid this, make sure to preload the font using the {@link libjass.renderers.RendererSettings.fontMap} property when constructing the renderer.\n         *\n         * @param {string} fontFamily\n         * @param {number} lineHeight\n         * @param {string} fallbackFonts\n         * @param {!HTMLDivElement} fontSizeElement\n         * @param {!Map.<string, [number, number]>} fontMetricsCache\n         * @return {number}\n         */\n        function fontSizeForLineHeight(fontFamily, lineHeight, fallbackFonts, fontSizeElement, fontMetricsCache) {\n            var existingMetrics = fontMetricsCache.get(fontFamily);\n            if (existingMetrics === undefined) {\n                var lowerLineHeight_1 = lineHeightForFontSizeSync(fontFamily, 180, fallbackFonts, fontSizeElement);\n                var upperLineHeight = lineHeightForFontSizeSync(fontFamily, 360, fallbackFonts, fontSizeElement);\n                fontMetricsCache.set(fontFamily, existingMetrics = fontMetricsFromLineHeights(lowerLineHeight_1, upperLineHeight));\n            }\n            var lowerLineHeight = existingMetrics[0];\n            var factor = existingMetrics[1];\n            return fontSizeFromMetrics(lineHeight, lowerLineHeight, factor);\n        }\n        exports.fontSizeForLineHeight = fontSizeForLineHeight;\n    });\n    def(\"renderers/web/drawing-styles\", [ \"parts/index\" ], function (parts, exports) {\n        /**\n         * This class represents an ASS drawing - a set of drawing instructions between {\\p} tags.\n         *\n         * @param {number} outputScaleX\n         * @param {number} outputScaleY\n         *\n         * @constructor\n         */\n        var DrawingStyles = function () {\n            function DrawingStyles(outputScaleX, outputScaleY) {\n                this._outputScaleX = outputScaleX;\n                this._outputScaleY = outputScaleY;\n                this._scale = 1;\n                this._baselineOffset = 0;\n            }\n            Object.defineProperty(DrawingStyles.prototype, \"scale\", {\n                /**\n                 * @type {number}\n                 */\n                set: function (value) {\n                    this._scale = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(DrawingStyles.prototype, \"baselineOffset\", {\n                /**\n                 * @type {number}\n                 */\n                set: function (value) {\n                    this._baselineOffset = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Converts this drawing to an <svg> element.\n             *\n             * @param {!libjass.parts.DrawingInstructions} drawingInstructions\n             * @param {!libjass.parts.Color} fillColor\n             * @return {!SVGSVGElement}\n             */\n            DrawingStyles.prototype.toSVG = function (drawingInstructions, fillColor) {\n                var svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n                svg.setAttribute(\"version\", \"1.1\");\n                if (drawingInstructions.instructions.length === 0) {\n                    return svg;\n                }\n                var scaleFactor = Math.pow(2, this._scale - 1);\n                var scaleX = this._outputScaleX / scaleFactor;\n                var scaleY = this._outputScaleY / scaleFactor;\n                var path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n                var pathString = \"\";\n                var bboxMinX = Infinity;\n                var bboxMaxX = -Infinity;\n                var bboxMinY = Infinity;\n                var bboxMaxY = -Infinity;\n                for (var _i = 0, _a = drawingInstructions.instructions; _i < _a.length; _i++) {\n                    var instruction = _a[_i];\n                    if (instruction instanceof parts.drawing.MoveInstruction) {\n                        pathString += \" M \" + instruction.x.toFixed(3) + \" \" + (instruction.y + this._baselineOffset).toFixed(3);\n                        bboxMinX = Math.min(bboxMinX, instruction.x);\n                        bboxMaxX = Math.max(bboxMaxX, instruction.x);\n                        bboxMinY = Math.min(bboxMinY, instruction.y + this._baselineOffset);\n                        bboxMaxY = Math.max(bboxMaxY, instruction.y + this._baselineOffset);\n                    } else if (instruction instanceof parts.drawing.LineInstruction) {\n                        pathString += \" L \" + instruction.x.toFixed(3) + \" \" + (instruction.y + this._baselineOffset).toFixed(3);\n                        bboxMinX = Math.min(bboxMinX, instruction.x);\n                        bboxMaxX = Math.max(bboxMaxX, instruction.x);\n                        bboxMinY = Math.min(bboxMinY, instruction.y + this._baselineOffset);\n                        bboxMaxY = Math.max(bboxMaxY, instruction.y + this._baselineOffset);\n                    } else if (instruction instanceof parts.drawing.CubicBezierCurveInstruction) {\n                        pathString += \" C \" + instruction.x1.toFixed(3) + \" \" + (instruction.y1 + this._baselineOffset).toFixed(3) + \" \" + instruction.x2.toFixed(3) + \" \" + (instruction.y2 + this._baselineOffset).toFixed(3) + \" \" + instruction.x3.toFixed(3) + \" \" + (instruction.y3 + this._baselineOffset).toFixed(3);\n                        bboxMinX = Math.min(bboxMinX, instruction.x1, instruction.x2, instruction.x3);\n                        bboxMaxX = Math.max(bboxMaxX, instruction.x1, instruction.x2, instruction.x3);\n                        bboxMinY = Math.min(bboxMinY, instruction.y1 + this._baselineOffset, instruction.y2 + this._baselineOffset, instruction.y3 + this._baselineOffset);\n                        bboxMaxY = Math.max(bboxMaxY, instruction.y1 + this._baselineOffset, instruction.y2 + this._baselineOffset, instruction.y3 + this._baselineOffset);\n                    }\n                }\n                bboxMinX *= scaleX;\n                bboxMaxX *= scaleX;\n                bboxMinY *= scaleY;\n                bboxMaxY *= scaleY;\n                var bboxWidth = bboxMaxX - bboxMinX;\n                var bboxHeight = bboxMaxY - bboxMinY;\n                svg.width.baseVal.valueAsString = bboxWidth.toFixed(3) + \"px\";\n                svg.height.baseVal.valueAsString = bboxHeight.toFixed(3) + \"px\";\n                // svg.viewBox.baseVal is null in atleast FF. See https://bugzilla.mozilla.org/show_bug.cgi?id=888307 which justifies it with SVG 1.2 spec.\n                svg.setAttribute(\"viewBox\", bboxMinX + \" \" + bboxMinY + \" \" + bboxWidth + \" \" + bboxHeight);\n                svg.style.position = \"relative\";\n                svg.style.left = bboxMinX.toFixed(3) + \"px\";\n                svg.style.top = bboxMinY.toFixed(3) + \"px\";\n                var g = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n                svg.appendChild(g);\n                g.setAttribute(\"transform\", \"scale(\" + scaleX.toFixed(3) + \" \" + scaleY.toFixed(3) + \")\");\n                g.appendChild(path);\n                path.setAttribute(\"d\", pathString);\n                path.setAttribute(\"fill\", fillColor.toString());\n                return svg;\n            };\n            return DrawingStyles;\n        }();\n        exports.DrawingStyles = DrawingStyles;\n    });\n    def(\"renderers/web/animation-collection\", [ \"utility/map\" ], function (map_13, exports) {\n        /**\n         * This class represents a collection of animations. Each animation contains one or more keyframes.\n         * The collection can then be converted to a CSS3 representation.\n         *\n         * @param {!libjass.renderers.NullRenderer} renderer The renderer that this collection is associated with\n         * @param {!HTMLStyleElement} style A <style> element to insert the animation rules into\n         *\n         * @constructor\n         */\n        var AnimationCollection = function () {\n            function AnimationCollection(renderer, style) {\n                this._style = style;\n                this._animationStyle = \"\";\n                this._animationDelays = new map_13.Map();\n                this._numAnimations = 0;\n                this._id = renderer.id + \"-\" + AnimationCollection._nextId++;\n                this._rate = renderer.clock.rate;\n            }\n            Object.defineProperty(AnimationCollection.prototype, \"animationStyle\", {\n                /**\n                 * This string should be set as the \"animation\" CSS property of the target element.\n                 *\n                 * @type {string}\n                 */\n                get: function () {\n                    return this._animationStyle;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(AnimationCollection.prototype, \"animationDelays\", {\n                /**\n                 * This array should be used to set the \"animation-delay\" CSS property of the target element.\n                 *\n                 * @type {!Array.<number>}\n                 */\n                get: function () {\n                    return this._animationDelays;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Add an animation to this collection. The given keyframes together make one animation.\n             *\n             * @param {string} timingFunction One of the acceptable values for the \"animation-timing-function\" CSS property\n             * @param {!Array.<!libjass.renderers.Keyframe>} keyframes\n             */\n            AnimationCollection.prototype.add = function (timingFunction, keyframes) {\n                var start = null;\n                var end = null;\n                for (var _i = 0, keyframes_1 = keyframes; _i < keyframes_1.length; _i++) {\n                    var keyframe = keyframes_1[_i];\n                    if (start === null) {\n                        start = keyframe.time;\n                    }\n                    end = keyframe.time;\n                }\n                if (start === null || end === null) {\n                    throw new Error(\"Atleast one keyframe must be provided.\");\n                }\n                var ruleCssText = \"\";\n                for (var _a = 0, keyframes_2 = keyframes; _a < keyframes_2.length; _a++) {\n                    var keyframe = keyframes_2[_a];\n                    ruleCssText += \"\\t\" + (100 * (end - start === 0 ? 1 : (keyframe.time - start) / (end - start))).toFixed(3) + \"% {\\n\";\n                    keyframe.properties.forEach(function (value, name) {\n                        ruleCssText += \"\\t\\t\" + name + \": \" + value + \";\\n\";\n                    });\n                    ruleCssText += \"\\t}\\n\";\n                }\n                var animationName = \"animation-\" + this._id + \"-\" + this._numAnimations++;\n                this._style.appendChild(document.createTextNode(\"@-webkit-keyframes \" + animationName + \" {\\n\" + ruleCssText + \"\\n}\"));\n                this._style.appendChild(document.createTextNode(\"@keyframes \" + animationName + \" {\\n\" + ruleCssText + \"\\n}\"));\n                if (this._animationStyle !== \"\") {\n                    this._animationStyle += \",\";\n                }\n                this._animationStyle += animationName + \" \" + ((end - start) / this._rate).toFixed(3) + \"s \" + timingFunction;\n                this._animationDelays.set(animationName, start);\n            };\n            AnimationCollection._nextId = 0;\n            return AnimationCollection;\n        }();\n        exports.AnimationCollection = AnimationCollection;\n    });\n    def(\"renderers/web/keyframe\", [], function (exports) {\n        /**\n         * This class represents a single keyframe. It has a list of CSS properties (names and values) associated with a point in time. Multiple keyframes make up an animation.\n         *\n         * @param {number} time\n         * @param {!Map.<string, string>} properties\n         */\n        var Keyframe = function () {\n            function Keyframe(time, properties) {\n                this._time = time;\n                this._properties = properties;\n            }\n            Object.defineProperty(Keyframe.prototype, \"time\", {\n                /**\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._time;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Keyframe.prototype, \"properties\", {\n                /**\n                 * @type {!Map.<string, string>}\n                 */\n                get: function () {\n                    return this._properties;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Keyframe;\n        }();\n        exports.Keyframe = Keyframe;\n    });\n    def(\"renderers/null\", [ \"settings\", \"renderers/clocks/base\", \"renderers/settings\" ], function (settings_7, base_2, settings_8, exports) {\n        /**\n         * A renderer implementation that doesn't output anything.\n         *\n         * @param {!libjass.ASS} ass\n         * @param {!libjass.renderers.Clock} clock\n         * @param {libjass.renderers.RendererSettings} settings\n         *\n         * @constructor\n         * @memberOf libjass.renderers\n         */\n        var NullRenderer = function () {\n            function NullRenderer(ass, clock, settings) {\n                var _this = this;\n                this._ass = ass;\n                this._clock = clock;\n                this._id = ++NullRenderer._lastRendererId;\n                this._settings = settings_8.RendererSettings.from(settings);\n                this._clock.addEventListener(base_2.ClockEvent.Play, function () {\n                    return _this._onClockPlay();\n                });\n                this._clock.addEventListener(base_2.ClockEvent.Tick, function () {\n                    return _this._onClockTick();\n                });\n                this._clock.addEventListener(base_2.ClockEvent.Pause, function () {\n                    return _this._onClockPause();\n                });\n                this._clock.addEventListener(base_2.ClockEvent.Stop, function () {\n                    return _this._onClockStop();\n                });\n                this._clock.addEventListener(base_2.ClockEvent.RateChange, function () {\n                    return _this._onClockRateChange();\n                });\n            }\n            Object.defineProperty(NullRenderer.prototype, \"id\", {\n                /**\n                 * The unique ID of this renderer. Auto-generated.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._id;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(NullRenderer.prototype, \"ass\", {\n                /**\n                 * @type {!libjass.ASS}\n                 */\n                get: function () {\n                    return this._ass;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(NullRenderer.prototype, \"clock\", {\n                /**\n                 * @type {!libjass.renderers.Clock}\n                 */\n                get: function () {\n                    return this._clock;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(NullRenderer.prototype, \"settings\", {\n                /**\n                 * @type {!libjass.renderers.RendererSettings}\n                 */\n                get: function () {\n                    return this._settings;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Pre-render a dialogue. This is a no-op for this type.\n             *\n             * @param {!libjass.Dialogue} dialogue\n             */\n            NullRenderer.prototype.preRender = function () {};\n            /**\n             * Draw a dialogue. This is a no-op for this type.\n             *\n             * @param {!libjass.Dialogue} dialogue\n             */\n            NullRenderer.prototype.draw = function () {};\n            /**\n             * Enable the renderer.\n             *\n             * @return {boolean} True if the renderer is now enabled, false if it was already enabled.\n             */\n            NullRenderer.prototype.enable = function () {\n                return this._clock.enable();\n            };\n            /**\n             * Disable the renderer.\n             *\n             * @return {boolean} True if the renderer is now disabled, false if it was already disabled.\n             */\n            NullRenderer.prototype.disable = function () {\n                return this._clock.disable();\n            };\n            /**\n             * Toggle the renderer.\n             */\n            NullRenderer.prototype.toggle = function () {\n                this._clock.toggle();\n            };\n            /**\n             * Enable or disable the renderer.\n             *\n             * @param {boolean} enabled If true, the renderer is enabled, otherwise it's disabled.\n             * @return {boolean} True if the renderer is now in the given state, false if it was already in that state.\n             */\n            NullRenderer.prototype.setEnabled = function (enabled) {\n                return this._clock.setEnabled(enabled);\n            };\n            Object.defineProperty(NullRenderer.prototype, \"enabled\", {\n                /**\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._clock.enabled;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Runs when the clock is enabled, or starts playing, or is resumed from pause.\n             *\n             * @protected\n             */\n            NullRenderer.prototype._onClockPlay = function () {\n                if (settings_7.verboseMode) {\n                    console.log(\"NullRenderer._onClockPlay\");\n                }\n            };\n            /**\n             * Runs when the clock's current time changed. This might be a result of either regular playback or seeking.\n             *\n             * @protected\n             */\n            NullRenderer.prototype._onClockTick = function () {\n                var currentTime = this._clock.currentTime;\n                if (settings_7.verboseMode) {\n                    console.log(\"NullRenderer._onClockTick: currentTime = \" + currentTime);\n                }\n                for (var _i = 0, _a = this._ass.dialogues; _i < _a.length; _i++) {\n                    var dialogue = _a[_i];\n                    try {\n                        if (dialogue.end > currentTime) {\n                            if (dialogue.start <= currentTime) {\n                                // This dialogue is visible right now. Draw it.\n                                this.draw(dialogue);\n                            } else if (dialogue.start <= currentTime + this._settings.preRenderTime) {\n                                // This dialogue will be visible soon. Pre-render it.\n                                this.preRender(dialogue);\n                            }\n                        }\n                    } catch (ex) {\n                        if (settings_7.debugMode) {\n                            console.error(\"Rendering dialogue \" + dialogue.id + \" failed.\", ex);\n                        }\n                    }\n                }\n            };\n            /**\n             * Runs when the clock is paused.\n             *\n             * @protected\n             */\n            NullRenderer.prototype._onClockPause = function () {\n                if (settings_7.verboseMode) {\n                    console.log(\"NullRenderer._onClockPause\");\n                }\n            };\n            /**\n             * Runs when the clock is disabled.\n             *\n             * @protected\n             */\n            NullRenderer.prototype._onClockStop = function () {\n                if (settings_7.verboseMode) {\n                    console.log(\"NullRenderer._onClockStop\");\n                }\n            };\n            /**\n             * Runs when the clock changes its rate.\n             *\n             * @protected\n             */\n            NullRenderer.prototype._onClockRateChange = function () {\n                if (settings_7.verboseMode) {\n                    console.log(\"NullRenderer._onClockRateChange\");\n                }\n            };\n            NullRenderer._lastRendererId = -1;\n            return NullRenderer;\n        }();\n        exports.NullRenderer = NullRenderer;\n    });\n    def(\"parser/ttf\", [ \"utility/map\", \"utility/set\" ], function (map_12, set_1, exports) {\n        var DataType;\n        (function (DataType) {\n            DataType[DataType[\"Char\"] = 0] = \"Char\";\n            DataType[DataType[\"Uint16\"] = 1] = \"Uint16\";\n            DataType[DataType[\"Uint32\"] = 2] = \"Uint32\";\n        })(DataType || (DataType = {}));\n        var fieldDecorators = new map_12.Map();\n        var OffsetTable = function () {\n            function OffsetTable() {}\n            __decorate([ field(DataType.Uint16) ], OffsetTable.prototype, \"majorVersion\", void 0);\n            __decorate([ field(DataType.Uint16) ], OffsetTable.prototype, \"minorVersion\", void 0);\n            __decorate([ field(DataType.Uint16) ], OffsetTable.prototype, \"numTables\", void 0);\n            __decorate([ field(DataType.Uint16) ], OffsetTable.prototype, \"searchRange\", void 0);\n            __decorate([ field(DataType.Uint16) ], OffsetTable.prototype, \"entrySelector\", void 0);\n            __decorate([ field(DataType.Uint16) ], OffsetTable.prototype, \"rangeShift\", void 0);\n            OffsetTable = __decorate([ struct ], OffsetTable);\n            return OffsetTable;\n        }();\n        var TableRecord = function () {\n            function TableRecord() {}\n            __decorate([ field(DataType.Char) ], TableRecord.prototype, \"c1\", void 0);\n            __decorate([ field(DataType.Char) ], TableRecord.prototype, \"c2\", void 0);\n            __decorate([ field(DataType.Char) ], TableRecord.prototype, \"c3\", void 0);\n            __decorate([ field(DataType.Char) ], TableRecord.prototype, \"c4\", void 0);\n            __decorate([ field(DataType.Uint32) ], TableRecord.prototype, \"checksum\", void 0);\n            __decorate([ field(DataType.Uint32) ], TableRecord.prototype, \"offset\", void 0);\n            __decorate([ field(DataType.Uint32) ], TableRecord.prototype, \"length\", void 0);\n            TableRecord = __decorate([ struct ], TableRecord);\n            return TableRecord;\n        }();\n        var NameTableHeader = function () {\n            function NameTableHeader() {}\n            __decorate([ field(DataType.Uint16) ], NameTableHeader.prototype, \"formatSelector\", void 0);\n            __decorate([ field(DataType.Uint16) ], NameTableHeader.prototype, \"count\", void 0);\n            __decorate([ field(DataType.Uint16) ], NameTableHeader.prototype, \"stringOffset\", void 0);\n            NameTableHeader = __decorate([ struct ], NameTableHeader);\n            return NameTableHeader;\n        }();\n        var NameRecord = function () {\n            function NameRecord() {}\n            __decorate([ field(DataType.Uint16) ], NameRecord.prototype, \"platformId\", void 0);\n            __decorate([ field(DataType.Uint16) ], NameRecord.prototype, \"encodingId\", void 0);\n            __decorate([ field(DataType.Uint16) ], NameRecord.prototype, \"languageId\", void 0);\n            __decorate([ field(DataType.Uint16) ], NameRecord.prototype, \"nameId\", void 0);\n            __decorate([ field(DataType.Uint16) ], NameRecord.prototype, \"length\", void 0);\n            __decorate([ field(DataType.Uint16) ], NameRecord.prototype, \"offset\", void 0);\n            NameRecord = __decorate([ struct ], NameRecord);\n            return NameRecord;\n        }();\n        /**\n         * Gets all the font names from the given font attachment.\n         *\n         * @param {!libjass.Attachment} attachment\n         * @return {!libjass.Set.<string>}\n         */\n        function getTtfNames(attachment) {\n            var decoded = atob(attachment.contents);\n            var bytes = new Uint8Array(new ArrayBuffer(decoded.length));\n            for (var i = 0; i < decoded.length; i++) {\n                bytes[i] = decoded.charCodeAt(i);\n            }\n            var reader = {\n                dataView: new DataView(bytes.buffer),\n                position: 0\n            };\n            var offsetTable = OffsetTable.read(reader);\n            var nameTableRecord = null;\n            for (var i = 0; i < offsetTable.numTables; i++) {\n                var tableRecord = TableRecord.read(reader);\n                if (tableRecord.c1 + tableRecord.c2 + tableRecord.c3 + tableRecord.c4 === \"name\") {\n                    nameTableRecord = tableRecord;\n                    break;\n                }\n            }\n            if (nameTableRecord === null) {\n                throw new Error('Could not find \"name\" table record.');\n            }\n            reader.position = nameTableRecord.offset;\n            var nameTableHeader = NameTableHeader.read(reader);\n            var result = new set_1.Set();\n            for (var i = 0; i < nameTableHeader.count; i++) {\n                var nameRecord = NameRecord.read(reader);\n                switch (nameRecord.nameId) {\n                  case 1:\n                  case 4:\n                  case 6:\n                    var recordOffset = nameTableRecord.offset + nameTableHeader.stringOffset + nameRecord.offset;\n                    var nameBytes = bytes.subarray(recordOffset, recordOffset + nameRecord.length);\n                    switch (nameRecord.platformId) {\n                      case 1:\n                        {\n                            var name_4 = \"\";\n                            for (var j = 0; j < nameBytes.length; j++) {\n                                name_4 += String.fromCharCode(nameBytes[j]);\n                            }\n                            result.add(name_4);\n                            break;\n                        }\n\n                      case 3:\n                        {\n                            var name_5 = \"\";\n                            for (var j = 0; j < nameBytes.length; j += 2) {\n                                name_5 += String.fromCharCode((nameBytes[j] << 8) + nameBytes[j + 1]);\n                            }\n                            result.add(name_5);\n                            break;\n                        }\n                    }\n                    break;\n\n                  default:\n                    break;\n                }\n            }\n            return result;\n        }\n        exports.getTtfNames = getTtfNames;\n        /**\n         * @param {!function(new(): T)} clazz\n         * @return {!function(new(): T)}\n         *\n         * @template T\n         * @private\n         */\n        function struct(clazz) {\n            var fields = clazz.__fields;\n            clazz.read = function (reader) {\n                var result = new clazz();\n                for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\n                    var field_1 = fields_1[_i];\n                    var value = void 0;\n                    switch (field_1.type) {\n                      case DataType.Char:\n                        value = String.fromCharCode(reader.dataView.getInt8(reader.position));\n                        reader.position += 1;\n                        break;\n\n                      case DataType.Uint16:\n                        value = reader.dataView.getUint16(reader.position);\n                        reader.position += 2;\n                        break;\n\n                      case DataType.Uint32:\n                        value = reader.dataView.getUint32(reader.position);\n                        reader.position += 4;\n                        break;\n                    }\n                    result[field_1.field] = value;\n                }\n                return result;\n            };\n            return clazz;\n        }\n        /**\n         * @param {number} type\n         * @return {function(T, string)}\n         *\n         * @template T\n         * @private\n         */\n        function field(type) {\n            var existingDecorator = fieldDecorators.get(type);\n            if (existingDecorator === undefined) {\n                existingDecorator = function (proto, field) {\n                    var ctor = proto.constructor;\n                    if (ctor.__fields === undefined) {\n                        ctor.__fields = [];\n                    }\n                    ctor.__fields.push({\n                        type: type,\n                        field: field\n                    });\n                };\n                fieldDecorators.set(type, existingDecorator);\n            }\n            return existingDecorator;\n        }\n    });\n    def(\"renderers/settings\", [ \"settings\", \"utility/map\" ], function (settings_6, map_11, exports) {\n        /**\n         * Settings for the renderer.\n         *\n         * @constructor\n         * @memberOf libjass.renderers\n         */\n        var RendererSettings = function () {\n            function RendererSettings() {}\n            /**\n             * A convenience method to create a font map from a <style> or <link> element that contains @font-face rules. There should be one @font-face rule for each font name, mapping to a font file URL.\n             *\n             * For example:\n             *\n             *     @font-face {\n             *         font-family: \"Helvetica\";\n             *         src: url(\"/fonts/helvetica.ttf\"), local(\"Arial\");\n             *     }\n             *\n             * More complicated @font-face syntax like format() or multi-line src are not supported.\n             *\n             * @param {!LinkStyle} linkStyle\n             * @return {!Map.<string, string>}\n             *\n             * @static\n             */\n            RendererSettings.makeFontMapFromStyleElement = function (linkStyle) {\n                var fontMap = new map_11.Map();\n                var styleSheet = linkStyle.sheet;\n                for (var i = 0; i < styleSheet.cssRules.length; i++) {\n                    var rule = styleSheet.cssRules[i];\n                    if (isFontFaceRule(rule)) {\n                        var name_3 = rule.style.getPropertyValue(\"font-family\").match(/^[\"']?(.*?)[\"']?$/)[1];\n                        var src = rule.style.getPropertyValue(\"src\");\n                        if (!src) {\n                            src = rule.cssText.split(\"\\n\").map(function (line) {\n                                return line.match(/src:\\s*([^;]+?)\\s*;/);\n                            }).filter(function (matches) {\n                                return matches !== null;\n                            }).map(function (matches) {\n                                return matches[1];\n                            })[0];\n                        }\n                        fontMap.set(name_3, src);\n                    }\n                }\n                return fontMap;\n            };\n            /**\n             * Converts an arbitrary object into a {@link libjass.renderers.RendererSettings} object.\n             *\n             * @param {*} object\n             * @return {!libjass.renderers.RendererSettings}\n             *\n             * @static\n             */\n            RendererSettings.from = function (object) {\n                if (object === undefined || object === null) {\n                    object = {};\n                }\n                var _a = object;\n                var _b = _a.fontMap;\n                var fontMap = _b === void 0 ? null : _b;\n                var _c = _a.preRenderTime;\n                var preRenderTime = _c === void 0 ? 5 : _c;\n                var _d = _a.preciseOutlines;\n                var preciseOutlines = _d === void 0 ? false : _d;\n                var _e = _a.enableSvg;\n                var enableSvg = _e === void 0 ? testSupportsSvg() : _e;\n                var _f = _a.fallbackFonts;\n                var fallbackFonts = _f === void 0 ? 'Arial, Helvetica, sans-serif, \"Segoe UI Symbol\"' : _f;\n                var _g = _a.useAttachedFonts;\n                var useAttachedFonts = _g === void 0 ? false : _g;\n                var result = new RendererSettings();\n                result.fontMap = fontMap;\n                result.preRenderTime = preRenderTime;\n                result.preciseOutlines = preciseOutlines;\n                result.enableSvg = enableSvg;\n                result.fallbackFonts = fallbackFonts;\n                result.useAttachedFonts = useAttachedFonts;\n                return result;\n            };\n            return RendererSettings;\n        }();\n        exports.RendererSettings = RendererSettings;\n        /**\n         * @param {!CSSRule} rule\n         * @return {boolean}\n         *\n         * @private\n         */\n        function isFontFaceRule(rule) {\n            return rule.type === CSSRule.FONT_FACE_RULE;\n        }\n        /**\n         * Returns true if this environment may support SVG filter effects. May return false positives.\n         *\n         * @return {boolean}\n         *\n         * @private\n         */\n        function testSupportsSvg() {\n            if (settings_6.debugMode) {\n                console.log(\"Testing whether SVG filter effects are supported.\");\n            }\n            if (global.document === undefined) {\n                if (settings_6.debugMode) {\n                    console.log(\"This doesn't look like a browser. Assuming it doesn't support SVG filter effects.\");\n                }\n                return false;\n            }\n            var morphologyFilter = document.createElementNS(\"http://www.w3.org/2000/svg\", \"feMorphology\");\n            // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/6618301/\n            try {\n                morphologyFilter.radiusX.baseVal = 1;\n            } catch (ex) {\n                if (settings_6.debugMode) {\n                    if (ex instanceof DOMException) {\n                        var domException = ex;\n                        if (domException.code === DOMException.NO_MODIFICATION_ALLOWED_ERR) {\n                            console.log(\"Setting SVGFEMorphologyElement.radiusX.baseVal threw NoModificationAllowedError. This browser doesn't support SVG DOM correctly.\");\n                        } else {\n                            console.log(\"Setting SVGFEMorphologyElement.radiusX.baseVal threw unexpected DOMException code \" + domException.code + \". This browser doesn't support SVG DOM correctly.\");\n                        }\n                    } else {\n                        console.log(\"Setting SVGFEMorphologyElement.radiusX.baseVal threw unexpected exception \" + ex + \". This browser doesn't support SVG SVG DOM correctly.\");\n                    }\n                }\n                return false;\n            }\n            // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/6618454/\n            morphologyFilter.setAttribute(\"radius\", \"1\");\n            if (morphologyFilter.cloneNode().getAttribute(\"radius\") !== \"1\") {\n                if (settings_6.debugMode) {\n                    console.log(\"SVGFEMorphologyElement's radius attribute was corrupted when cloned. This browser doesn't support SVG DOM correctly.\");\n                }\n                return false;\n            }\n            if (settings_6.debugMode) {\n                console.log(\"This browser may support SVG filter effects.\");\n            }\n            return true;\n        }\n    });\n    def(\"renderers/clocks/video\", [ \"renderers/clocks/auto\" ], function (auto_1, exports) {\n        /**\n         * An implementation of libjass.renderers.Clock that generates {@link libjass.renderers.ClockEvent}s according to the state of a <video> element.\n         *\n         * @param {!HTMLVideoElement} video\n         *\n         * @constructor\n         * @implements {libjass.renderers.Clock}\n         * @memberOf libjass.renderers\n         */\n        var VideoClock = function () {\n            function VideoClock(video) {\n                var _this = this;\n                this._autoClock = new auto_1.AutoClock(function () {\n                    return video.currentTime;\n                }, 100);\n                video.addEventListener(\"playing\", function () {\n                    return _this._autoClock.play();\n                }, false);\n                video.addEventListener(\"pause\", function () {\n                    return _this._autoClock.pause();\n                }, false);\n                video.addEventListener(\"seeking\", function () {\n                    return _this._autoClock.seeking();\n                }, false);\n                video.addEventListener(\"ratechange\", function () {\n                    return _this._autoClock.setRate(video.playbackRate);\n                }, false);\n            }\n            Object.defineProperty(VideoClock.prototype, \"currentTime\", {\n                /**\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._autoClock.currentTime;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(VideoClock.prototype, \"enabled\", {\n                /**\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._autoClock.enabled;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(VideoClock.prototype, \"paused\", {\n                /**\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._autoClock.paused;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(VideoClock.prototype, \"rate\", {\n                /**\n                 * Gets the rate of the clock - how fast the clock ticks compared to real time.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._autoClock.rate;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Enable the clock.\n             *\n             * @return {boolean} True if the clock is now enabled, false if it was already enabled.\n             */\n            VideoClock.prototype.enable = function () {\n                return this._autoClock.enable();\n            };\n            /**\n             * Disable the clock.\n             *\n             * @return {boolean} True if the clock is now disabled, false if it was already disabled.\n             */\n            VideoClock.prototype.disable = function () {\n                return this._autoClock.disable();\n            };\n            /**\n             * Toggle the clock.\n             */\n            VideoClock.prototype.toggle = function () {\n                if (this._autoClock.enabled) {\n                    this.disable();\n                } else {\n                    this.enable();\n                }\n            };\n            /**\n             * Enable or disable the clock.\n             *\n             * @param {boolean} enabled If true, the clock is enabled, otherwise it's disabled.\n             * @return {boolean} True if the clock is now in the given state, false if it was already in that state.\n             */\n            VideoClock.prototype.setEnabled = function (enabled) {\n                if (enabled) {\n                    return this.enable();\n                } else {\n                    return this.disable();\n                }\n            };\n            /**\n             * @param {number} type\n             * @param {!Function} listener\n             */\n            VideoClock.prototype.addEventListener = function (type, listener) {\n                this._autoClock.addEventListener(type, listener);\n            };\n            return VideoClock;\n        }();\n        exports.VideoClock = VideoClock;\n    });\n    def(\"renderers/clocks/auto\", [ \"settings\", \"renderers/clocks/manual\" ], function (settings_5, manual_1, exports) {\n        /**\n         * An implementation of {@link libjass.renderers.Clock} that automatically ticks and generates {@link libjass.renderers.ClockEvent}s according to the state of an external driver.\n         *\n         * For example, if you're using libjass to render subtitles on a canvas with your own video controls, these video controls will function as the driver to this AutoClock.\n         * It would call {@link libjass.renderers.AutoClock.play}, {@link libjass.renderers.AutoClock.pause}, etc. when the user pressed the corresponding video controls.\n         *\n         * The difference from ManualClock is that AutoClock does not require the driver to call something like {@link libjass.renderers.ManualClock.tick}. Instead it keeps its\n         * own time with a high-resolution requestAnimationFrame-based timer.\n         *\n         * If using libjass with a <video> element, consider using {@link libjass.renderers.VideoClock} that uses the video element as a driver.\n         *\n         * @param {function():number} getCurrentTime A callback that will be invoked to get the current time of the external driver.\n         * @param {number} autoPauseAfter If two calls to getCurrentTime are more than autoPauseAfter milliseconds apart but return the same time, then the external driver will be\n         * considered to have paused.\n         *\n         * @constructor\n         * @implements {libjass.renderers.Clock}\n         * @memberOf libjass.renderers\n         */\n        var AutoClock = function () {\n            function AutoClock(getCurrentTime, autoPauseAfter) {\n                this._getCurrentTime = getCurrentTime;\n                this._autoPauseAfter = autoPauseAfter;\n                this._manualClock = new manual_1.ManualClock();\n                this._nextAnimationFrameRequestId = null;\n                this._lastKnownExternalTime = null;\n                this._lastKnownExternalTimeObtainedAt = 0;\n            }\n            /**\n             * Tells the clock to start generating ticks.\n             */\n            AutoClock.prototype.play = function () {\n                if (!this._manualClock.enabled) {\n                    return;\n                }\n                this._startTicking();\n                this._manualClock.play();\n            };\n            /**\n             * Tells the clock to pause.\n             */\n            AutoClock.prototype.pause = function () {\n                if (!this._manualClock.enabled) {\n                    return;\n                }\n                if (this._nextAnimationFrameRequestId === null) {\n                    if (settings_5.debugMode) {\n                        console.warn(\"AutoClock.pause: Abnormal state detected. AutoClock._nextAnimationFrameRequestId should not have been null.\");\n                    }\n                    return;\n                }\n                this._stopTicking();\n                this._manualClock.pause();\n            };\n            /**\n             * Tells the clock that the external driver is seeking.\n             */\n            AutoClock.prototype.seeking = function () {\n                this._manualClock.seek(this._getCurrentTime());\n            };\n            Object.defineProperty(AutoClock.prototype, \"currentTime\", {\n                // Clock members\n                /**\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._manualClock.currentTime;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(AutoClock.prototype, \"enabled\", {\n                /**\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._manualClock.enabled;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(AutoClock.prototype, \"paused\", {\n                /**\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._manualClock.paused;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(AutoClock.prototype, \"rate\", {\n                /**\n                 * Gets the rate of the clock - how fast the clock ticks compared to real time.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._manualClock.rate;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Sets the rate of the clock - how fast the clock ticks compared to real time.\n             *\n             * @param {number} rate The new rate of the clock.\n             */\n            AutoClock.prototype.setRate = function (rate) {\n                this._manualClock.setRate(rate);\n            };\n            /**\n             * Enable the clock.\n             *\n             * @return {boolean} True if the clock is now enabled, false if it was already enabled.\n             */\n            AutoClock.prototype.enable = function () {\n                if (!this._manualClock.enable()) {\n                    return false;\n                }\n                this._startTicking();\n                return true;\n            };\n            /**\n             * Disable the clock.\n             *\n             * @return {boolean} True if the clock is now disabled, false if it was already disabled.\n             */\n            AutoClock.prototype.disable = function () {\n                if (!this._manualClock.disable()) {\n                    return false;\n                }\n                this._stopTicking();\n                return true;\n            };\n            /**\n             * Toggle the clock.\n             */\n            AutoClock.prototype.toggle = function () {\n                if (this._manualClock.enabled) {\n                    this.disable();\n                } else {\n                    this.enable();\n                }\n            };\n            /**\n             * Enable or disable the clock.\n             *\n             * @param {boolean} enabled If true, the clock is enabled, otherwise it's disabled.\n             * @return {boolean} True if the clock is now in the given state, false if it was already in that state.\n             */\n            AutoClock.prototype.setEnabled = function (enabled) {\n                if (enabled) {\n                    return this.enable();\n                } else {\n                    return this.disable();\n                }\n            };\n            /**\n             * @param {number} type\n             * @param {!Function} listener\n             */\n            AutoClock.prototype.addEventListener = function (type, listener) {\n                this._manualClock.addEventListener(type, listener);\n            };\n            /**\n             * @param {number} timeStamp\n             *\n             * @private\n             */\n            AutoClock.prototype._onTimerTick = function (timeStamp) {\n                var _this = this;\n                if (!this._manualClock.enabled) {\n                    if (settings_5.debugMode) {\n                        console.warn(\"AutoClock._onTimerTick: Called when disabled.\");\n                    }\n                    return;\n                }\n                var currentTime = this._manualClock.currentTime;\n                var currentExternalTime = this._getCurrentTime();\n                if (!this._manualClock.paused) {\n                    if (this._lastKnownExternalTime !== null && currentExternalTime === this._lastKnownExternalTime) {\n                        if (timeStamp - this._lastKnownExternalTimeObtainedAt > this._autoPauseAfter) {\n                            this._lastKnownExternalTimeObtainedAt = 0;\n                            this._manualClock.seek(currentExternalTime);\n                        } else {\n                            this._manualClock.tick((timeStamp - this._lastKnownExternalTimeObtainedAt) / 1e3 * this._manualClock.rate + this._lastKnownExternalTime);\n                        }\n                    } else {\n                        this._lastKnownExternalTime = currentExternalTime;\n                        this._lastKnownExternalTimeObtainedAt = timeStamp;\n                        this._manualClock.tick(currentExternalTime);\n                    }\n                } else {\n                    if (currentTime !== currentExternalTime) {\n                        this._lastKnownExternalTime = currentExternalTime;\n                        this._lastKnownExternalTimeObtainedAt = timeStamp;\n                        this._manualClock.tick(currentExternalTime);\n                    }\n                }\n                this._nextAnimationFrameRequestId = requestAnimationFrame(function (timeStamp) {\n                    return _this._onTimerTick(timeStamp);\n                });\n            };\n            AutoClock.prototype._startTicking = function () {\n                var _this = this;\n                if (this._nextAnimationFrameRequestId === null) {\n                    this._nextAnimationFrameRequestId = requestAnimationFrame(function (timeStamp) {\n                        return _this._onTimerTick(timeStamp);\n                    });\n                }\n            };\n            AutoClock.prototype._stopTicking = function () {\n                if (this._nextAnimationFrameRequestId !== null) {\n                    cancelAnimationFrame(this._nextAnimationFrameRequestId);\n                    this._nextAnimationFrameRequestId = null;\n                }\n            };\n            return AutoClock;\n        }();\n        exports.AutoClock = AutoClock;\n    });\n    def(\"renderers/clocks/manual\", [ \"utility/map\", \"utility/mixin\", \"renderers/clocks/base\" ], function (map_10, mixin_2, base_1, exports) {\n        /**\n         * An implementation of {@link libjass.renderers.Clock} that allows user script to manually trigger {@link libjass.renderers.ClockEvent}s.\n         *\n         * @constructor\n         * @implements {libjass.renderers.Clock}\n         * @implements {libjass.renderers.EventSource.<libjass.renderers.ClockEvent>}\n         * @memberOf libjass.renderers\n         */\n        var ManualClock = function () {\n            function ManualClock() {\n                this._currentTime = -1;\n                this._rate = 1;\n                this._enabled = true;\n                this._paused = true;\n                // EventSource members\n                /**\n                 * @type {!Map.<T, !Array.<Function>>}\n                 */\n                this._eventListeners = new map_10.Map();\n            }\n            /**\n             * Trigger a {@link libjass.renderers.ClockEvent.Play}\n             */\n            ManualClock.prototype.play = function () {\n                if (!this._enabled) {\n                    return;\n                }\n                if (!this._paused) {\n                    return;\n                }\n                this._paused = false;\n                this._dispatchEvent(base_1.ClockEvent.Play, []);\n            };\n            /**\n             * Trigger a {@link libjass.renderers.ClockEvent.Tick} with the given time.\n             *\n             * @param {number} currentTime\n             */\n            ManualClock.prototype.tick = function (currentTime) {\n                if (!this._enabled) {\n                    return;\n                }\n                if (this._currentTime === currentTime) {\n                    return;\n                }\n                this.play();\n                this._currentTime = currentTime;\n                this._dispatchEvent(base_1.ClockEvent.Tick, []);\n            };\n            /**\n             * Seek to the given time. Unlike {@link libjass.renderers.ManualClock.tick} this is used to represent a discontinuous jump, such as the user seeking\n             * via the video element's position bar.\n             *\n             * @param {number} time\n             */\n            ManualClock.prototype.seek = function (time) {\n                if (!this._enabled) {\n                    return;\n                }\n                this.pause();\n                if (this._currentTime === time) {\n                    return;\n                }\n                this.stop();\n                this.tick(time);\n                this.pause();\n            };\n            /**\n             * Trigger a {@link libjass.renderers.ClockEvent.Pause}\n             */\n            ManualClock.prototype.pause = function () {\n                if (!this._enabled) {\n                    return;\n                }\n                if (this._paused) {\n                    return;\n                }\n                this._paused = true;\n                this._dispatchEvent(base_1.ClockEvent.Pause, []);\n            };\n            /**\n             * Trigger a {@link libjass.renderers.ClockEvent.Stop}\n             */\n            ManualClock.prototype.stop = function () {\n                this._dispatchEvent(base_1.ClockEvent.Stop, []);\n            };\n            Object.defineProperty(ManualClock.prototype, \"currentTime\", {\n                // Clock members\n                /**\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._currentTime;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ManualClock.prototype, \"enabled\", {\n                /**\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._enabled;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ManualClock.prototype, \"paused\", {\n                /**\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._paused;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ManualClock.prototype, \"rate\", {\n                /**\n                 * Gets the rate of the clock - how fast the clock ticks compared to real time.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._rate;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Sets the rate of the clock - how fast the clock ticks compared to real time.\n             *\n             * @param {number} rate The new rate of the clock.\n             */\n            ManualClock.prototype.setRate = function (rate) {\n                if (this._rate === rate) {\n                    return;\n                }\n                this._rate = rate;\n                this._dispatchEvent(base_1.ClockEvent.RateChange, []);\n            };\n            /**\n             * Enable the clock.\n             *\n             * @return {boolean} True if the clock is now enabled, false if it was already enabled.\n             */\n            ManualClock.prototype.enable = function () {\n                if (this._enabled) {\n                    return false;\n                }\n                this._enabled = true;\n                return true;\n            };\n            /**\n             * Disable the clock.\n             *\n             * @return {boolean} True if the clock is now disabled, false if it was already disabled.\n             */\n            ManualClock.prototype.disable = function () {\n                if (!this._enabled) {\n                    return false;\n                }\n                this.pause();\n                this.stop();\n                this._enabled = false;\n                return true;\n            };\n            /**\n             * Toggle the clock.\n             */\n            ManualClock.prototype.toggle = function () {\n                if (this._enabled) {\n                    this.disable();\n                } else {\n                    this.enable();\n                }\n            };\n            /**\n             * Enable or disable the clock.\n             *\n             * @param {boolean} enabled If true, the clock is enabled, otherwise it's disabled.\n             * @return {boolean} True if the clock is now in the given state, false if it was already in that state.\n             */\n            ManualClock.prototype.setEnabled = function (enabled) {\n                if (enabled) {\n                    return this.enable();\n                } else {\n                    return this.disable();\n                }\n            };\n            return ManualClock;\n        }();\n        exports.ManualClock = ManualClock;\n        mixin_2.mixin(ManualClock, [ base_1.EventSource ]);\n    });\n    def(\"utility/mixin\", [], function (exports) {\n        /**\n         * Adds properties of the given mixins' prototypes to the given class's prototype.\n         *\n         * @param {!*} clazz\n         * @param {!Array.<*>} mixins\n         */\n        function mixin(clazz, mixins) {\n            for (var _i = 0, mixins_1 = mixins; _i < mixins_1.length; _i++) {\n                var mixin_1 = mixins_1[_i];\n                for (var _a = 0, _b = Object.getOwnPropertyNames(mixin_1.prototype); _a < _b.length; _a++) {\n                    var name_2 = _b[_a];\n                    clazz.prototype[name_2] = mixin_1.prototype[name_2];\n                }\n            }\n        }\n        exports.mixin = mixin;\n    });\n    def(\"renderers/clocks/base\", [], function (exports) {\n        /**\n         * A mixin class that represents an event source.\n         */\n        var EventSource = function () {\n            function EventSource() {}\n            /**\n             * Add a listener for the given event.\n             *\n             * @param {!T} type The type of event to attach the listener for\n             * @param {!Function} listener The listener\n             */\n            EventSource.prototype.addEventListener = function (type, listener) {\n                var listeners = this._eventListeners.get(type);\n                if (listeners === undefined) {\n                    this._eventListeners.set(type, listeners = []);\n                }\n                listeners.push(listener);\n            };\n            /**\n             * Calls all listeners registered for the given event type.\n             *\n             * @param {!T} type The type of event to dispatch\n             * @param {!Array.<*>} args Arguments for the listeners of the event\n             */\n            EventSource.prototype._dispatchEvent = function (type, args) {\n                var listeners = this._eventListeners.get(type);\n                if (listeners !== undefined) {\n                    for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {\n                        var listener = listeners_1[_i];\n                        listener.apply(this, args);\n                    }\n                }\n            };\n            return EventSource;\n        }();\n        exports.EventSource = EventSource;\n        /**\n         * The type of clock event.\n         *\n         * @enum\n         * @memberOf libjass.renderers\n         */\n        (function (ClockEvent) {\n            ClockEvent[ClockEvent[\"Play\"] = 0] = \"Play\";\n            ClockEvent[ClockEvent[\"Tick\"] = 1] = \"Tick\";\n            ClockEvent[ClockEvent[\"Pause\"] = 2] = \"Pause\";\n            ClockEvent[ClockEvent[\"Stop\"] = 3] = \"Stop\";\n            ClockEvent[ClockEvent[\"RateChange\"] = 4] = \"RateChange\";\n        })(exports.ClockEvent || (exports.ClockEvent = {}));\n    });\n    def(\"parser/index\", [ \"parser/parse\", \"parser/streams\", \"parser/stream-parsers\" ], function (parse_3, streams_2, stream_parsers_2, exports) {\n        exports.parse = parse_3.parse;\n        exports.BrowserReadableStream = streams_2.BrowserReadableStream;\n        exports.StringStream = streams_2.StringStream;\n        exports.XhrStream = streams_2.XhrStream;\n        exports.StreamParser = stream_parsers_2.StreamParser;\n        exports.SrtStreamParser = stream_parsers_2.SrtStreamParser;\n    });\n    def(\"parser/stream-parsers\", [ \"settings\", \"types/ass\", \"types/attachment\", \"types/dialogue\", \"types/style\", \"utility/map\", \"utility/promise\", \"parser/misc\" ], function (settings_4, ass_1, attachment_1, dialogue_2, style_2, map_9, promise_5, misc_7, exports) {\n        var Section;\n        (function (Section) {\n            Section[Section[\"ScriptInfo\"] = 0] = \"ScriptInfo\";\n            Section[Section[\"Styles\"] = 1] = \"Styles\";\n            Section[Section[\"Events\"] = 2] = \"Events\";\n            Section[Section[\"Fonts\"] = 3] = \"Fonts\";\n            Section[Section[\"Graphics\"] = 4] = \"Graphics\";\n            Section[Section[\"Other\"] = 5] = \"Other\";\n            Section[Section[\"EOF\"] = 6] = \"EOF\";\n        })(Section || (Section = {}));\n        /**\n         * A parser that parses an {@link libjass.ASS} object from a {@link libjass.parser.Stream}.\n         *\n         * @param {!libjass.parser.Stream} stream The {@link libjass.parser.Stream} to parse\n         *\n         * @constructor\n         * @memberOf libjass.parser\n         */\n        var StreamParser = function () {\n            function StreamParser(stream) {\n                var _this = this;\n                this._stream = stream;\n                this._ass = new ass_1.ASS();\n                this._minimalDeferred = new promise_5.DeferredPromise();\n                this._deferred = new promise_5.DeferredPromise();\n                this._shouldSwallowBom = true;\n                this._currentSection = Section.ScriptInfo;\n                this._currentAttachment = null;\n                this._stream.nextLine().then(function (line) {\n                    return _this._onNextLine(line);\n                }, function (reason) {\n                    _this._minimalDeferred.reject(reason);\n                    _this._deferred.reject(reason);\n                });\n            }\n            Object.defineProperty(StreamParser.prototype, \"minimalASS\", {\n                /**\n                 * @type {!Promise.<!libjass.ASS>} A promise that will be resolved when the script properties of the ASS script have been parsed from the stream. Styles and events have not necessarily been\n                 * parsed at the point this promise becomes resolved.\n                 */\n                get: function () {\n                    return this._minimalDeferred.promise;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(StreamParser.prototype, \"ass\", {\n                /**\n                 * @type {!Promise.<!libjass.ASS>} A promise that will be resolved when the entire stream has been parsed.\n                 */\n                get: function () {\n                    return this._deferred.promise;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(StreamParser.prototype, \"currentSection\", {\n                /**\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._currentSection;\n                },\n                /**\n                 * @type {number}\n                 */\n                set: function (value) {\n                    if (this._currentAttachment !== null) {\n                        this._ass.addAttachment(this._currentAttachment);\n                        this._currentAttachment = null;\n                    }\n                    if (this._currentSection === Section.ScriptInfo && value !== Section.ScriptInfo) {\n                        // Exiting script info section\n                        this._minimalDeferred.resolve(this._ass);\n                    }\n                    if (value === Section.EOF) {\n                        var scriptProperties = this._ass.properties;\n                        if (scriptProperties.resolutionX === undefined || scriptProperties.resolutionY === undefined) {\n                            // Malformed script.\n                            this._minimalDeferred.reject(\"Malformed ASS script.\");\n                            this._deferred.reject(\"Malformed ASS script.\");\n                        } else {\n                            this._minimalDeferred.resolve(this._ass);\n                            this._deferred.resolve(this._ass);\n                        }\n                    }\n                    this._currentSection = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * @param {string} line\n             *\n             * @private\n             */\n            StreamParser.prototype._onNextLine = function (line) {\n                var _this = this;\n                if (line === null) {\n                    this.currentSection = Section.EOF;\n                    return;\n                }\n                if (line[line.length - 1] === \"\\r\") {\n                    line = line.substr(0, line.length - 1);\n                }\n                if (line.charCodeAt(0) === 65279 && this._shouldSwallowBom) {\n                    line = line.substr(1);\n                }\n                this._shouldSwallowBom = false;\n                if (line === \"\") {} else if (line[0] === \";\" && this._currentAttachment === null) {} else if (line === \"[Script Info]\") {\n                    this.currentSection = Section.ScriptInfo;\n                } else if (line === \"[V4+ Styles]\" || line === \"[V4 Styles]\") {\n                    this.currentSection = Section.Styles;\n                } else if (line === \"[Events]\") {\n                    this.currentSection = Section.Events;\n                } else if (line === \"[Fonts]\") {\n                    this.currentSection = Section.Fonts;\n                } else if (line === \"[Graphics]\") {\n                    this.currentSection = Section.Graphics;\n                } else {\n                    if (this._currentAttachment === null && line[0] === \"[\" && line[line.length - 1] === \"]\") {\n                        /* This looks like the start of a new section. The section name is unrecognized if it is.\n                         * Since there's no current attachment being parsed it's definitely the start of a new section.\n                         * If an attachment is being parsed, this might be part of the attachment.\n                         */\n                        this.currentSection = Section.Other;\n                    }\n                    switch (this.currentSection) {\n                      case Section.ScriptInfo:\n                        var property = misc_7.parseLineIntoProperty(line);\n                        if (property !== null) {\n                            switch (property.name) {\n                              case \"PlayResX\":\n                                this._ass.properties.resolutionX = parseInt(property.value);\n                                break;\n\n                              case \"PlayResY\":\n                                this._ass.properties.resolutionY = parseInt(property.value);\n                                break;\n\n                              case \"WrapStyle\":\n                                this._ass.properties.wrappingStyle = parseInt(property.value);\n                                break;\n\n                              case \"ScaledBorderAndShadow\":\n                                this._ass.properties.scaleBorderAndShadow = property.value === \"yes\";\n                                break;\n                            }\n                        }\n                        break;\n\n                      case Section.Styles:\n                        if (this._ass.stylesFormatSpecifier === null) {\n                            var property_1 = misc_7.parseLineIntoProperty(line);\n                            if (property_1 !== null && property_1.name === \"Format\") {\n                                this._ass.stylesFormatSpecifier = property_1.value.split(\",\").map(function (str) {\n                                    return str.trim();\n                                });\n                            } else {}\n                        } else {\n                            try {\n                                this._ass.addStyle(line);\n                            } catch (ex) {\n                                if (settings_4.debugMode) {\n                                    console.error(\"Could not parse style from line \" + line + \" - \" + (ex.stack || ex));\n                                }\n                            }\n                        }\n                        break;\n\n                      case Section.Events:\n                        if (this._ass.dialoguesFormatSpecifier === null) {\n                            var property_2 = misc_7.parseLineIntoProperty(line);\n                            if (property_2 !== null && property_2.name === \"Format\") {\n                                this._ass.dialoguesFormatSpecifier = property_2.value.split(\",\").map(function (str) {\n                                    return str.trim();\n                                });\n                            } else {}\n                        } else {\n                            try {\n                                this._ass.addEvent(line);\n                            } catch (ex) {\n                                if (settings_4.debugMode) {\n                                    console.error(\"Could not parse event from line \" + line + \" - \" + (ex.stack || ex));\n                                }\n                            }\n                        }\n                        break;\n\n                      case Section.Fonts:\n                      case Section.Graphics:\n                        var startOfNewAttachmentRegex = this.currentSection === Section.Fonts ? /^fontname:(.+)/ : /^filename:(.+)/;\n                        var startOfNewAttachment = startOfNewAttachmentRegex.exec(line);\n                        if (startOfNewAttachment !== null) {\n                            // Start of new attachment\n                            if (this._currentAttachment !== null) {\n                                this._ass.addAttachment(this._currentAttachment);\n                                this._currentAttachment = null;\n                            }\n                            this._currentAttachment = new attachment_1.Attachment(startOfNewAttachment[1].trim(), this.currentSection === Section.Fonts ? attachment_1.AttachmentType.Font : attachment_1.AttachmentType.Graphic);\n                        } else if (this._currentAttachment !== null) {\n                            try {\n                                this._currentAttachment.contents += uuencodedToBase64(line);\n                            } catch (ex) {\n                                if (settings_4.debugMode) {\n                                    console.error(\"Encountered error while reading font \" + this._currentAttachment.filename + \": %o\", ex);\n                                }\n                                this._currentAttachment = null;\n                            }\n                        } else {}\n                        break;\n\n                      case Section.Other:\n                        // Ignore other sections.\n                        break;\n\n                      default:\n                        throw new Error(\"Unhandled state \" + this.currentSection);\n                    }\n                }\n                this._stream.nextLine().then(function (line) {\n                    return _this._onNextLine(line);\n                }, function (reason) {\n                    _this._minimalDeferred.reject(reason);\n                    _this._deferred.reject(reason);\n                });\n            };\n            return StreamParser;\n        }();\n        exports.StreamParser = StreamParser;\n        /**\n         * A parser that parses an {@link libjass.ASS} object from a {@link libjass.parser.Stream} of an SRT script.\n         *\n         * @param {!libjass.parser.Stream} stream The {@link libjass.parser.Stream} to parse\n         *\n         * @constructor\n         * @memberOf libjass.parser\n         */\n        var SrtStreamParser = function () {\n            function SrtStreamParser(stream) {\n                var _this = this;\n                this._stream = stream;\n                this._ass = new ass_1.ASS();\n                this._deferred = new promise_5.DeferredPromise();\n                this._shouldSwallowBom = true;\n                this._currentDialogueNumber = null;\n                this._currentDialogueStart = null;\n                this._currentDialogueEnd = null;\n                this._currentDialogueText = null;\n                this._stream.nextLine().then(function (line) {\n                    return _this._onNextLine(line);\n                }, function (reason) {\n                    _this._deferred.reject(reason);\n                });\n                this._ass.properties.resolutionX = 1280;\n                this._ass.properties.resolutionY = 720;\n                this._ass.properties.wrappingStyle = 1;\n                this._ass.properties.scaleBorderAndShadow = true;\n                var newStyle = new style_2.Style(new map_9.Map([ [ \"Name\", \"Default\" ], [ \"FontSize\", \"36\" ] ]));\n                this._ass.styles.set(newStyle.name, newStyle);\n            }\n            Object.defineProperty(SrtStreamParser.prototype, \"ass\", {\n                /**\n                 * @type {!Promise.<!libjass.ASS>} A promise that will be resolved when the entire stream has been parsed.\n                 */\n                get: function () {\n                    return this._deferred.promise;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * @param {string} line\n             *\n             * @private\n             */\n            SrtStreamParser.prototype._onNextLine = function (line) {\n                var _this = this;\n                if (line === null) {\n                    if (this._currentDialogueNumber !== null && this._currentDialogueStart !== null && this._currentDialogueEnd !== null && this._currentDialogueText !== null) {\n                        this._ass.dialogues.push(new dialogue_2.Dialogue(new map_9.Map([ [ \"Style\", \"Default\" ], [ \"Start\", this._currentDialogueStart ], [ \"End\", this._currentDialogueEnd ], [ \"Text\", this._currentDialogueText ] ]), this._ass));\n                    }\n                    this._deferred.resolve(this._ass);\n                    return;\n                }\n                if (line[line.length - 1] === \"\\r\") {\n                    line = line.substr(0, line.length - 1);\n                }\n                if (line.charCodeAt(0) === 65279 && this._shouldSwallowBom) {\n                    line = line.substr(1);\n                }\n                this._shouldSwallowBom = false;\n                if (line === \"\") {\n                    if (this._currentDialogueNumber !== null && this._currentDialogueStart !== null && this._currentDialogueEnd !== null && this._currentDialogueText !== null) {\n                        this._ass.dialogues.push(new dialogue_2.Dialogue(new map_9.Map([ [ \"Style\", \"Default\" ], [ \"Start\", this._currentDialogueStart ], [ \"End\", this._currentDialogueEnd ], [ \"Text\", this._currentDialogueText ] ]), this._ass));\n                    }\n                    this._currentDialogueNumber = this._currentDialogueStart = this._currentDialogueEnd = this._currentDialogueText = null;\n                } else {\n                    if (this._currentDialogueNumber === null) {\n                        if (/^\\d+$/.test(line)) {\n                            this._currentDialogueNumber = line;\n                        }\n                    } else if (this._currentDialogueStart === null && this._currentDialogueEnd === null) {\n                        var match = /^(\\d\\d:\\d\\d:\\d\\d,\\d\\d\\d) --> (\\d\\d:\\d\\d:\\d\\d,\\d\\d\\d)/.exec(line);\n                        if (match !== null) {\n                            this._currentDialogueStart = match[1].replace(\",\", \".\");\n                            this._currentDialogueEnd = match[2].replace(\",\", \".\");\n                        }\n                    } else {\n                        line = line.replace(/<b>/g, \"{\\\\b1}\").replace(/\\{b\\}/g, \"{\\\\b1}\").replace(/<\\/b>/g, \"{\\\\b0}\").replace(/\\{\\/b\\}/g, \"{\\\\b0}\").replace(/<i>/g, \"{\\\\i1}\").replace(/\\{i\\}/g, \"{\\\\i1}\").replace(/<\\/i>/g, \"{\\\\i0}\").replace(/\\{\\/i\\}/g, \"{\\\\i0}\").replace(/<u>/g, \"{\\\\u1}\").replace(/\\{u\\}/g, \"{\\\\u1}\").replace(/<\\/u>/g, \"{\\\\u0}\").replace(/\\{\\/u\\}/g, \"{\\\\u0}\").replace(/<font color=\"#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})\">/g, function (/* ujs:unreferenced */ substring, red, green, blue) {\n                            return \"{c&H\" + blue + green + red + \"&}\";\n                        }).replace(/<\\/font>/g, \"{\\\\c}\");\n                        if (this._currentDialogueText !== null) {\n                            this._currentDialogueText += \"\\\\N\" + line;\n                        } else {\n                            this._currentDialogueText = line;\n                        }\n                    }\n                }\n                this._stream.nextLine().then(function (line) {\n                    return _this._onNextLine(line);\n                }, function (reason) {\n                    _this._deferred.reject(reason);\n                });\n            };\n            return SrtStreamParser;\n        }();\n        exports.SrtStreamParser = SrtStreamParser;\n        /**\n         * Converts a uuencoded string to a base64 string.\n         *\n         * @param {string} str\n         * @return {string}\n         *\n         * @private\n         */\n        function uuencodedToBase64(str) {\n            var result = \"\";\n            for (var i = 0; i < str.length; i++) {\n                var charCode = str.charCodeAt(i) - 33;\n                if (charCode < 0 || charCode > 63) {\n                    throw new Error(\"Out-of-range character code \" + charCode + \" at index \" + i + \" in string \" + str);\n                }\n                if (charCode < 26) {\n                    result += String.fromCharCode(\"A\".charCodeAt(0) + charCode);\n                } else if (charCode < 52) {\n                    result += String.fromCharCode(\"a\".charCodeAt(0) + charCode - 26);\n                } else if (charCode < 62) {\n                    result += String.fromCharCode(\"0\".charCodeAt(0) + charCode - 52);\n                } else if (charCode === 62) {\n                    result += \"+\";\n                } else {\n                    result += \"/\";\n                }\n            }\n            return result;\n        }\n    });\n    def(\"types/ass\", [ \"parser/misc\", \"parser/stream-parsers\", \"parser/streams\", \"serialization\", \"settings\", \"utility/map\", \"utility/promise\", \"types/dialogue\", \"types/misc\", \"types/script-properties\", \"types/style\" ], function (misc_5, stream_parsers_1, streams_1, serialization_7, settings_3, map_8, promise_4, dialogue_1, misc_6, script_properties_1, style_1, exports) {\n        /**\n         * This class represents an ASS script. It contains the {@link libjass.ScriptProperties}, an array of {@link libjass.Style}s, and an array of {@link libjass.Dialogue}s.\n         *\n         * @constructor\n         * @memberOf libjass\n         */\n        var ASS = function () {\n            function ASS() {\n                this._properties = new script_properties_1.ScriptProperties();\n                this._styles = new map_8.Map();\n                this._dialogues = [];\n                this._attachments = [];\n                this._stylesFormatSpecifier = null;\n                this._dialoguesFormatSpecifier = null;\n                // Deprecated constructor argument\n                if (arguments.length === 1) {\n                    throw new Error(\"Constructor `new ASS(rawASS)` has been deprecated. Use `ASS.fromString(rawASS)` instead.\");\n                }\n                this._styles.set(\"Default\", new style_1.Style(new map_8.Map([ [ \"Name\", \"Default\" ] ])));\n            }\n            /**\n             * Creates an ASS object from the raw text of an ASS script.\n             *\n             * @param {string} raw The raw text of the script.\n             * @param {(number|string)=0} type The type of the script. One of the {@link libjass.Format} constants, or one of the strings \"ass\" and \"srt\".\n             * @return {!Promise.<!libjass.ASS>}\n             *\n             * @static\n             */\n            ASS.fromString = function (raw, type) {\n                if (type === void 0) {\n                    type = misc_6.Format.ASS;\n                }\n                return ASS.fromStream(new streams_1.StringStream(raw), type);\n            };\n            /**\n             * Creates an ASS object from the given {@link libjass.parser.Stream}.\n             *\n             * @param {!libjass.parser.Stream} stream The stream to parse the script from\n             * @param {(number|string)=0} type The type of the script. One of the {@link libjass.Format} constants, or one of the strings \"ass\" and \"srt\".\n             * @return {!Promise.<!libjass.ASS>} A promise that will be resolved with the ASS object when it has been fully parsed\n             *\n             * @static\n             */\n            ASS.fromStream = function (stream, type) {\n                if (type === void 0) {\n                    type = misc_6.Format.ASS;\n                }\n                switch (type) {\n                  case misc_6.Format.ASS:\n                  case \"ass\":\n                    return new stream_parsers_1.StreamParser(stream).ass;\n\n                  case misc_6.Format.SRT:\n                  case \"srt\":\n                    return new stream_parsers_1.SrtStreamParser(stream).ass;\n\n                  default:\n                    throw new Error(\"Invalid value of type: \" + type);\n                }\n            };\n            /**\n             * Creates an ASS object from the given URL.\n             *\n             * @param {string} url The URL of the script.\n             * @param {(number|string)=0} type The type of the script. One of the {@link libjass.Format} constants, or one of the strings \"ass\" and \"srt\".\n             * @return {!Promise.<!libjass.ASS>} A promise that will be resolved with the ASS object when it has been fully parsed\n             *\n             * @static\n             */\n            ASS.fromUrl = function (url, type) {\n                if (type === void 0) {\n                    type = misc_6.Format.ASS;\n                }\n                var fetchPromise;\n                if (typeof global.fetch === \"function\" && streams_1.BrowserReadableStream.isSupported()) {\n                    fetchPromise = global.fetch(url).then(function (response) {\n                        if (response.ok === false || response.ok === undefined && (response.status === undefined || response.status < 200 || response.status > 299)) {\n                            throw new Error(\"HTTP request for \" + url + \" failed with status code \" + response.status);\n                        }\n                        return ASS.fromReadableStream(response.body, \"utf-8\", type);\n                    });\n                } else {\n                    fetchPromise = promise_4.Promise.reject(new Error(\"Not supported.\"));\n                }\n                return fetchPromise.catch(function (reason) {\n                    if (settings_3.debugMode) {\n                        console.log(\"fetch() failed, falling back to XHR: %o\", reason);\n                    }\n                    var xhr = new XMLHttpRequest();\n                    var result = ASS.fromStream(new streams_1.XhrStream(xhr), type);\n                    xhr.open(\"GET\", url, true);\n                    xhr.send();\n                    return result;\n                });\n            };\n            /**\n             * Creates an ASS object from the given ReadableStream.\n             *\n             * @param {!ReadableStream} stream\n             * @param {string=\"utf-8\"} encoding\n             * @param {(number|string)=0} type The type of the script. One of the {@link libjass.Format} constants, or one of the strings \"ass\" and \"srt\".\n             * @return {!Promise.<!libjass.ASS>} A promise that will be resolved with the ASS object when it has been fully parsed\n             *\n             * @static\n             */\n            ASS.fromReadableStream = function (stream, encoding, type) {\n                if (encoding === void 0) {\n                    encoding = \"utf-8\";\n                }\n                if (type === void 0) {\n                    type = misc_6.Format.ASS;\n                }\n                return ASS.fromStream(new streams_1.BrowserReadableStream(stream, encoding), type);\n            };\n            /**\n             * Custom deserialization for ASS objects.\n             *\n             * @param {!*} obj\n             * @return {!libjass.ASS}\n             *\n             * @static\n             */\n            ASS.fromJSON = function (obj) {\n                var result = Object.create(ASS.prototype);\n                result._properties = obj._properties;\n                result._styles = new map_8.Map();\n                for (var _i = 0, _a = Object.keys(obj._styles); _i < _a.length; _i++) {\n                    var name_1 = _a[_i];\n                    var style = obj._styles[name_1];\n                    result._styles.set(name_1, style);\n                }\n                result._dialogues = obj._dialogues;\n                result._attachments = obj._attachments;\n                result._stylesFormatSpecifier = obj._stylesFormatSpecifier;\n                result._dialoguesFormatSpecifier = obj._dialoguesFormatSpecifier;\n                return result;\n            };\n            Object.defineProperty(ASS.prototype, \"properties\", {\n                /**\n                 * The properties of this script.\n                 *\n                 * @type {!libjass.ScriptProperties}\n                 */\n                get: function () {\n                    return this._properties;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ASS.prototype, \"styles\", {\n                /**\n                 * The styles in this script.\n                 *\n                 * @type {!Map.<string, !libjass.Style>}\n                 */\n                get: function () {\n                    return this._styles;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ASS.prototype, \"dialogues\", {\n                /**\n                 * The dialogues in this script.\n                 *\n                 * @type {!Array.<!libjass.Dialogue>}\n                 */\n                get: function () {\n                    return this._dialogues;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ASS.prototype, \"attachments\", {\n                /**\n                 * The attachments of this script.\n                 *\n                 * @type {!Array.<!libjass.Attachment>}\n                 */\n                get: function () {\n                    return this._attachments;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ASS.prototype, \"stylesFormatSpecifier\", {\n                /**\n                 * The format specifier for the styles section.\n                 *\n                 * @type {Array.<string>}\n                 */\n                get: function () {\n                    return this._stylesFormatSpecifier;\n                },\n                /**\n                 * The format specifier for the events section.\n                 *\n                 * @type {Array.<string>}\n                 */\n                set: function (value) {\n                    this._stylesFormatSpecifier = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ASS.prototype, \"dialoguesFormatSpecifier\", {\n                /**\n                 * The format specifier for the styles section.\n                 *\n                 * @type {Array.<string>}\n                 */\n                get: function () {\n                    return this._dialoguesFormatSpecifier;\n                },\n                /**\n                 * The format specifier for the events section.\n                 *\n                 * @type {Array.<string>}\n                 */\n                set: function (value) {\n                    this._dialoguesFormatSpecifier = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Add a style to this ASS script.\n             *\n             * @param {string} line The line from the script that contains the new style.\n             */\n            ASS.prototype.addStyle = function (line) {\n                if (this._stylesFormatSpecifier === null) {\n                    throw new Error(\"stylesFormatSpecifier is not set.\");\n                }\n                var styleLine = misc_5.parseLineIntoTypedTemplate(line, this._stylesFormatSpecifier);\n                if (styleLine === null || styleLine.type !== \"Style\") {\n                    return;\n                }\n                var styleTemplate = styleLine.template;\n                if (settings_3.verboseMode) {\n                    var repr_1 = \"\";\n                    styleTemplate.forEach(function (value, key) {\n                        return repr_1 += key + \" = \" + value + \", \";\n                    });\n                    console.log(\"Read style: \" + repr_1);\n                }\n                // Create the dialogue and add it to the dialogues array\n                var style = new style_1.Style(styleTemplate);\n                this._styles.set(style.name, style);\n            };\n            /**\n             * Add an event to this ASS script.\n             *\n             * @param {string} line The line from the script that contains the new event.\n             */\n            ASS.prototype.addEvent = function (line) {\n                if (this._dialoguesFormatSpecifier === null) {\n                    throw new Error(\"dialoguesFormatSpecifier is not set.\");\n                }\n                var dialogueLine = misc_5.parseLineIntoTypedTemplate(line, this._dialoguesFormatSpecifier);\n                if (dialogueLine === null || dialogueLine.type !== \"Dialogue\") {\n                    return;\n                }\n                var dialogueTemplate = dialogueLine.template;\n                if (settings_3.verboseMode) {\n                    var repr_2 = \"\";\n                    dialogueTemplate.forEach(function (value, key) {\n                        return repr_2 += key + \" = \" + value + \", \";\n                    });\n                    console.log(\"Read dialogue: \" + repr_2);\n                }\n                // Create the dialogue and add it to the dialogues array\n                this.dialogues.push(new dialogue_1.Dialogue(dialogueTemplate, this));\n            };\n            /**\n             * Add an attachment to this ASS script.\n             *\n             * @param {!libjass.Attachment} attachment\n             */\n            ASS.prototype.addAttachment = function (attachment) {\n                this._attachments.push(attachment);\n            };\n            /**\n             * Custom JSON serialization for ASS objects.\n             *\n             * @return {!*}\n             */\n            ASS.prototype.toJSON = function () {\n                var result = Object.create(null);\n                result._properties = this._properties;\n                result._styles = Object.create(null);\n                this._styles.forEach(function (style, name) {\n                    return result._styles[name] = style;\n                });\n                result._dialogues = this._dialogues;\n                result._attachments = this._attachments;\n                result._stylesFormatSpecifier = this._stylesFormatSpecifier;\n                result._dialoguesFormatSpecifier = this._dialoguesFormatSpecifier;\n                result._classTag = ASS.prototype._classTag;\n                return result;\n            };\n            ASS = __decorate([ serialization_7.registerClass ], ASS);\n            return ASS;\n        }();\n        exports.ASS = ASS;\n    });\n    def(\"types/script-properties\", [ \"serialization\" ], function (serialization_6, exports) {\n        /**\n         * This class represents the properties of a {@link libjass.ASS} script.\n         *\n         * @constructor\n         * @memberOf libjass\n         */\n        var ScriptProperties = function () {\n            function ScriptProperties() {}\n            Object.defineProperty(ScriptProperties.prototype, \"resolutionX\", {\n                /**\n                 * The horizontal script resolution.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._resolutionX;\n                },\n                /**\n                 * The horizontal script resolution.\n                 *\n                 * @type {number}\n                 */\n                set: function (value) {\n                    this._resolutionX = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ScriptProperties.prototype, \"resolutionY\", {\n                /**\n                 * The vertical script resolution.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._resolutionY;\n                },\n                /**\n                 * The vertical script resolution.\n                 *\n                 * @type {number}\n                 */\n                set: function (value) {\n                    this._resolutionY = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ScriptProperties.prototype, \"wrappingStyle\", {\n                /**\n                 * The wrap style. One of the {@link libjass.WrappingStyle} constants.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._wrappingStyle;\n                },\n                /**\n                 * The wrap style. One of the {@link libjass.WrappingStyle} constants.\n                 *\n                 * @type {number}\n                 */\n                set: function (value) {\n                    this._wrappingStyle = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ScriptProperties.prototype, \"scaleBorderAndShadow\", {\n                /**\n                 * Whether to scale outline widths and shadow depths from script resolution to video resolution or not. If true, widths and depths are scaled.\n                 *\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._scaleBorderAndShadow;\n                },\n                /**\n                 * Whether to scale outline widths and shadow depths from script resolution to video resolution or not. If true, widths and depths are scaled.\n                 *\n                 * @type {boolean}\n                 */\n                set: function (value) {\n                    this._scaleBorderAndShadow = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            ScriptProperties = __decorate([ serialization_6.registerClass ], ScriptProperties);\n            return ScriptProperties;\n        }();\n        exports.ScriptProperties = ScriptProperties;\n    });\n    def(\"types/dialogue\", [ \"types/misc\", \"parser/parse\", \"parts/index\", \"serialization\", \"settings\", \"utility/map\" ], function (misc_4, parse_2, parts, serialization_5, settings_2, map_7, exports) {\n        /**\n         * This class represents a dialogue in a {@link libjass.ASS} script.\n         *\n         * @param {!Map.<string, string>} template The template object that contains the dialogue's properties. It is a map of the string values read from the ASS file.\n         * @param {string} template[\"Style\"] The name of the default style of this dialogue\n         * @param {string} template[\"Start\"] The start time\n         * @param {string} template[\"End\"] The end time\n         * @param {string} template[\"Layer\"] The layer number\n         * @param {string} template[\"Text\"] The text of this dialogue\n         * @param {!libjass.ASS} ass The ASS object to which this dialogue belongs\n         *\n         * @constructor\n         * @memberOf libjass\n         */\n        var Dialogue = function () {\n            function Dialogue(template, ass) {\n                this._parts = null;\n                this._containsTransformTag = false;\n                {\n                    var normalizedTemplate_2 = new map_7.Map();\n                    template.forEach(function (value, key) {\n                        normalizedTemplate_2.set(key.toLowerCase(), value);\n                    });\n                    template = normalizedTemplate_2;\n                }\n                this._id = ++Dialogue._lastDialogueId;\n                var styleName = template.get(\"style\");\n                if (typeof styleName === \"string\") {\n                    styleName = styleName.replace(/^\\*+/, \"\");\n                    if (styleName.match(/^Default$/i) !== null) {\n                        styleName = \"Default\";\n                    }\n                }\n                var style = styleName !== undefined ? ass.styles.get(styleName) : undefined;\n                if (style === undefined) {\n                    if (settings_2.debugMode) {\n                        console.warn(\"Unrecognized style \" + styleName + '. Falling back to \"Default\"');\n                    }\n                    style = ass.styles.get(\"Default\");\n                    if (style === undefined) {\n                        throw new Error(\"Unrecognized style \" + styleName + '. Could not fall back to \"Default\" style since it doesn\\'t exist.');\n                    }\n                }\n                this._style = style;\n                var start = template.get(\"start\");\n                if (typeof start !== \"string\") {\n                    throw new Error(\"Dialogue start time \" + start + \" is not a string.\");\n                }\n                this._start = toTime(start);\n                var end = template.get(\"end\");\n                if (typeof end !== \"string\") {\n                    throw new Error(\"Dialogue end time \" + end + \" is not a string.\");\n                }\n                this._end = toTime(end);\n                this._layer = Math.max(misc_4.valueOrDefault(template, \"layer\", parseInt, function (value) {\n                    return !isNaN(value);\n                }, \"0\"), 0);\n                var text = template.get(\"text\");\n                if (typeof text !== \"string\") {\n                    throw new Error(\"Dialogue text \" + text + \" is not a string.\");\n                }\n                this._rawPartsString = text;\n            }\n            Object.defineProperty(Dialogue.prototype, \"id\", {\n                /**\n                 * The unique ID of this dialogue. Auto-generated.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._id;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Dialogue.prototype, \"start\", {\n                /**\n                 * The start time of this dialogue.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._start;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Dialogue.prototype, \"end\", {\n                /**\n                 * The end time of this dialogue.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._end;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Dialogue.prototype, \"style\", {\n                /**\n                 * The default style of this dialogue.\n                 *\n                 * @type {!libjass.Style}\n                 */\n                get: function () {\n                    return this._style;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Dialogue.prototype, \"alignment\", {\n                /**\n                 * The alignment number of this dialogue.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    if (this._parts === null) {\n                        this._parsePartsString();\n                    }\n                    return this._alignment;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Dialogue.prototype, \"layer\", {\n                /**\n                 * The layer number of this dialogue.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._layer;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Dialogue.prototype, \"parts\", {\n                /**\n                 * The {@link libjass.parts} of this dialogue.\n                 *\n                 * @type {!Array.<!libjass.parts.Part>}\n                 */\n                get: function () {\n                    if (this._parts === null) {\n                        this._parsePartsString();\n                    }\n                    return this._parts;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Dialogue.prototype, \"containsTransformTag\", {\n                /**\n                 * Convenience getter for whether this dialogue contains a {\\t} tag.\n                 *\n                 * @type {boolean}\n                 */\n                get: function () {\n                    if (this._parts === null) {\n                        this._parsePartsString();\n                    }\n                    return this._containsTransformTag;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * @return {string} A simple representation of this dialogue's properties and parts.\n             */\n            Dialogue.prototype.toString = function () {\n                return \"#\" + this._id + \" [\" + this._start.toFixed(3) + \"-\" + this._end.toFixed(3) + \"] \" + (this._parts !== null ? this._parts.join(\", \") : this._rawPartsString);\n            };\n            /**\n             * Parses this dialogue's parts from the raw parts string.\n             *\n             * @private\n             */\n            Dialogue.prototype._parsePartsString = function () {\n                var _this = this;\n                this._parts = parse_2.parse(this._rawPartsString, \"dialogueParts\");\n                this._alignment = this._style.alignment;\n                this._parts.forEach(function (part, index) {\n                    if (part instanceof parts.Alignment) {\n                        _this._alignment = part.value;\n                    } else if (part instanceof parts.Move) {\n                        if (part.t1 === null || part.t2 === null) {\n                            _this._parts[index] = new parts.Move(part.x1, part.y1, part.x2, part.y2, 0, _this._end - _this._start);\n                        }\n                    } else if (part instanceof parts.Transform) {\n                        if (part.start === null || part.end === null || part.accel === null) {\n                            _this._parts[index] = new parts.Transform(part.start === null ? 0 : part.start, part.end === null ? _this._end - _this._start : part.end, part.accel === null ? 1 : part.accel, part.tags);\n                        }\n                        _this._containsTransformTag = true;\n                    }\n                });\n                if (settings_2.debugMode) {\n                    var possiblyIncorrectParses = this._parts.filter(function (part) {\n                        return part instanceof parts.Comment && part.value.indexOf(\"\\\\\") !== -1;\n                    });\n                    if (possiblyIncorrectParses.length > 0) {\n                        console.warn(\"Possible incorrect parse:\\n\" + this._rawPartsString + \"\\nwas parsed as\\n\" + this.toString() + \"\\nThe possibly incorrect parses are:\\n\" + possiblyIncorrectParses.join(\"\\n\"));\n                    }\n                }\n            };\n            Dialogue._lastDialogueId = -1;\n            Dialogue = __decorate([ serialization_5.registerClass ], Dialogue);\n            return Dialogue;\n        }();\n        exports.Dialogue = Dialogue;\n        /**\n         * Converts this string into the number of seconds it represents. This string must be in the form of hh:mm:ss.MMM\n         *\n         * @param {string} str\n         * @return {number}\n         *\n         * @private\n         */\n        function toTime(str) {\n            return str.split(\":\").reduce(function (previousValue, currentValue) {\n                return previousValue * 60 + parseFloat(currentValue);\n            }, 0);\n        }\n    });\n    def(\"types/style\", [ \"parser/parse\", \"serialization\", \"utility/map\", \"types/misc\" ], function (parse_1, serialization_4, map_6, misc_3, exports) {\n        /**\n         * This class represents a single global style declaration in a {@link libjass.ASS} script. The styles can be obtained via the {@link libjass.ASS.styles} property.\n         *\n         * @param {!Map.<string, string>} template The template object that contains the style's properties. It is a map of the string values read from the ASS file.\n         * @param {string} template[\"Name\"] The name of the style\n         * @param {string} template[\"Italic\"] -1 if the style is italicized\n         * @param {string} template[\"Bold\"] -1 if the style is bold\n         * @param {string} template[\"Underline\"] -1 if the style is underlined\n         * @param {string} template[\"StrikeOut\"] -1 if the style is struck-through\n         * @param {string} template[\"Fontname\"] The name of the font\n         * @param {string} template[\"Fontsize\"] The size of the font\n         * @param {string} template[\"ScaleX\"] The horizontal scaling of the font\n         * @param {string} template[\"ScaleY\"] The vertical scaling of the font\n         * @param {string} template[\"Spacing\"] The letter spacing of the font\n         * @param {string} template[\"PrimaryColour\"] The primary color\n         * @param {string} template[\"OutlineColour\"] The outline color\n         * @param {string} template[\"BackColour\"] The shadow color\n         * @param {string} template[\"Outline\"] The outline thickness\n         * @param {string} template[\"Shadow\"] The shadow depth\n         * @param {string} template[\"Alignment\"] The alignment number\n         * @param {string} template[\"MarginL\"] The left margin\n         * @param {string} template[\"MarginR\"] The right margin\n         * @param {string} template[\"MarginV\"] The vertical margin\n         *\n         * @constructor\n         * @memberOf libjass\n         */\n        var Style = function () {\n            function Style(template) {\n                {\n                    var normalizedTemplate_1 = new map_6.Map();\n                    template.forEach(function (value, key) {\n                        normalizedTemplate_1.set(key.toLowerCase(), value);\n                    });\n                    template = normalizedTemplate_1;\n                }\n                var name = template.get(\"name\");\n                if (typeof name !== \"string\") {\n                    throw new Error(\"Style name \" + name + \" is not a string.\");\n                }\n                this._name = name.replace(/^\\*+/, \"\");\n                this._italic = !!misc_3.valueOrDefault(template, \"italic\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"0\");\n                this._bold = !!misc_3.valueOrDefault(template, \"bold\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"0\");\n                this._underline = !!misc_3.valueOrDefault(template, \"underline\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"0\");\n                this._strikeThrough = !!misc_3.valueOrDefault(template, \"strikeout\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"0\");\n                this._fontName = misc_3.valueOrDefault(template, \"fontname\", function (str) {\n                    return str;\n                }, function (value) {\n                    return value.constructor === String;\n                }, \"sans-serif\");\n                this._fontSize = misc_3.valueOrDefault(template, \"fontsize\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"18\");\n                this._fontScaleX = misc_3.valueOrDefault(template, \"scalex\", parseFloat, function (value) {\n                    return value >= 0;\n                }, \"100\") / 100;\n                this._fontScaleY = misc_3.valueOrDefault(template, \"scaley\", parseFloat, function (value) {\n                    return value >= 0;\n                }, \"100\") / 100;\n                this._letterSpacing = misc_3.valueOrDefault(template, \"spacing\", parseFloat, function (value) {\n                    return value >= 0;\n                }, \"0\");\n                this._rotationZ = misc_3.valueOrDefault(template, \"angle\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"0\");\n                this._primaryColor = misc_3.valueOrDefault(template, \"primarycolour\", function (str) {\n                    return parse_1.parse(str, \"colorWithAlpha\");\n                }, null, \"&H00FFFFFF\");\n                this._secondaryColor = misc_3.valueOrDefault(template, \"secondarycolour\", function (str) {\n                    return parse_1.parse(str, \"colorWithAlpha\");\n                }, null, \"&H00FFFF00\");\n                this._outlineColor = misc_3.valueOrDefault(template, \"outlinecolour\", function (str) {\n                    return parse_1.parse(str, \"colorWithAlpha\");\n                }, null, \"&H00000000\");\n                this._shadowColor = misc_3.valueOrDefault(template, \"backcolour\", function (str) {\n                    return parse_1.parse(str, \"colorWithAlpha\");\n                }, null, \"&H80000000\");\n                this._outlineThickness = misc_3.valueOrDefault(template, \"outline\", parseFloat, function (value) {\n                    return value >= 0;\n                }, \"2\");\n                this._borderStyle = misc_3.valueOrDefault(template, \"borderstyle\", parseInt, function (value) {\n                    return misc_3.BorderStyle[misc_3.BorderStyle[value]] === value;\n                }, \"1\");\n                this._shadowDepth = misc_3.valueOrDefault(template, \"shadow\", parseFloat, function (value) {\n                    return value >= 0;\n                }, \"3\");\n                this._alignment = misc_3.valueOrDefault(template, \"alignment\", parseInt, function (value) {\n                    return value >= 1 && value <= 9;\n                }, \"2\");\n                this._marginLeft = misc_3.valueOrDefault(template, \"marginl\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"20\");\n                this._marginRight = misc_3.valueOrDefault(template, \"marginr\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"20\");\n                this._marginVertical = misc_3.valueOrDefault(template, \"marginv\", parseFloat, function (value) {\n                    return !isNaN(value);\n                }, \"20\");\n            }\n            Object.defineProperty(Style.prototype, \"name\", {\n                /**\n                 * The name of this style.\n                 *\n                 * @type {string}\n                 */\n                get: function () {\n                    return this._name;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"italic\", {\n                /**\n                 * Whether this style is italicized or not.\n                 *\n                 * @type {string}\n                 */\n                get: function () {\n                    return this._italic;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"bold\", {\n                /**\n                 * Whether this style is bold or not.\n                 *\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._bold;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"underline\", {\n                /**\n                 * Whether this style is underlined or not.\n                 *\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._underline;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"strikeThrough\", {\n                /**\n                 * Whether this style is struck-through or not.\n                 *\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._strikeThrough;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"fontName\", {\n                /**\n                 * The name of this style's font.\n                 *\n                 * @type {string}\n                 */\n                get: function () {\n                    return this._fontName;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"fontSize\", {\n                /**\n                 * The size of this style's font.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._fontSize;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"fontScaleX\", {\n                /**\n                 * The horizontal scaling of this style's font.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._fontScaleX;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"fontScaleY\", {\n                /**\n                 * The vertical scaling of this style's font.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._fontScaleY;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"letterSpacing\", {\n                /**\n                 * The letter spacing scaling of this style's font.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._letterSpacing;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"rotationZ\", {\n                /**\n                 * The default Z-rotation of this style.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._rotationZ;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"primaryColor\", {\n                /**\n                 * The color of this style's font.\n                 *\n                 * @type {!libjass.parts.Color}\n                 */\n                get: function () {\n                    return this._primaryColor;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"secondaryColor\", {\n                /**\n                 * The alternate color of this style's font, used in karaoke.\n                 *\n                 * @type {!libjass.parts.Color}\n                 */\n                get: function () {\n                    return this._secondaryColor;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"outlineColor\", {\n                /**\n                 * The color of this style's outline.\n                 *\n                 * @type {!libjass.parts.Color}\n                 */\n                get: function () {\n                    return this._outlineColor;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"shadowColor\", {\n                /**\n                 * The color of this style's shadow.\n                 *\n                 * @type {!libjass.parts.Color}\n                 */\n                get: function () {\n                    return this._shadowColor;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"outlineThickness\", {\n                /**\n                 * The thickness of this style's outline.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._outlineThickness;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"borderStyle\", {\n                /**\n                 * The border style of this style.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._borderStyle;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"shadowDepth\", {\n                /**\n                 * The depth of this style's shadow.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._shadowDepth;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"alignment\", {\n                /**\n                 * The alignment of dialogues of this style.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._alignment;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"marginLeft\", {\n                /**\n                 * The left margin of dialogues of this style.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._marginLeft;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"marginRight\", {\n                /**\n                 * The right margin of dialogues of this style.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._marginRight;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Style.prototype, \"marginVertical\", {\n                /**\n                 * The vertical margin of dialogues of this style.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._marginVertical;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Style = __decorate([ serialization_4.registerClass ], Style);\n            return Style;\n        }();\n        exports.Style = Style;\n    });\n    def(\"types/attachment\", [ \"serialization\" ], function (serialization_3, exports) {\n        /**\n         * The type of an attachment.\n         *\n         * @enum\n         * @memberOf libjass\n         */\n        (function (AttachmentType) {\n            AttachmentType[AttachmentType[\"Font\"] = 0] = \"Font\";\n            AttachmentType[AttachmentType[\"Graphic\"] = 1] = \"Graphic\";\n        })(exports.AttachmentType || (exports.AttachmentType = {}));\n        /**\n         * This class represents an attachment in a {@link libjass.ASS} script.\n         *\n         * @param {string} filename The filename of this attachment.\n         * @param {number} type The type of this attachment.\n         *\n         * @constructor\n         * @memberOf libjass\n         */\n        var Attachment = function () {\n            function Attachment(filename, type) {\n                this._filename = filename;\n                this._type = type;\n                this._contents = \"\";\n            }\n            Object.defineProperty(Attachment.prototype, \"filename\", {\n                /**\n                 * The filename of this attachment.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._filename;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Attachment.prototype, \"type\", {\n                /**\n                 * The type of this attachment.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._type;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Attachment.prototype, \"contents\", {\n                /**\n                 * The contents of this attachment in base64 encoding.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._contents;\n                },\n                /**\n                 * The contents of this attachment in base64 encoding.\n                 *\n                 * @type {number}\n                 */\n                set: function (value) {\n                    this._contents = value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Attachment = __decorate([ serialization_3.registerClass ], Attachment);\n            return Attachment;\n        }();\n        exports.Attachment = Attachment;\n    });\n    def(\"parser/misc\", [ \"utility/map\" ], function (map_5, exports) {\n        /**\n         * Parses a line into a {@link ./types/misc.Property}.\n         *\n         * @param {string} line\n         * @return {Property}\n         */\n        function parseLineIntoProperty(line) {\n            var colonPos = line.indexOf(\":\");\n            if (colonPos === -1) {\n                return null;\n            }\n            var name = line.substr(0, colonPos);\n            var value = line.substr(colonPos + 1).replace(/^\\s+/, \"\");\n            return {\n                name: name,\n                value: value\n            };\n        }\n        exports.parseLineIntoProperty = parseLineIntoProperty;\n        /**\n         * Parses a line into a {@link ./types/misc.TypedTemplate} according to the given format specifier.\n         *\n         * @param {string} line\n         * @param {!Array.<string>} formatSpecifier\n         * @return {TypedTemplate}\n         */\n        function parseLineIntoTypedTemplate(line, formatSpecifier) {\n            var property = parseLineIntoProperty(line);\n            if (property === null) {\n                return null;\n            }\n            var value = property.value.split(\",\");\n            if (value.length > formatSpecifier.length) {\n                value[formatSpecifier.length - 1] = value.slice(formatSpecifier.length - 1).join(\",\");\n            }\n            var template = new map_5.Map();\n            formatSpecifier.forEach(function (formatKey, index) {\n                template.set(formatKey, value[index]);\n            });\n            return {\n                type: property.name,\n                template: template\n            };\n        }\n        exports.parseLineIntoTypedTemplate = parseLineIntoTypedTemplate;\n    });\n    def(\"parser/streams\", [ \"utility/promise\" ], function (promise_3, exports) {\n        /**\n         * A {@link libjass.parser.Stream} that reads from a string in memory.\n         *\n         * @param {string} str The string\n         *\n         * @constructor\n         * @implements {libjass.parser.Stream}\n         * @memberOf libjass.parser\n         */\n        var StringStream = function () {\n            function StringStream(str) {\n                this._str = str;\n                this._readTill = 0;\n            }\n            /**\n             * @return {!Promise.<?string>} A promise that will be resolved with the next line, or null if the string has been completely read.\n             */\n            StringStream.prototype.nextLine = function () {\n                var result;\n                if (this._readTill < this._str.length) {\n                    var nextNewLinePos = this._str.indexOf(\"\\n\", this._readTill);\n                    if (nextNewLinePos !== -1) {\n                        result = promise_3.Promise.resolve(this._str.substring(this._readTill, nextNewLinePos));\n                        this._readTill = nextNewLinePos + 1;\n                    } else {\n                        result = promise_3.Promise.resolve(this._str.substr(this._readTill));\n                        this._readTill = this._str.length;\n                    }\n                } else {\n                    result = promise_3.Promise.resolve(null);\n                }\n                return result;\n            };\n            return StringStream;\n        }();\n        exports.StringStream = StringStream;\n        /**\n         * A {@link libjass.parser.Stream} that reads from an XMLHttpRequest object.\n         *\n         * @param {!XMLHttpRequest} xhr The XMLHttpRequest object. Make sure to not call .open() on this object before passing it in here,\n         * since event handlers cannot be registered after open() has been called.\n         *\n         * @constructor\n         * @implements {libjass.parser.Stream}\n         * @memberOf libjass.parser\n         */\n        var XhrStream = function () {\n            function XhrStream(xhr) {\n                var _this = this;\n                this._xhr = xhr;\n                this._readTill = 0;\n                this._pendingDeferred = null;\n                this._failedError = null;\n                xhr.addEventListener(\"progress\", function () {\n                    return _this._onXhrProgress();\n                }, false);\n                xhr.addEventListener(\"load\", function () {\n                    return _this._onXhrLoad();\n                }, false);\n                xhr.addEventListener(\"error\", function (event) {\n                    return _this._onXhrError(event);\n                }, false);\n            }\n            /**\n             * @return {!Promise.<?string>} A promise that will be resolved with the next line, or null if the stream is exhausted.\n             */\n            XhrStream.prototype.nextLine = function () {\n                if (this._pendingDeferred !== null) {\n                    throw new Error(\"XhrStream only supports one pending unfulfilled read at a time.\");\n                }\n                var deferred = this._pendingDeferred = new promise_3.DeferredPromise();\n                this._tryResolveNextLine();\n                return deferred.promise;\n            };\n            /**\n             * @private\n             */\n            XhrStream.prototype._onXhrProgress = function () {\n                if (this._pendingDeferred === null) {\n                    return;\n                }\n                if (this._xhr.readyState === XMLHttpRequest.DONE) {\n                    /* Suppress resolving next line here. Let the \"load\" or \"error\" event handlers do it.\n                     *\n                     * This is required because a failed XHR fires the progress event with readyState === DONE before it fires the error event.\n                     * This would confuse _tryResolveNextLine() into thinking the request succeeded with no data if it was called here.\n                     */\n                    return;\n                }\n                this._tryResolveNextLine();\n            };\n            /**\n             * @private\n             */\n            XhrStream.prototype._onXhrLoad = function () {\n                if (this._pendingDeferred === null) {\n                    return;\n                }\n                this._tryResolveNextLine();\n            };\n            /**\n             * @param {!ErrorEvent} event\n             *\n             * @private\n             */\n            XhrStream.prototype._onXhrError = function (event) {\n                this._failedError = event;\n                if (this._pendingDeferred === null) {\n                    return;\n                }\n                this._tryResolveNextLine();\n            };\n            /**\n             * @private\n             */\n            XhrStream.prototype._tryResolveNextLine = function () {\n                if (this._failedError !== null) {\n                    this._pendingDeferred.reject(this._failedError);\n                    return;\n                }\n                var response = this._xhr.responseText;\n                var nextNewLinePos = response.indexOf(\"\\n\", this._readTill);\n                if (nextNewLinePos !== -1) {\n                    this._pendingDeferred.resolve(response.substring(this._readTill, nextNewLinePos));\n                    this._readTill = nextNewLinePos + 1;\n                    this._pendingDeferred = null;\n                } else if (this._xhr.readyState === XMLHttpRequest.DONE) {\n                    // No more data. This is the last line.\n                    if (this._readTill < response.length) {\n                        this._pendingDeferred.resolve(response.substr(this._readTill));\n                        this._readTill = response.length;\n                    } else {\n                        this._pendingDeferred.resolve(null);\n                    }\n                    this._pendingDeferred = null;\n                }\n            };\n            return XhrStream;\n        }();\n        exports.XhrStream = XhrStream;\n        /**\n         * A {@link libjass.parser.Stream} that reads from a ReadableStream object.\n         *\n         * @param {!ReadableStream} stream\n         * @param {string} encoding\n         *\n         * @constructor\n         * @implements {libjass.parser.Stream}\n         * @memberOf libjass.parser\n         */\n        var BrowserReadableStream = function () {\n            function BrowserReadableStream(stream, encoding) {\n                this._buffer = \"\";\n                this._pendingDeferred = null;\n                this._reader = stream.getReader();\n                this._decoder = new global.TextDecoder(encoding, {\n                    ignoreBOM: true\n                });\n            }\n            /**\n             * @return {boolean} Whether BrowserReadableStream is supported in this environment.\n             *\n             * @static\n             */\n            BrowserReadableStream.isSupported = function () {\n                return global.ReadableStream !== undefined && typeof global.ReadableStream.prototype.getReader === \"function\" && typeof global.TextDecoder === \"function\";\n            };\n            /**\n             * @return {!Promise.<?string>} A promise that will be resolved with the next line, or null if the stream is exhausted.\n             */\n            BrowserReadableStream.prototype.nextLine = function () {\n                if (this._pendingDeferred !== null) {\n                    throw new Error(\"BrowserReadableStream only supports one pending unfulfilled read at a time.\");\n                }\n                var deferred = this._pendingDeferred = new promise_3.DeferredPromise();\n                this._tryResolveNextLine();\n                return deferred.promise;\n            };\n            /**\n             * @private\n             */\n            BrowserReadableStream.prototype._tryResolveNextLine = function () {\n                var _this = this;\n                var nextNewLinePos = this._buffer.indexOf(\"\\n\");\n                if (nextNewLinePos !== -1) {\n                    this._pendingDeferred.resolve(this._buffer.substr(0, nextNewLinePos));\n                    this._buffer = this._buffer.substr(nextNewLinePos + 1);\n                    this._pendingDeferred = null;\n                } else {\n                    this._reader.read().then(function (next) {\n                        var value = next.value;\n                        var done = next.done;\n                        if (!done) {\n                            _this._buffer += _this._decoder.decode(value, {\n                                stream: true\n                            });\n                            _this._tryResolveNextLine();\n                        } else {\n                            // No more data.\n                            if (_this._buffer.length === 0) {\n                                _this._pendingDeferred.resolve(null);\n                            } else {\n                                _this._pendingDeferred.resolve(_this._buffer);\n                                _this._buffer = \"\";\n                            }\n                            _this._pendingDeferred = null;\n                        }\n                    });\n                }\n            };\n            return BrowserReadableStream;\n        }();\n        exports.BrowserReadableStream = BrowserReadableStream;\n    });\n    def(\"parser/parse\", [ \"parts/index\", \"settings\", \"utility/map\", \"utility/promise\", \"webworker/commands\", \"webworker/misc\" ], function (parts, settings_1, map_4, promise_2, commands_3, misc_2, exports) {\n        var rules = new map_4.Map();\n        /**\n         * Parses a given string with the specified rule.\n         *\n         * @param {string} input The string to be parsed.\n         * @param {string} rule The rule to parse the string with\n         * @return {*} The value returned depends on the rule used.\n         *\n         * @memberOf libjass.parser\n         */\n        function parse(input, rule) {\n            var result = new ParserRun(input, rule).result;\n            if (result === null || result.end !== input.length) {\n                if (settings_1.debugMode) {\n                    console.error(\"Parse failed. %s %s %o\", rule, input, result);\n                }\n                throw new Error(\"Parse failed.\");\n            }\n            return result.value;\n        }\n        exports.parse = parse;\n        /**\n         * This class represents a single parse node. It has a start and end position, and an optional value object.\n         *\n         * @param {ParseNode} parent The parent of this parse node.\n         * @param {*=null} value If provided, it is assigned as the value of the node.\n         *\n         * @constructor\n         * @private\n         */\n        var ParseNode = function () {\n            function ParseNode(parent, value) {\n                if (value === void 0) {\n                    value = null;\n                }\n                this._parent = parent;\n                this._children = [];\n                if (parent !== null) {\n                    parent.children.push(this);\n                }\n                this._start = parent !== null ? parent.end : 0;\n                this._end = this._start;\n                this.value = value;\n            }\n            Object.defineProperty(ParseNode.prototype, \"start\", {\n                /**\n                 * The start position of this parse node.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._start;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ParseNode.prototype, \"end\", {\n                /**\n                 * The end position of this parse node.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._end;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ParseNode.prototype, \"parent\", {\n                /**\n                 * @type {ParseNode}\n                 */\n                get: function () {\n                    return this._parent;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ParseNode.prototype, \"children\", {\n                /**\n                 * @type {!Array.<!ParseNode>}\n                 */\n                get: function () {\n                    return this._children;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ParseNode.prototype, \"value\", {\n                /**\n                 * An optional object associated with this parse node.\n                 *\n                 * @type {*}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                /**\n                 * An optional object associated with this parse node.\n                 *\n                 * If the value is a string, then the end property is updated to be the length of the string.\n                 *\n                 * @type {*}\n                 */\n                set: function (newValue) {\n                    this._value = newValue;\n                    if (this._value !== null && this._value.constructor === String && this._children.length === 0) {\n                        this._setEnd(this._start + this._value.length);\n                    }\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Removes the last child of this node and updates the end position to be end position of the new last child.\n             */\n            ParseNode.prototype.pop = function () {\n                this._children.splice(this._children.length - 1, 1);\n                if (this._children.length > 0) {\n                    this._setEnd(this._children[this._children.length - 1].end);\n                } else {\n                    this._setEnd(this.start);\n                }\n            };\n            /**\n             * Updates the end property of this node and its parent recursively to the root node.\n             *\n             * @param {number} newEnd\n             *\n             * @private\n             */\n            ParseNode.prototype._setEnd = function (newEnd) {\n                this._end = newEnd;\n                if (this._parent !== null && this._parent.end !== this._end) {\n                    this._parent._setEnd(this._end);\n                }\n            };\n            return ParseNode;\n        }();\n        /**\n         * This class represents a single run of the parser.\n         *\n         * @param {string} input\n         * @param {string} rule\n         *\n         * @constructor\n         * @private\n         */\n        var ParserRun = function () {\n            function ParserRun(input, rule) {\n                this._input = input;\n                var ruleFunction = rules.get(rule);\n                if (ruleFunction === undefined) {\n                    throw new Error(\"Could not find parser rule named \" + rule);\n                }\n                this._parseTree = new ParseNode(null);\n                this._result = ruleFunction.call(this, this._parseTree);\n            }\n            Object.defineProperty(ParserRun.prototype, \"result\", {\n                /**\n                 * @type {ParseNode}\n                 */\n                get: function () {\n                    return this._result;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_dialogueParts = function (parent) {\n                var _a;\n                var current = new ParseNode(parent);\n                current.value = [];\n                while (this._haveMore()) {\n                    var enclosedTagsNode = this.parse_enclosedTags(current);\n                    if (enclosedTagsNode !== null) {\n                        (_a = current.value).push.apply(_a, enclosedTagsNode.value);\n                    } else {\n                        var whiteSpaceOrTextNode = this.parse_newline(current) || this.parse_soft_newline(current) || this.parse_hardspace(current) || this.parse_text(current);\n                        if (whiteSpaceOrTextNode.value instanceof parts.Text && current.value[current.value.length - 1] instanceof parts.Text) {\n                            // Merge consecutive text parts into one part\n                            var previousTextPart = current.value[current.value.length - 1];\n                            current.value[current.value.length - 1] = new parts.Text(previousTextPart.value + whiteSpaceOrTextNode.value.value);\n                        } else {\n                            current.value.push(whiteSpaceOrTextNode.value);\n                        }\n                    }\n                }\n                var inDrawingMode = false;\n                current.value.forEach(function (part, i) {\n                    if (part instanceof parts.DrawingMode) {\n                        inDrawingMode = part.scale !== 0;\n                    } else if (part instanceof parts.Text && inDrawingMode) {\n                        current.value[i] = new parts.DrawingInstructions(parse(part.value, \"drawingInstructions\"));\n                    }\n                });\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_enclosedTags = function (parent) {\n                var current = new ParseNode(parent);\n                current.value = [];\n                if (this.read(current, \"{\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                for (var next = this._peek(); this._haveMore() && next !== \"}\"; next = this._peek()) {\n                    var childNode = null;\n                    if (this.read(current, \"\\\\\") !== null) {\n                        childNode = this.parse_tag_alpha(current) || this.parse_tag_iclip(current) || this.parse_tag_xbord(current) || this.parse_tag_ybord(current) || this.parse_tag_xshad(current) || this.parse_tag_yshad(current) || this.parse_tag_blur(current) || this.parse_tag_bord(current) || this.parse_tag_clip(current) || this.parse_tag_fade(current) || this.parse_tag_fscx(current) || this.parse_tag_fscy(current) || this.parse_tag_move(current) || this.parse_tag_shad(current) || this.parse_tag_fad(current) || this.parse_tag_fax(current) || this.parse_tag_fay(current) || this.parse_tag_frx(current) || this.parse_tag_fry(current) || this.parse_tag_frz(current) || this.parse_tag_fsp(current) || this.parse_tag_fsplus(current) || this.parse_tag_fsminus(current) || this.parse_tag_org(current) || this.parse_tag_pbo(current) || this.parse_tag_pos(current) || this.parse_tag_an(current) || this.parse_tag_be(current) || this.parse_tag_fn(current) || this.parse_tag_fr(current) || this.parse_tag_fs(current) || this.parse_tag_kf(current) || this.parse_tag_ko(current) || this.parse_tag_1a(current) || this.parse_tag_1c(current) || this.parse_tag_2a(current) || this.parse_tag_2c(current) || this.parse_tag_3a(current) || this.parse_tag_3c(current) || this.parse_tag_4a(current) || this.parse_tag_4c(current) || this.parse_tag_a(current) || this.parse_tag_b(current) || this.parse_tag_c(current) || this.parse_tag_i(current) || this.parse_tag_k(current) || this.parse_tag_K(current) || this.parse_tag_p(current) || this.parse_tag_q(current) || this.parse_tag_r(current) || this.parse_tag_s(current) || this.parse_tag_t(current) || this.parse_tag_u(current);\n                        if (childNode === null) {\n                            current.pop();\n                        }\n                    }\n                    if (childNode === null) {\n                        childNode = this.parse_comment(current);\n                    }\n                    if (childNode.value instanceof parts.Comment && current.value[current.value.length - 1] instanceof parts.Comment) {\n                        // Merge consecutive comment parts into one part\n                        current.value[current.value.length - 1] = new parts.Comment(current.value[current.value.length - 1].value + childNode.value.value);\n                    } else {\n                        current.value.push(childNode.value);\n                    }\n                }\n                if (this.read(current, \"}\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_newline = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"\\\\N\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.NewLine();\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_soft_newline = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"\\\\n\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.SoftNewLine();\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_hardspace = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"\\\\h\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.Text(\"\\xa0\");\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_text = function (parent) {\n                var value = this._peek();\n                var current = new ParseNode(parent);\n                var valueNode = new ParseNode(current, value);\n                current.value = new parts.Text(valueNode.value);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_comment = function (parent) {\n                var value = this._peek();\n                var current = new ParseNode(parent);\n                var valueNode = new ParseNode(current, value);\n                current.value = new parts.Comment(valueNode.value);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_a = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"a\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var next = this._peek();\n                switch (next) {\n                  case \"1\":\n                    var next2 = this._peek(2);\n                    switch (next2) {\n                      case \"10\":\n                      case \"11\":\n                        next = next2;\n                        break;\n                    }\n                    break;\n\n                  case \"2\":\n                  case \"3\":\n                  case \"5\":\n                  case \"6\":\n                  case \"7\":\n                  case \"9\":\n                    break;\n\n                  default:\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = new ParseNode(current, next);\n                var value = -1;\n                switch (valueNode.value) {\n                  case \"1\":\n                    value = 1;\n                    break;\n\n                  case \"2\":\n                    value = 2;\n                    break;\n\n                  case \"3\":\n                    value = 3;\n                    break;\n\n                  case \"5\":\n                    value = 7;\n                    break;\n\n                  case \"6\":\n                    value = 8;\n                    break;\n\n                  case \"7\":\n                    value = 9;\n                    break;\n\n                  case \"9\":\n                    value = 4;\n                    break;\n\n                  case \"10\":\n                    value = 5;\n                    break;\n\n                  case \"11\":\n                    value = 6;\n                    break;\n                }\n                current.value = new parts.Alignment(value);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_alpha = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_an = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"an\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var next = this._peek();\n                if (next < \"1\" || next > \"9\") {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = new ParseNode(current, next);\n                current.value = new parts.Alignment(parseInt(valueNode.value));\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_b = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"b\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = null;\n                var next = this._peek();\n                if (next >= \"1\" && next <= \"9\") {\n                    next = this._peek(3);\n                    if (next.substr(1) === \"00\") {\n                        valueNode = new ParseNode(current, next);\n                        valueNode.value = parseInt(valueNode.value);\n                    }\n                }\n                if (valueNode === null) {\n                    valueNode = this.parse_enableDisable(current);\n                }\n                if (valueNode !== null) {\n                    current.value = new parts.Bold(valueNode.value);\n                } else {\n                    current.value = new parts.Bold(null);\n                }\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_be = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_blur = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_bord = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_c = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_clip = function (parent) {\n                return this._parse_tag_clip_or_iclip(\"clip\", parent);\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fad = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"fad\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \"(\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var startNode = this.parse_decimal(current);\n                if (startNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var endNode = this.parse_decimal(current);\n                if (endNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \")\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.Fade(startNode.value / 1e3, endNode.value / 1e3);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fade = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"fade\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \"(\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var a1Node = this.parse_decimal(current);\n                if (a1Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var a2Node = this.parse_decimal(current);\n                if (a2Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var a3Node = this.parse_decimal(current);\n                if (a3Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var t1Node = this.parse_decimal(current);\n                if (t1Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var t2Node = this.parse_decimal(current);\n                if (t2Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var t3Node = this.parse_decimal(current);\n                if (t3Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var t4Node = this.parse_decimal(current);\n                if (t4Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \")\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.ComplexFade(1 - a1Node.value / 255, 1 - a2Node.value / 255, 1 - a3Node.value / 255, t1Node.value / 1e3, t2Node.value / 1e3, t3Node.value / 1e3, t4Node.value / 1e3);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fax = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fay = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fn = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"fn\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = new ParseNode(current, \"\");\n                for (var next = this._peek(); this._haveMore() && next !== \"\\\\\" && next !== \"}\"; next = this._peek()) {\n                    valueNode.value += next;\n                }\n                if (valueNode.value.length > 0) {\n                    current.value = new parts.FontName(valueNode.value);\n                } else {\n                    current.value = new parts.FontName(null);\n                }\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fr = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_frx = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fry = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_frz = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fs = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fsplus = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"fs+\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = this.parse_decimal(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.FontSizePlus(valueNode.value / 10);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fsminus = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"fs-\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = this.parse_decimal(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.FontSizeMinus(valueNode.value / 10);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fscx = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"fscx\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = this.parse_decimal(current);\n                if (valueNode !== null) {\n                    current.value = new parts.FontScaleX(valueNode.value / 100);\n                } else {\n                    current.value = new parts.FontScaleX(null);\n                }\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fscy = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"fscy\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = this.parse_decimal(current);\n                if (valueNode !== null) {\n                    current.value = new parts.FontScaleY(valueNode.value / 100);\n                } else {\n                    current.value = new parts.FontScaleY(null);\n                }\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_fsp = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_i = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_iclip = function (parent) {\n                return this._parse_tag_clip_or_iclip(\"iclip\", parent);\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_k = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"k\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = this.parse_decimal(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.ColorKaraoke(valueNode.value / 100);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_K = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"K\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = this.parse_decimal(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.SweepingColorKaraoke(valueNode.value / 100);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_kf = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"kf\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = this.parse_decimal(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.SweepingColorKaraoke(valueNode.value / 100);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_ko = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"ko\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = this.parse_decimal(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.OutlineKaraoke(valueNode.value / 100);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_move = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"move\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \"(\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var x1Node = this.parse_decimal(current);\n                if (x1Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var y1Node = this.parse_decimal(current);\n                if (y1Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var x2Node = this.parse_decimal(current);\n                if (x2Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var y2Node = this.parse_decimal(current);\n                if (y2Node === null) {\n                    parent.pop();\n                    return null;\n                }\n                var t1Node = null;\n                var t2Node = null;\n                if (this.read(current, \",\") !== null) {\n                    t1Node = this.parse_decimal(current);\n                    if (t1Node === null) {\n                        parent.pop();\n                        return null;\n                    }\n                    if (this.read(current, \",\") === null) {\n                        parent.pop();\n                        return null;\n                    }\n                    t2Node = this.parse_decimal(current);\n                    if (t2Node === null) {\n                        parent.pop();\n                        return null;\n                    }\n                }\n                if (this.read(current, \")\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.Move(x1Node.value, y1Node.value, x2Node.value, y2Node.value, t1Node !== null ? t1Node.value / 1e3 : null, t2Node !== null ? t2Node.value / 1e3 : null);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_org = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"org\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \"(\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var xNode = this.parse_decimal(current);\n                if (xNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var yNode = this.parse_decimal(current);\n                if (yNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \")\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.RotationOrigin(xNode.value, yNode.value);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_p = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_pbo = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_pos = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"pos\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \"(\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var xNode = this.parse_decimal(current);\n                if (xNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \",\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var yNode = this.parse_decimal(current);\n                if (yNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \")\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = new parts.Position(xNode.value, yNode.value);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_q = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"q\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var next = this._peek();\n                if (next < \"0\" || next > \"3\") {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = new ParseNode(current, next);\n                current.value = new parts.WrappingStyle(parseInt(valueNode.value));\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_r = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"r\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = new ParseNode(current, \"\");\n                for (var next = this._peek(); this._haveMore() && next !== \"\\\\\" && next !== \"}\"; next = this._peek()) {\n                    valueNode.value += next;\n                }\n                if (valueNode.value.length > 0) {\n                    current.value = new parts.Reset(valueNode.value);\n                } else {\n                    current.value = new parts.Reset(null);\n                }\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_s = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_shad = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_t = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, \"t\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \"(\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var startNode = null;\n                var endNode = null;\n                var accelNode = null;\n                var firstNode = this.parse_decimal(current);\n                if (firstNode !== null) {\n                    if (this.read(current, \",\") === null) {\n                        parent.pop();\n                        return null;\n                    }\n                    var secondNode = this.parse_decimal(current);\n                    if (secondNode !== null) {\n                        startNode = firstNode;\n                        endNode = secondNode;\n                        if (this.read(current, \",\") === null) {\n                            parent.pop();\n                            return null;\n                        }\n                        var thirdNode = this.parse_decimal(current);\n                        if (thirdNode !== null) {\n                            accelNode = thirdNode;\n                            if (this.read(current, \",\") === null) {\n                                parent.pop();\n                                return null;\n                            }\n                        }\n                    } else {\n                        accelNode = firstNode;\n                        if (this.read(current, \",\") === null) {\n                            parent.pop();\n                            return null;\n                        }\n                    }\n                }\n                var transformTags = [];\n                for (var next = this._peek(); this._haveMore() && next !== \")\" && next !== \"}\"; next = this._peek()) {\n                    var childNode = null;\n                    if (this.read(current, \"\\\\\") !== null) {\n                        childNode = this.parse_tag_alpha(current) || this.parse_tag_iclip(current) || this.parse_tag_xbord(current) || this.parse_tag_ybord(current) || this.parse_tag_xshad(current) || this.parse_tag_yshad(current) || this.parse_tag_blur(current) || this.parse_tag_bord(current) || this.parse_tag_clip(current) || this.parse_tag_fscx(current) || this.parse_tag_fscy(current) || this.parse_tag_shad(current) || this.parse_tag_fax(current) || this.parse_tag_fay(current) || this.parse_tag_frx(current) || this.parse_tag_fry(current) || this.parse_tag_frz(current) || this.parse_tag_fsp(current) || this.parse_tag_fsplus(current) || this.parse_tag_fsminus(current) || this.parse_tag_be(current) || this.parse_tag_fr(current) || this.parse_tag_fs(current) || this.parse_tag_1a(current) || this.parse_tag_1c(current) || this.parse_tag_2a(current) || this.parse_tag_2c(current) || this.parse_tag_3a(current) || this.parse_tag_3c(current) || this.parse_tag_4a(current) || this.parse_tag_4c(current) || this.parse_tag_c(current);\n                        if (childNode === null) {\n                            current.pop();\n                        }\n                    }\n                    if (childNode === null) {\n                        childNode = this.parse_comment(current);\n                    }\n                    if (childNode.value instanceof parts.Comment && transformTags[transformTags.length - 1] instanceof parts.Comment) {\n                        // Merge consecutive comment parts into one part\n                        transformTags[transformTags.length - 1] = new parts.Comment(transformTags[transformTags.length - 1].value + childNode.value.value);\n                    } else {\n                        transformTags.push(childNode.value);\n                    }\n                }\n                this.read(current, \")\");\n                current.value = new parts.Transform(startNode !== null ? startNode.value / 1e3 : null, endNode !== null ? endNode.value / 1e3 : null, accelNode !== null ? accelNode.value / 1e3 : null, transformTags);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_u = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_xbord = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_xshad = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_ybord = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_yshad = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_1a = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_1c = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_2a = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_2c = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_3a = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_3c = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_4a = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_tag_4c = function () {\n                throw new Error(\"unreachable\");\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_drawingInstructions = function (parent) {\n                var current = new ParseNode(parent);\n                var currentType = null;\n                var numberParts = [];\n                current.value = [];\n                while (this._haveMore()) {\n                    while (this.read(current, \" \") !== null) {}\n                    if (!this._haveMore()) {\n                        break;\n                    }\n                    if (currentType !== null) {\n                        var numberPart = this.parse_decimal(current);\n                        if (numberPart !== null) {\n                            numberParts.push(numberPart);\n                            if (currentType === \"m\" && numberParts.length === 2) {\n                                current.value.push(new parts.drawing.MoveInstruction(numberParts[0].value, numberParts[1].value));\n                                numberParts.splice(0, numberParts.length);\n                            } else if (currentType === \"l\" && numberParts.length === 2) {\n                                current.value.push(new parts.drawing.LineInstruction(numberParts[0].value, numberParts[1].value));\n                                numberParts.splice(0, numberParts.length);\n                            } else if (currentType === \"b\" && numberParts.length === 6) {\n                                current.value.push(new parts.drawing.CubicBezierCurveInstruction(numberParts[0].value, numberParts[1].value, numberParts[2].value, numberParts[3].value, numberParts[4].value, numberParts[5].value));\n                                numberParts.splice(0, numberParts.length);\n                            }\n                            continue;\n                        }\n                    }\n                    var typePart = this.parse_text(current);\n                    var newType = typePart.value.value;\n                    switch (newType) {\n                      case \"m\":\n                      case \"l\":\n                      case \"b\":\n                        currentType = newType;\n                        numberParts.splice(0, numberParts.length);\n                        break;\n                    }\n                }\n                while (this.read(current, \" \") !== null) {}\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_decimalInt32 = function (parent) {\n                var current = new ParseNode(parent);\n                var isNegative = this.read(current, \"-\") !== null;\n                var numberNode = new ParseNode(current, \"\");\n                for (var next = this._peek(); this._haveMore() && next >= \"0\" && next <= \"9\"; next = this._peek()) {\n                    numberNode.value += next;\n                }\n                if (numberNode.value.length === 0) {\n                    parent.pop();\n                    return null;\n                }\n                var value = parseInt(numberNode.value);\n                if (value >= 4294967295) {\n                    value = 4294967295;\n                } else if (isNegative) {\n                    value = -value;\n                }\n                current.value = value;\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_hexInt32 = function (parent) {\n                var current = new ParseNode(parent);\n                var isNegative = this.read(current, \"-\") !== null;\n                var numberNode = new ParseNode(current, \"\");\n                for (var next = this._peek(); this._haveMore() && (next >= \"0\" && next <= \"9\" || next >= \"a\" && next <= \"f\" || next >= \"A\" && next <= \"F\"); next = this._peek()) {\n                    numberNode.value += next;\n                }\n                if (numberNode.value.length === 0) {\n                    parent.pop();\n                    return null;\n                }\n                var value = parseInt(numberNode.value, 16);\n                if (value >= 4294967295) {\n                    value = 4294967295;\n                } else if (isNegative) {\n                    value = -value;\n                }\n                current.value = value;\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_decimalOrHexInt32 = function (parent) {\n                var current = new ParseNode(parent);\n                var valueNode = this.read(current, \"&H\") !== null || this.read(current, \"&h\") !== null ? this.parse_hexInt32(current) : this.parse_decimalInt32(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = valueNode.value;\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_decimal = function (parent) {\n                var current = new ParseNode(parent);\n                var negative = this.read(current, \"-\") !== null;\n                var numericalPart = this.parse_unsignedDecimal(current);\n                if (numericalPart === null) {\n                    parent.pop();\n                    return null;\n                }\n                current.value = numericalPart.value;\n                if (negative) {\n                    current.value = -current.value;\n                }\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_unsignedDecimal = function (parent) {\n                var current = new ParseNode(parent);\n                var characteristicNode = new ParseNode(current, \"\");\n                var mantissaNode = null;\n                for (var next = this._peek(); this._haveMore() && next >= \"0\" && next <= \"9\"; next = this._peek()) {\n                    characteristicNode.value += next;\n                }\n                if (characteristicNode.value.length === 0) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \".\") !== null) {\n                    mantissaNode = new ParseNode(current, \"\");\n                    for (var next = this._peek(); this._haveMore() && next >= \"0\" && next <= \"9\"; next = this._peek()) {\n                        mantissaNode.value += next;\n                    }\n                    if (mantissaNode.value.length === 0) {\n                        parent.pop();\n                        return null;\n                    }\n                }\n                current.value = parseFloat(characteristicNode.value + (mantissaNode !== null ? \".\" + mantissaNode.value : \"\"));\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_enableDisable = function (parent) {\n                var next = this._peek();\n                if (next === \"0\" || next === \"1\") {\n                    var result = new ParseNode(parent, next);\n                    result.value = result.value === \"1\";\n                    return result;\n                }\n                return null;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_color = function (parent) {\n                var current = new ParseNode(parent);\n                while (this.read(current, \"&\") !== null || this.read(current, \"H\") !== null) {}\n                var valueNode = this.parse_hexInt32(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                var value = valueNode.value;\n                current.value = new parts.Color(value & 255, value >> 8 & 255, value >> 16 & 255);\n                while (this.read(current, \"&\") !== null || this.read(current, \"H\") !== null) {}\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_alpha = function (parent) {\n                var current = new ParseNode(parent);\n                while (this.read(current, \"&\") !== null || this.read(current, \"H\") !== null) {}\n                var valueNode = this.parse_hexInt32(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                var value = valueNode.value;\n                current.value = 1 - (value & 255) / 255;\n                while (this.read(current, \"&\") !== null || this.read(current, \"H\") !== null) {}\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.parse_colorWithAlpha = function (parent) {\n                var current = new ParseNode(parent);\n                var valueNode = this.parse_decimalOrHexInt32(current);\n                if (valueNode === null) {\n                    parent.pop();\n                    return null;\n                }\n                var value = valueNode.value;\n                current.value = new parts.Color(value & 255, value >> 8 & 255, value >> 16 & 255, 1 - (value >> 24 & 255) / 255);\n                return current;\n            };\n            /**\n             * @param {!ParseNode} parent\n             * @param {string} next\n             * @return {ParseNode}\n             */\n            ParserRun.prototype.read = function (parent, next) {\n                if (this._peek(next.length) !== next) {\n                    return null;\n                }\n                return new ParseNode(parent, next);\n            };\n            /**\n             * @param {number=1} count\n             * @return {string}\n             *\n             * @private\n             */\n            ParserRun.prototype._peek = function (count) {\n                if (count === void 0) {\n                    count = 1;\n                }\n                // Fastpath for count === 1. http://jsperf.com/substr-vs-indexer\n                if (count === 1) {\n                    return this._input[this._parseTree.end];\n                }\n                return this._input.substr(this._parseTree.end, count);\n            };\n            /**\n             * @return {boolean}\n             *\n             * @private\n             */\n            ParserRun.prototype._haveMore = function () {\n                return this._parseTree.end < this._input.length;\n            };\n            /**\n             * @param {string} tagName One of \"clip\" and \"iclip\"\n             * @param {!ParseNode} parent\n             * @return {ParseNode}\n             *\n             * @private\n             */\n            ParserRun.prototype._parse_tag_clip_or_iclip = function (tagName, parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, tagName) === null) {\n                    parent.pop();\n                    return null;\n                }\n                if (this.read(current, \"(\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                var x1Node = null;\n                var x2Node = null;\n                var y1Node = null;\n                var y2Node = null;\n                var scaleNode = null;\n                var commandsNode = null;\n                var firstNode = this.parse_decimal(current);\n                if (firstNode !== null) {\n                    if (this.read(current, \",\") === null) {\n                        parent.pop();\n                        return null;\n                    }\n                    var secondNode = this.parse_decimal(current);\n                    if (secondNode !== null) {\n                        x1Node = firstNode;\n                        y1Node = secondNode;\n                    } else {\n                        scaleNode = firstNode;\n                    }\n                }\n                if (x1Node !== null && y1Node !== null) {\n                    if (this.read(current, \",\") === null) {\n                        parent.pop();\n                        return null;\n                    }\n                    x2Node = this.parse_decimal(current);\n                    if (x2Node === null) {\n                        parent.pop();\n                        return null;\n                    }\n                    if (this.read(current, \",\") === null) {\n                        parent.pop();\n                        return null;\n                    }\n                    y2Node = this.parse_decimal(current);\n                    if (y2Node === null) {\n                        parent.pop();\n                        return null;\n                    }\n                    current.value = new parts.RectangularClip(x1Node.value, y1Node.value, x2Node.value, y2Node.value, tagName === \"clip\");\n                } else {\n                    commandsNode = new ParseNode(current, \"\");\n                    for (var next = this._peek(); this._haveMore() && next !== \")\" && next !== \"}\"; next = this._peek()) {\n                        commandsNode.value += next;\n                    }\n                    current.value = new parts.VectorClip(scaleNode !== null ? scaleNode.value : 1, parse(commandsNode.value, \"drawingInstructions\"), tagName === \"clip\");\n                }\n                if (this.read(current, \")\") === null) {\n                    parent.pop();\n                    return null;\n                }\n                return current;\n            };\n            return ParserRun;\n        }();\n        /**\n         * Constructs a simple tag parser function and sets it on the prototype of the {@link ./parser/parse.ParserRun} class.\n         *\n         * @param {string} tagName The name of the tag to generate the parser function for\n         * @param {function(new: !libjass.parts.Part, *)} tagConstructor The type of tag to be returned by the generated parser function\n         * @param {function(!ParseNode): ParseNode} valueParser The parser for the tag's value\n         * @param {boolean} required Whether the tag's value is required or optional\n         *\n         * @private\n         */\n        function makeTagParserFunction(tagName, tagConstructor, valueParser, required) {\n            ParserRun.prototype[\"parse_tag_\" + tagName] = function (parent) {\n                var current = new ParseNode(parent);\n                if (this.read(current, tagName) === null) {\n                    parent.pop();\n                    return null;\n                }\n                var valueNode = valueParser.call(this, current);\n                if (valueNode !== null) {\n                    current.value = new tagConstructor(valueNode.value);\n                } else if (!required) {\n                    current.value = new tagConstructor(null);\n                } else {\n                    parent.pop();\n                    return null;\n                }\n                return current;\n            };\n        }\n        makeTagParserFunction(\"alpha\", parts.Alpha, ParserRun.prototype.parse_alpha, false);\n        makeTagParserFunction(\"be\", parts.Blur, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"blur\", parts.GaussianBlur, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"bord\", parts.Border, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"c\", parts.PrimaryColor, ParserRun.prototype.parse_color, false);\n        makeTagParserFunction(\"fax\", parts.SkewX, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"fay\", parts.SkewY, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"fr\", parts.RotateZ, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"frx\", parts.RotateX, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"fry\", parts.RotateY, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"frz\", parts.RotateZ, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"fs\", parts.FontSize, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"fsp\", parts.LetterSpacing, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"i\", parts.Italic, ParserRun.prototype.parse_enableDisable, false);\n        makeTagParserFunction(\"p\", parts.DrawingMode, ParserRun.prototype.parse_decimal, true);\n        makeTagParserFunction(\"pbo\", parts.DrawingBaselineOffset, ParserRun.prototype.parse_decimal, true);\n        makeTagParserFunction(\"s\", parts.StrikeThrough, ParserRun.prototype.parse_enableDisable, false);\n        makeTagParserFunction(\"shad\", parts.Shadow, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"u\", parts.Underline, ParserRun.prototype.parse_enableDisable, false);\n        makeTagParserFunction(\"xbord\", parts.BorderX, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"xshad\", parts.ShadowX, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"ybord\", parts.BorderY, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"yshad\", parts.ShadowY, ParserRun.prototype.parse_decimal, false);\n        makeTagParserFunction(\"1a\", parts.PrimaryAlpha, ParserRun.prototype.parse_alpha, false);\n        makeTagParserFunction(\"1c\", parts.PrimaryColor, ParserRun.prototype.parse_color, false);\n        makeTagParserFunction(\"2a\", parts.SecondaryAlpha, ParserRun.prototype.parse_alpha, false);\n        makeTagParserFunction(\"2c\", parts.SecondaryColor, ParserRun.prototype.parse_color, false);\n        makeTagParserFunction(\"3a\", parts.OutlineAlpha, ParserRun.prototype.parse_alpha, false);\n        makeTagParserFunction(\"3c\", parts.OutlineColor, ParserRun.prototype.parse_color, false);\n        makeTagParserFunction(\"4a\", parts.ShadowAlpha, ParserRun.prototype.parse_alpha, false);\n        makeTagParserFunction(\"4c\", parts.ShadowColor, ParserRun.prototype.parse_color, false);\n        for (var _d = 0, _e = Object.keys(ParserRun.prototype); _d < _e.length; _d++) {\n            var key = _e[_d];\n            if (key.indexOf(\"parse_\") === 0 && typeof ParserRun.prototype[key] === \"function\") {\n                rules.set(key.substr(\"parse_\".length), ParserRun.prototype[key]);\n            }\n        }\n        misc_2.registerWorkerCommand(commands_3.WorkerCommands.Parse, function (parameters) {\n            return new promise_2.Promise(function (resolve) {\n                resolve(parse(parameters.input, parameters.rule));\n            });\n        });\n    });\n    def(\"parts/index\", [ \"parts/drawing\", \"serialization\" ], function (drawing, serialization_2, exports) {\n        exports.drawing = drawing;\n        /**\n         * Represents a CSS color with red, green, blue and alpha components.\n         *\n         * Instances of this class are immutable.\n         *\n         * @param {number} red\n         * @param {number} green\n         * @param {number} blue\n         * @param {number=1} alpha\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Color = function () {\n            function Color(red, green, blue, alpha) {\n                if (alpha === void 0) {\n                    alpha = 1;\n                }\n                this._red = red;\n                this._green = green;\n                this._blue = blue;\n                this._alpha = alpha;\n            }\n            Object.defineProperty(Color.prototype, \"red\", {\n                /**\n                 * The red component of this color as a number between 0 and 255.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._red;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Color.prototype, \"green\", {\n                /**\n                 * The green component of this color as a number between 0 and 255.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._green;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Color.prototype, \"blue\", {\n                /**\n                 * The blue component of this color as a number between 0 and 255.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._blue;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Color.prototype, \"alpha\", {\n                /**\n                 * The alpha component of this color as a number between 0 and 1, where 0 means transparent and 1 means opaque.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._alpha;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * @param {?number} value The new alpha. If null, the existing alpha is used.\n             * @return {!libjass.parts.Color} Returns a new Color instance with the same color but the provided alpha.\n             */\n            Color.prototype.withAlpha = function (value) {\n                return new Color(this._red, this._green, this._blue, value);\n            };\n            /**\n             * @return {string} The CSS representation \"rgba(...)\" of this color.\n             */\n            Color.prototype.toString = function () {\n                return \"rgba(\" + this._red + \", \" + this._green + \", \" + this._blue + \", \" + this._alpha.toFixed(3) + \")\";\n            };\n            /**\n             * Returns a new Color by interpolating the current color to the final color by the given progression.\n             *\n             * @param {!libjass.parts.Color} final\n             * @param {number} progression\n             * @return {!libjass.parts.Color}\n             */\n            Color.prototype.interpolate = function (final, progression) {\n                return new Color(this._red + progression * (final.red - this._red), this._green + progression * (final.green - this._green), this._blue + progression * (final.blue - this._blue), this._alpha + progression * (final.alpha - this._alpha));\n            };\n            return Color;\n        }();\n        exports.Color = Color;\n        /**\n         * A comment, i.e., any text enclosed in {} that is not understood as an ASS tag.\n         *\n         * @param {string} value The text of this comment\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Comment = function () {\n            function Comment(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Comment.prototype, \"value\", {\n                /**\n                 * The value of this comment.\n                 *\n                 * @type {string}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Comment;\n        }();\n        exports.Comment = Comment;\n        /**\n         * A block of text, i.e., any text not enclosed in {}. Also includes \\h.\n         *\n         * @param {string} value The content of this block of text\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Text = function () {\n            function Text(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Text.prototype, \"value\", {\n                /**\n                 * The value of this text part.\n                 *\n                 * @type {string}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * @return {string}\n             */\n            Text.prototype.toString = function () {\n                return \"Text { value: \" + this._value.replace(/\\u00A0/g, \"\\\\h\") + \" }\";\n            };\n            return Text;\n        }();\n        exports.Text = Text;\n        /**\n         * A newline character \\N.\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var NewLine = function () {\n            function NewLine() {}\n            return NewLine;\n        }();\n        exports.NewLine = NewLine;\n        /**\n         * A soft newline character \\n.\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var SoftNewLine = function () {\n            function SoftNewLine() {}\n            return SoftNewLine;\n        }();\n        exports.SoftNewLine = SoftNewLine;\n        /**\n         * An italic tag {\\i}\n         *\n         * @param {?boolean} value {\\i1} -> true, {\\i0} -> false, {\\i} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Italic = function () {\n            function Italic(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Italic.prototype, \"value\", {\n                /**\n                 * The value of this italic tag.\n                 *\n                 * @type {?boolean}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Italic;\n        }();\n        exports.Italic = Italic;\n        /**\n         * A bold tag {\\b}\n         *\n         * @param {?boolean|?number} value {\\b1} -> true, {\\b0} -> false, {\\b###} -> weight of the bold (number), {\\b} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Bold = function () {\n            function Bold(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Bold.prototype, \"value\", {\n                /**\n                 * The value of this bold tag.\n                 *\n                 * @type {?boolean|?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Bold;\n        }();\n        exports.Bold = Bold;\n        /**\n         * An underline tag {\\u}\n         *\n         * @param {?boolean} value {\\u1} -> true, {\\u0} -> false, {\\u} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Underline = function () {\n            function Underline(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Underline.prototype, \"value\", {\n                /**\n                 * The value of this underline tag.\n                 *\n                 * @type {?boolean}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Underline;\n        }();\n        exports.Underline = Underline;\n        /**\n         * A strike-through tag {\\s}\n         *\n         * @param {?boolean} value {\\s1} -> true, {\\s0} -> false, {\\s} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var StrikeThrough = function () {\n            function StrikeThrough(value) {\n                this._value = value;\n            }\n            Object.defineProperty(StrikeThrough.prototype, \"value\", {\n                /**\n                 * The value of this strike-through tag.\n                 *\n                 * @type {?boolean}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return StrikeThrough;\n        }();\n        exports.StrikeThrough = StrikeThrough;\n        /**\n         * A border tag {\\bord}\n         *\n         * @param {?number} value {\\bord###} -> width (number), {\\bord} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Border = function () {\n            function Border(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Border.prototype, \"value\", {\n                /**\n                 * The value of this border tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Border;\n        }();\n        exports.Border = Border;\n        /**\n         * A horizontal border tag {\\xbord}\n         *\n         * @param {?number} value {\\xbord###} -> width (number), {\\xbord} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var BorderX = function () {\n            function BorderX(value) {\n                this._value = value;\n            }\n            Object.defineProperty(BorderX.prototype, \"value\", {\n                /**\n                 * The value of this horizontal border tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return BorderX;\n        }();\n        exports.BorderX = BorderX;\n        /**\n         * A vertical border tag {\\ybord}\n         *\n         * @param {?number} value {\\ybord###} -> height (number), {\\ybord} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var BorderY = function () {\n            function BorderY(value) {\n                this._value = value;\n            }\n            Object.defineProperty(BorderY.prototype, \"value\", {\n                /**\n                 * The value of this vertical border tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return BorderY;\n        }();\n        exports.BorderY = BorderY;\n        /**\n         * A shadow tag {\\shad}\n         *\n         * @param {?number} value {\\shad###} -> depth (number), {\\shad} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Shadow = function () {\n            function Shadow(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Shadow.prototype, \"value\", {\n                /**\n                 * The value of this shadow tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Shadow;\n        }();\n        exports.Shadow = Shadow;\n        /**\n         * A horizontal shadow tag {\\xshad}\n         *\n         * @param {?number} value {\\xshad###} -> depth (number), {\\xshad} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var ShadowX = function () {\n            function ShadowX(value) {\n                this._value = value;\n            }\n            Object.defineProperty(ShadowX.prototype, \"value\", {\n                /**\n                 * The value of this horizontal shadow tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return ShadowX;\n        }();\n        exports.ShadowX = ShadowX;\n        /**\n         * A vertical shadow tag {\\yshad}\n         *\n         * @param {?number} value {\\yshad###} -> depth (number), {\\yshad} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var ShadowY = function () {\n            function ShadowY(value) {\n                this._value = value;\n            }\n            Object.defineProperty(ShadowY.prototype, \"value\", {\n                /**\n                 * The value of this vertical shadow tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return ShadowY;\n        }();\n        exports.ShadowY = ShadowY;\n        /**\n         * A blur tag {\\be}\n         *\n         * @param {?number} value {\\be###} -> strength (number), {\\be} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Blur = function () {\n            function Blur(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Blur.prototype, \"value\", {\n                /**\n                 * The value of this blur tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Blur;\n        }();\n        exports.Blur = Blur;\n        /**\n         * A Gaussian blur tag {\\blur}\n         *\n         * @param {?number} value {\\blur###} -> strength (number), {\\blur} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var GaussianBlur = function () {\n            function GaussianBlur(value) {\n                this._value = value;\n            }\n            Object.defineProperty(GaussianBlur.prototype, \"value\", {\n                /**\n                 * The value of this Gaussian blur tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return GaussianBlur;\n        }();\n        exports.GaussianBlur = GaussianBlur;\n        /**\n         * A font name tag {\\fn}\n         *\n         * @param {?string} value {\\fn###} -> name (string), {\\fn} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var FontName = function () {\n            function FontName(value) {\n                this._value = value;\n            }\n            Object.defineProperty(FontName.prototype, \"value\", {\n                /**\n                 * The value of this font name tag.\n                 *\n                 * @type {?string}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return FontName;\n        }();\n        exports.FontName = FontName;\n        /**\n         * A font size tag {\\fs}\n         *\n         * @param {?number} value {\\fs###} -> size (number), {\\fs} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var FontSize = function () {\n            function FontSize(value) {\n                this._value = value;\n            }\n            Object.defineProperty(FontSize.prototype, \"value\", {\n                /**\n                 * The value of this font size tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return FontSize;\n        }();\n        exports.FontSize = FontSize;\n        /**\n         * A font size increase tag {\\fs+}\n         *\n         * @param {number} value {\\fs+###} -> relative difference (number, percentage)\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var FontSizePlus = function () {\n            function FontSizePlus(value) {\n                this._value = value;\n            }\n            Object.defineProperty(FontSizePlus.prototype, \"value\", {\n                /**\n                 * The value of this font size increase tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return FontSizePlus;\n        }();\n        exports.FontSizePlus = FontSizePlus;\n        /**\n         * A font size decrease tag {\\fs-}\n         *\n         * @param {number} value {\\fs-###} -> relative difference (number, percentage)\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var FontSizeMinus = function () {\n            function FontSizeMinus(value) {\n                this._value = value;\n            }\n            Object.defineProperty(FontSizeMinus.prototype, \"value\", {\n                /**\n                 * The value of this font size decrease tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return FontSizeMinus;\n        }();\n        exports.FontSizeMinus = FontSizeMinus;\n        /**\n         * A horizontal font scaling tag {\\fscx}\n         *\n         * @param {?number} value {\\fscx###} -> scale (number), {\\fscx} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var FontScaleX = function () {\n            function FontScaleX(value) {\n                this._value = value;\n            }\n            Object.defineProperty(FontScaleX.prototype, \"value\", {\n                /**\n                 * The value of this horizontal font scaling tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return FontScaleX;\n        }();\n        exports.FontScaleX = FontScaleX;\n        /**\n         * A vertical font scaling tag {\\fscy}\n         *\n         * @param {?number} value {\\fscy###} -> scale (number), {\\fscy} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var FontScaleY = function () {\n            function FontScaleY(value) {\n                this._value = value;\n            }\n            Object.defineProperty(FontScaleY.prototype, \"value\", {\n                /**\n                 * The value of this vertical font scaling tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return FontScaleY;\n        }();\n        exports.FontScaleY = FontScaleY;\n        /**\n         * A letter-spacing tag {\\fsp}\n         *\n         * @param {?number} value {\\fsp###} -> spacing (number), {\\fsp} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var LetterSpacing = function () {\n            function LetterSpacing(value) {\n                this._value = value;\n            }\n            Object.defineProperty(LetterSpacing.prototype, \"value\", {\n                /**\n                 * The value of this letter-spacing tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return LetterSpacing;\n        }();\n        exports.LetterSpacing = LetterSpacing;\n        /**\n         * An X-axis rotation tag {\\frx}\n         *\n         * @param {?number} value {\\frx###} -> angle (number), {\\frx} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var RotateX = function () {\n            function RotateX(value) {\n                this._value = value;\n            }\n            Object.defineProperty(RotateX.prototype, \"value\", {\n                /**\n                 * The value of this X-axis rotation tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return RotateX;\n        }();\n        exports.RotateX = RotateX;\n        /**\n         * A Y-axis rotation tag {\\fry}\n         *\n         * @param {?number} value {\\fry###} -> angle (number), {\\fry} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var RotateY = function () {\n            function RotateY(value) {\n                this._value = value;\n            }\n            Object.defineProperty(RotateY.prototype, \"value\", {\n                /**\n                 * The value of this Y-axis rotation tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return RotateY;\n        }();\n        exports.RotateY = RotateY;\n        /**\n         * A Z-axis rotation tag {\\fr} or {\\frz}\n         *\n         * @param {?number} value {\\frz###} -> angle (number), {\\frz} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var RotateZ = function () {\n            function RotateZ(value) {\n                this._value = value;\n            }\n            Object.defineProperty(RotateZ.prototype, \"value\", {\n                /**\n                 * The value of this Z-axis rotation tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return RotateZ;\n        }();\n        exports.RotateZ = RotateZ;\n        /**\n         * An X-axis shearing tag {\\fax}\n         *\n         * @param {?number} value {\\fax###} -> angle (number), {\\fax} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var SkewX = function () {\n            function SkewX(value) {\n                this._value = value;\n            }\n            Object.defineProperty(SkewX.prototype, \"value\", {\n                /**\n                 * The value of this X-axis shearing tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return SkewX;\n        }();\n        exports.SkewX = SkewX;\n        /**\n         * A Y-axis shearing tag {\\fay}\n         *\n         * @param {?number} value {\\fay###} -> angle (number), {\\fay} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var SkewY = function () {\n            function SkewY(value) {\n                this._value = value;\n            }\n            Object.defineProperty(SkewY.prototype, \"value\", {\n                /**\n                 * The value of this Y-axis shearing tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return SkewY;\n        }();\n        exports.SkewY = SkewY;\n        /**\n         * A primary color tag {\\c} or {\\1c}\n         *\n         * @param {libjass.parts.Color} value {\\1c###} -> color (Color), {\\1c} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var PrimaryColor = function () {\n            function PrimaryColor(value) {\n                this._value = value;\n            }\n            Object.defineProperty(PrimaryColor.prototype, \"value\", {\n                /**\n                 * The value of this primary color tag.\n                 *\n                 * @type {libjass.parts.Color}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return PrimaryColor;\n        }();\n        exports.PrimaryColor = PrimaryColor;\n        /**\n         * A secondary color tag {\\2c}\n         *\n         * @param {libjass.parts.Color} value {\\2c###} -> color (Color), {\\2c} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var SecondaryColor = function () {\n            function SecondaryColor(value) {\n                this._value = value;\n            }\n            Object.defineProperty(SecondaryColor.prototype, \"value\", {\n                /**\n                 * The value of this secondary color tag.\n                 *\n                 * @type {libjass.parts.Color}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return SecondaryColor;\n        }();\n        exports.SecondaryColor = SecondaryColor;\n        /**\n         * An outline color tag {\\3c}\n         *\n         * @param {libjass.parts.Color} value {\\3c###} -> color (Color), {\\3c} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var OutlineColor = function () {\n            function OutlineColor(value) {\n                this._value = value;\n            }\n            Object.defineProperty(OutlineColor.prototype, \"value\", {\n                /**\n                 * The value of this outline color tag.\n                 *\n                 * @type {libjass.parts.Color}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return OutlineColor;\n        }();\n        exports.OutlineColor = OutlineColor;\n        /**\n         * A shadow color tag {\\4c}\n         *\n         * @param {libjass.parts.Color} value {\\4c###} -> color (Color), {\\4c} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var ShadowColor = function () {\n            function ShadowColor(value) {\n                this._value = value;\n            }\n            Object.defineProperty(ShadowColor.prototype, \"value\", {\n                /**\n                 * The value of this shadow color tag.\n                 *\n                 * @type {libjass.parts.Color}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return ShadowColor;\n        }();\n        exports.ShadowColor = ShadowColor;\n        /**\n         * An alpha tag {\\alpha}\n         *\n         * @param {?number} value {\\alpha###} -> alpha (number), {\\alpha} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Alpha = function () {\n            function Alpha(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Alpha.prototype, \"value\", {\n                /**\n                 * The value of this alpha tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Alpha;\n        }();\n        exports.Alpha = Alpha;\n        /**\n         * A primary alpha tag {\\1a}\n         *\n         * @param {?number} value {\\1a###} -> alpha (number), {\\1a} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var PrimaryAlpha = function () {\n            function PrimaryAlpha(value) {\n                this._value = value;\n            }\n            Object.defineProperty(PrimaryAlpha.prototype, \"value\", {\n                /**\n                 * The value of this primary alpha tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return PrimaryAlpha;\n        }();\n        exports.PrimaryAlpha = PrimaryAlpha;\n        /**\n         * A secondary alpha tag {\\2a}\n         *\n         * @param {?number} value {\\2a###} -> alpha (number), {\\2a} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var SecondaryAlpha = function () {\n            function SecondaryAlpha(value) {\n                this._value = value;\n            }\n            Object.defineProperty(SecondaryAlpha.prototype, \"value\", {\n                /**\n                 * The value of this secondary alpha tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return SecondaryAlpha;\n        }();\n        exports.SecondaryAlpha = SecondaryAlpha;\n        /**\n         * An outline alpha tag {\\3a}\n         *\n         * @param {?number} value {\\3a###} -> alpha (number), {\\3a} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var OutlineAlpha = function () {\n            function OutlineAlpha(value) {\n                this._value = value;\n            }\n            Object.defineProperty(OutlineAlpha.prototype, \"value\", {\n                /**\n                 * The value of this outline alpha tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return OutlineAlpha;\n        }();\n        exports.OutlineAlpha = OutlineAlpha;\n        /**\n         * A shadow alpha tag {\\4a}\n         *\n         * @param {?number} value {\\4a###} -> alpha (number), {\\4a} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var ShadowAlpha = function () {\n            function ShadowAlpha(value) {\n                this._value = value;\n            }\n            Object.defineProperty(ShadowAlpha.prototype, \"value\", {\n                /**\n                 * The value of this shadow alpha tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return ShadowAlpha;\n        }();\n        exports.ShadowAlpha = ShadowAlpha;\n        /**\n         * An alignment tag {\\an} or {\\a}\n         *\n         * @param {number} value {\\an###} -> alignment (number)\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Alignment = function () {\n            function Alignment(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Alignment.prototype, \"value\", {\n                /**\n                 * The value of this alignment tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Alignment;\n        }();\n        exports.Alignment = Alignment;\n        /**\n         * A color karaoke tag {\\k}\n         *\n         * @param {number} duration {\\k###} -> duration (number)\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var ColorKaraoke = function () {\n            function ColorKaraoke(duration) {\n                this._duration = duration;\n            }\n            Object.defineProperty(ColorKaraoke.prototype, \"duration\", {\n                /**\n                 * The duration of this color karaoke tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._duration;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return ColorKaraoke;\n        }();\n        exports.ColorKaraoke = ColorKaraoke;\n        /**\n         * A sweeping color karaoke tag {\\K} or {\\kf}\n         *\n         * @param {number} duration {\\kf###} -> duration (number)\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var SweepingColorKaraoke = function () {\n            function SweepingColorKaraoke(duration) {\n                this._duration = duration;\n            }\n            Object.defineProperty(SweepingColorKaraoke.prototype, \"duration\", {\n                /**\n                 * The duration of this sweeping color karaoke tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._duration;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return SweepingColorKaraoke;\n        }();\n        exports.SweepingColorKaraoke = SweepingColorKaraoke;\n        /**\n         * An outline karaoke tag {\\ko}\n         *\n         * @param {number} duration {\\ko###} -> duration (number)\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var OutlineKaraoke = function () {\n            function OutlineKaraoke(duration) {\n                this._duration = duration;\n            }\n            Object.defineProperty(OutlineKaraoke.prototype, \"duration\", {\n                /**\n                 * The duration of this outline karaoke tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._duration;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return OutlineKaraoke;\n        }();\n        exports.OutlineKaraoke = OutlineKaraoke;\n        /**\n         * A wrapping style tag {\\q}\n         *\n         * @param {number} value {\\q###} -> style (number)\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var WrappingStyle = function () {\n            function WrappingStyle(value) {\n                this._value = value;\n            }\n            Object.defineProperty(WrappingStyle.prototype, \"value\", {\n                /**\n                 * The value of this wrapping style tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return WrappingStyle;\n        }();\n        exports.WrappingStyle = WrappingStyle;\n        /**\n         * A style reset tag {\\r}\n         *\n         * @param {?string} value {\\r###} -> style name (string), {\\r} -> null\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Reset = function () {\n            function Reset(value) {\n                this._value = value;\n            }\n            Object.defineProperty(Reset.prototype, \"value\", {\n                /**\n                 * The value of this style reset tag.\n                 *\n                 * @type {?string}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Reset;\n        }();\n        exports.Reset = Reset;\n        /**\n         * A position tag {\\pos}\n         *\n         * @param {number} x\n         * @param {number} y\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Position = function () {\n            function Position(x, y) {\n                this._x = x;\n                this._y = y;\n            }\n            Object.defineProperty(Position.prototype, \"x\", {\n                /**\n                 * The x value of this position tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Position.prototype, \"y\", {\n                /**\n                 * The y value of this position tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Position;\n        }();\n        exports.Position = Position;\n        /**\n         * A movement tag {\\move}\n         *\n         * @param {number} x1\n         * @param {number} y1\n         * @param {number} x2\n         * @param {number} y2\n         * @param {?number} t1\n         * @param {?number} t2\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Move = function () {\n            function Move(x1, y1, x2, y2, t1, t2) {\n                this._x1 = x1;\n                this._y1 = y1;\n                this._x2 = x2;\n                this._y2 = y2;\n                this._t1 = t1;\n                this._t2 = t2;\n            }\n            Object.defineProperty(Move.prototype, \"x1\", {\n                /**\n                 * The starting x value of this move tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Move.prototype, \"y1\", {\n                /**\n                 * The starting y value of this move tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Move.prototype, \"x2\", {\n                /**\n                 * The ending x value of this move tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Move.prototype, \"y2\", {\n                /**\n                 * The ending y value of this move tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Move.prototype, \"t1\", {\n                /**\n                 * The start time of this move tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._t1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Move.prototype, \"t2\", {\n                /**\n                 * The end time value of this move tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._t2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Move;\n        }();\n        exports.Move = Move;\n        /**\n         * A rotation origin tag {\\org}\n         *\n         * @param {number} x\n         * @param {number} y\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var RotationOrigin = function () {\n            function RotationOrigin(x, y) {\n                this._x = x;\n                this._y = y;\n            }\n            Object.defineProperty(RotationOrigin.prototype, \"x\", {\n                /**\n                 * The x value of this rotation origin tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(RotationOrigin.prototype, \"y\", {\n                /**\n                 * The y value of this rotation origin tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return RotationOrigin;\n        }();\n        exports.RotationOrigin = RotationOrigin;\n        /**\n         * A simple fade tag {\\fad}\n         *\n         * @param {number} start\n         * @param {number} end\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Fade = function () {\n            function Fade(start, end) {\n                this._start = start;\n                this._end = end;\n            }\n            Object.defineProperty(Fade.prototype, \"start\", {\n                /**\n                 * The start time of this fade tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._start;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Fade.prototype, \"end\", {\n                /**\n                 * The end time of this fade tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._end;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Fade;\n        }();\n        exports.Fade = Fade;\n        /**\n         * A complex fade tag {\\fade}\n         *\n         * @param {number} a1\n         * @param {number} a2\n         * @param {number} a3\n         * @param {number} t1\n         * @param {number} t2\n         * @param {number} t3\n         * @param {number} t4\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var ComplexFade = function () {\n            function ComplexFade(a1, a2, a3, t1, t2, t3, t4) {\n                this._a1 = a1;\n                this._a2 = a2;\n                this._a3 = a3;\n                this._t1 = t1;\n                this._t2 = t2;\n                this._t3 = t3;\n                this._t4 = t4;\n            }\n            Object.defineProperty(ComplexFade.prototype, \"a1\", {\n                /**\n                 * The alpha value of this complex fade tag at time t2.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._a1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ComplexFade.prototype, \"a2\", {\n                /**\n                 * The alpha value of this complex fade tag at time t3.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._a2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ComplexFade.prototype, \"a3\", {\n                /**\n                 * The alpha value of this complex fade tag at time t4.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._a3;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ComplexFade.prototype, \"t1\", {\n                /**\n                 * The starting time of this complex fade tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._t1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ComplexFade.prototype, \"t2\", {\n                /**\n                 * The first intermediate time of this complex fade tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._t2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ComplexFade.prototype, \"t3\", {\n                /**\n                 * The second intermediate time of this complex fade tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._t3;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(ComplexFade.prototype, \"t4\", {\n                /**\n                 * The ending time of this complex fade tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._t4;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return ComplexFade;\n        }();\n        exports.ComplexFade = ComplexFade;\n        /**\n         * A transform tag {\\t}\n         *\n         * @param {?number} start\n         * @param {?number} end\n         * @param {?number} accel\n         * @param {!Array.<!libjass.parts.Tag>} tags\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var Transform = function () {\n            function Transform(start, end, accel, tags) {\n                this._start = start;\n                this._end = end;\n                this._accel = accel;\n                this._tags = tags;\n            }\n            Object.defineProperty(Transform.prototype, \"start\", {\n                /**\n                 * The starting time of this transform tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._start;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Transform.prototype, \"end\", {\n                /**\n                 * The ending time of this transform tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._end;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Transform.prototype, \"accel\", {\n                /**\n                 * The acceleration of this transform tag.\n                 *\n                 * @type {?number}\n                 */\n                get: function () {\n                    return this._accel;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Transform.prototype, \"tags\", {\n                /**\n                 * The tags animated by this transform tag.\n                 *\n                 * @type {!Array.<!libjass.parts.Tag>}\n                 */\n                get: function () {\n                    return this._tags;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return Transform;\n        }();\n        exports.Transform = Transform;\n        /**\n         * A rectangular clip tag {\\clip} or {\\iclip}\n         *\n         * @param {number} x1\n         * @param {number} y1\n         * @param {number} x2\n         * @param {number} y2\n         * @param {boolean} inside\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var RectangularClip = function () {\n            function RectangularClip(x1, y1, x2, y2, inside) {\n                this._x1 = x1;\n                this._y1 = y1;\n                this._x2 = x2;\n                this._y2 = y2;\n                this._inside = inside;\n            }\n            Object.defineProperty(RectangularClip.prototype, \"x1\", {\n                /**\n                 * The X coordinate of the starting position of this rectangular clip tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(RectangularClip.prototype, \"y1\", {\n                /**\n                 * The Y coordinate of the starting position of this rectangular clip tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(RectangularClip.prototype, \"x2\", {\n                /**\n                 * The X coordinate of the ending position of this rectangular clip tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(RectangularClip.prototype, \"y2\", {\n                /**\n                 * The Y coordinate of the ending position of this rectangular clip tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(RectangularClip.prototype, \"inside\", {\n                /**\n                 * Whether this rectangular clip tag clips the region it encloses or the region it excludes.\n                 *\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._inside;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return RectangularClip;\n        }();\n        exports.RectangularClip = RectangularClip;\n        /**\n         * A vector clip tag {\\clip} or {\\iclip}\n         *\n         * @param {number} scale\n         * @param {!Array.<!libjass.parts.drawing.Instruction>} instructions\n         * @param {boolean} inside\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var VectorClip = function () {\n            function VectorClip(scale, instructions, inside) {\n                this._scale = scale;\n                this._instructions = instructions;\n                this._inside = inside;\n            }\n            Object.defineProperty(VectorClip.prototype, \"scale\", {\n                /**\n                 * The scale of this vector clip tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._scale;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(VectorClip.prototype, \"instructions\", {\n                /**\n                 * The clip commands of this vector clip tag.\n                 *\n                 * @type {string}\n                 */\n                get: function () {\n                    return this._instructions;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(VectorClip.prototype, \"inside\", {\n                /**\n                 * Whether this vector clip tag clips the region it encloses or the region it excludes.\n                 *\n                 * @type {boolean}\n                 */\n                get: function () {\n                    return this._inside;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return VectorClip;\n        }();\n        exports.VectorClip = VectorClip;\n        /**\n         * A drawing mode tag {\\p}\n         *\n         * @param {number} scale\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var DrawingMode = function () {\n            function DrawingMode(scale) {\n                this._scale = scale;\n            }\n            Object.defineProperty(DrawingMode.prototype, \"scale\", {\n                /**\n                 * The scale of this drawing mode tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._scale;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return DrawingMode;\n        }();\n        exports.DrawingMode = DrawingMode;\n        /**\n         * A drawing mode baseline offset tag {\\pbo}\n         *\n         * @param {number} value\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var DrawingBaselineOffset = function () {\n            function DrawingBaselineOffset(value) {\n                this._value = value;\n            }\n            Object.defineProperty(DrawingBaselineOffset.prototype, \"value\", {\n                /**\n                 * The value of this drawing mode baseline offset tag.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._value;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return DrawingBaselineOffset;\n        }();\n        exports.DrawingBaselineOffset = DrawingBaselineOffset;\n        /**\n         * A pseudo-part representing text interpreted as drawing instructions\n         *\n         * @param {!Array.<!libjass.parts.drawing.Instruction>} instructions\n         *\n         * @constructor\n         * @memberOf libjass.parts\n         */\n        var DrawingInstructions = function () {\n            function DrawingInstructions(instructions) {\n                this._instructions = instructions;\n            }\n            Object.defineProperty(DrawingInstructions.prototype, \"instructions\", {\n                /**\n                 * The instructions contained in this drawing instructions part.\n                 *\n                 * @type {!Array.<!libjass.parts.drawing.Instruction>}\n                 */\n                get: function () {\n                    return this._instructions;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return DrawingInstructions;\n        }();\n        exports.DrawingInstructions = DrawingInstructions;\n        var addToString = function (ctor, ctorName) {\n            if (!ctor.prototype.hasOwnProperty(\"toString\")) {\n                var propertyNames_1 = Object.getOwnPropertyNames(ctor.prototype).filter(function (property) {\n                    return property !== \"constructor\";\n                });\n                ctor.prototype.toString = function () {\n                    var _this = this;\n                    return ctorName + \" { \" + propertyNames_1.map(function (name) {\n                        return name + \": \" + _this[name];\n                    }).join(\", \") + (propertyNames_1.length > 0 ? \" \" : \"\") + \"}\";\n                };\n            }\n        };\n        for (var _i = 0, _a = Object.keys(exports); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = exports[key];\n            if (value instanceof Function) {\n                addToString(value, key);\n                serialization_2.registerClass(value);\n            }\n        }\n        for (var _b = 0, _c = Object.keys(drawing); _b < _c.length; _b++) {\n            var key = _c[_b];\n            var value = drawing[key];\n            if (value instanceof Function) {\n                addToString(value, \"Drawing\" + key);\n                serialization_2.registerClass(value);\n            }\n        }\n    });\n    def(\"parts/drawing\", [], function (exports) {\n        /**\n         * An instruction to move to a particular position.\n         *\n         * @param {number} x\n         * @param {number} y\n         *\n         * @constructor\n         * @implements {libjass.parts.drawing.Instruction}\n         * @memberOf libjass.parts.drawing\n         */\n        var MoveInstruction = function () {\n            function MoveInstruction(x, y) {\n                this._x = x;\n                this._y = y;\n            }\n            Object.defineProperty(MoveInstruction.prototype, \"x\", {\n                /**\n                 * The X position of this move instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(MoveInstruction.prototype, \"y\", {\n                /**\n                 * The Y position of this move instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return MoveInstruction;\n        }();\n        exports.MoveInstruction = MoveInstruction;\n        /**\n         * An instruction to draw a line to a particular position.\n         *\n         * @param {number} x\n         * @param {number} y\n         *\n         * @constructor\n         * @implements {libjass.parts.drawing.Instruction}\n         * @memberOf libjass.parts.drawing\n         */\n        var LineInstruction = function () {\n            function LineInstruction(x, y) {\n                this._x = x;\n                this._y = y;\n            }\n            Object.defineProperty(LineInstruction.prototype, \"x\", {\n                /**\n                 * The X position of this line instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(LineInstruction.prototype, \"y\", {\n                /**\n                 * The Y position of this line instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return LineInstruction;\n        }();\n        exports.LineInstruction = LineInstruction;\n        /**\n         * An instruction to draw a cubic bezier curve to a particular position, with two given control points.\n         *\n         * @param {number} x1\n         * @param {number} y1\n         * @param {number} x2\n         * @param {number} y2\n         * @param {number} x3\n         * @param {number} y3\n         *\n         * @constructor\n         * @implements {libjass.parts.drawing.Instruction}\n         * @memberOf libjass.parts.drawing\n         */\n        var CubicBezierCurveInstruction = function () {\n            function CubicBezierCurveInstruction(x1, y1, x2, y2, x3, y3) {\n                this._x1 = x1;\n                this._y1 = y1;\n                this._x2 = x2;\n                this._y2 = y2;\n                this._x3 = x3;\n                this._y3 = y3;\n            }\n            Object.defineProperty(CubicBezierCurveInstruction.prototype, \"x1\", {\n                /**\n                 * The X position of the first control point of this cubic bezier curve instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(CubicBezierCurveInstruction.prototype, \"y1\", {\n                /**\n                 * The Y position of the first control point of this cubic bezier curve instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y1;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(CubicBezierCurveInstruction.prototype, \"x2\", {\n                /**\n                 * The X position of the second control point of this cubic bezier curve instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(CubicBezierCurveInstruction.prototype, \"y2\", {\n                /**\n                 * The Y position of the second control point of this cubic bezier curve instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y2;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(CubicBezierCurveInstruction.prototype, \"x3\", {\n                /**\n                 * The ending X position of this cubic bezier curve instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._x3;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(CubicBezierCurveInstruction.prototype, \"y3\", {\n                /**\n                 * The ending Y position of this cubic bezier curve instruction.\n                 *\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._y3;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return CubicBezierCurveInstruction;\n        }();\n        exports.CubicBezierCurveInstruction = CubicBezierCurveInstruction;\n    });\n    def(\"types/misc\", [], function (exports) {\n        /**\n         * The format of the string passed to {@link libjass.ASS.fromString}\n         */\n        (function (Format) {\n            Format[Format[\"ASS\"] = 0] = \"ASS\";\n            Format[Format[\"SRT\"] = 1] = \"SRT\";\n        })(exports.Format || (exports.Format = {}));\n        /**\n         * The wrapping style defined in the {@link libjass.ScriptProperties}\n         *\n         * @enum\n         * @memberOf libjass\n         */\n        (function (WrappingStyle) {\n            WrappingStyle[WrappingStyle[\"SmartWrappingWithWiderTopLine\"] = 0] = \"SmartWrappingWithWiderTopLine\";\n            WrappingStyle[WrappingStyle[\"SmartWrappingWithWiderBottomLine\"] = 3] = \"SmartWrappingWithWiderBottomLine\";\n            WrappingStyle[WrappingStyle[\"EndOfLineWrapping\"] = 1] = \"EndOfLineWrapping\";\n            WrappingStyle[WrappingStyle[\"NoLineWrapping\"] = 2] = \"NoLineWrapping\";\n        })(exports.WrappingStyle || (exports.WrappingStyle = {}));\n        /**\n         * The border style defined in the {@link libjass.Style} properties.\n         *\n         * @enum\n         * @memberOf libjass\n         */\n        (function (BorderStyle) {\n            BorderStyle[BorderStyle[\"Outline\"] = 1] = \"Outline\";\n            BorderStyle[BorderStyle[\"OpaqueBox\"] = 3] = \"OpaqueBox\";\n        })(exports.BorderStyle || (exports.BorderStyle = {}));\n        /**\n         * @param {!Map.<string, string>} template\n         * @param {string} key\n         * @param {function(string):T} converter\n         * @param {?function(T):boolean} validator\n         * @param {T} defaultValue\n         * @return {T}\n         *\n         * @template T\n         */\n        function valueOrDefault(template, key, converter, validator, defaultValue) {\n            var value = template.get(key);\n            if (value === undefined) {\n                return converter(defaultValue);\n            }\n            try {\n                var result = converter(value);\n                if (validator !== null && !validator(result)) {\n                    throw new Error(\"Validation failed.\");\n                }\n                return result;\n            } catch (ex) {\n                throw new Error(\"Property \" + key + \" has invalid value \" + value + \" - \" + ex.stack);\n            }\n        }\n        exports.valueOrDefault = valueOrDefault;\n    });\n    def(\"webworker/index\", [ \"webworker/channel\", \"webworker/commands\" ], function (channel_1, commands_2, exports) {\n        exports.WorkerCommands = commands_2.WorkerCommands;\n        /**\n         * Indicates whether web workers are supposed in this environment or not.\n         *\n         * @type {boolean}\n         *\n         * @memberOf libjass.webworker\n         */\n        exports.supported = global.Worker !== undefined;\n        var _scriptNode = global.document !== undefined && global.document.currentScript !== undefined ? global.document.currentScript : null;\n        /**\n         * Create a new web worker and returns a {@link libjass.webworker.WorkerChannel} to it.\n         *\n         * @param {string=} scriptPath The path to libjass.js to be loaded in the web worker. If the browser supports document.currentScript, the parameter is optional and, if not provided,\n         * the path will be determined from the src attribute of the <script> element that contains the currently running copy of libjass.js\n         * @return {!libjass.webworker.WorkerChannel} A communication channel to the new web worker.\n         *\n         * @memberOf libjass.webworker\n         */\n        function createWorker(scriptPath) {\n            if (scriptPath === undefined) {\n                if (_scriptNode === null) {\n                    throw new Error(\"Could not auto-detect path of libjass.js, and explicit path was not passed in.\");\n                }\n                scriptPath = _scriptNode.src;\n            }\n            return new channel_1.WorkerChannelImpl(new Worker(scriptPath));\n        }\n        exports.createWorker = createWorker;\n        if (global.WorkerGlobalScope !== undefined && global instanceof global.WorkerGlobalScope) {\n            // This is a web worker. Set up a channel to talk back to the main thread.\n            new channel_1.WorkerChannelImpl(global);\n        }\n    });\n    def(\"webworker/channel\", [ \"serialization\", \"utility/map\", \"utility/promise\", \"webworker/commands\", \"webworker/misc\" ], function (serialization_1, map_3, promise_1, commands_1, misc_1, exports) {\n        /**\n         * Internal implementation of libjass.webworker.WorkerChannel\n         *\n         * @param {!*} comm The object used to talk to the other side of the channel. When created by the main thread, this is the Worker object.\n         * When created by the web worker, this is its global object.\n         *\n         * @constructor\n         * @implements {libjass.webworker.WorkerChannel}\n         */\n        var WorkerChannelImpl = function () {\n            function WorkerChannelImpl(comm) {\n                var _this = this;\n                this._comm = comm;\n                this._pendingRequests = new map_3.Map();\n                this._comm.addEventListener(\"message\", function (ev) {\n                    return _this._onMessage(ev.data);\n                }, false);\n            }\n            /**\n             * @param {number} command\n             * @param {*} parameters\n             * @return {!Promise.<*>}\n             */\n            WorkerChannelImpl.prototype.request = function (command, parameters) {\n                var deferred = new promise_1.DeferredPromise();\n                var requestId = ++WorkerChannelImpl._lastRequestId;\n                this._pendingRequests.set(requestId, deferred);\n                var requestMessage = {\n                    requestId: requestId,\n                    command: command,\n                    parameters: parameters\n                };\n                this._comm.postMessage(serialization_1.serialize(requestMessage));\n                return deferred.promise;\n            };\n            /**\n             * @param {number} requestId\n             */\n            WorkerChannelImpl.prototype.cancelRequest = function (requestId) {\n                var deferred = this._pendingRequests.get(requestId);\n                if (deferred === undefined) {\n                    return;\n                }\n                this._pendingRequests.delete(requestId);\n                deferred.reject(new Error(\"Cancelled.\"));\n            };\n            /**\n             * @param {!WorkerResponseMessage} message\n             *\n             * @private\n             */\n            WorkerChannelImpl.prototype._respond = function (message) {\n                var requestId = message.requestId;\n                var error = message.error;\n                var result = message.result;\n                if (error instanceof Error) {\n                    error = {\n                        message: error.message,\n                        stack: error.stack\n                    };\n                }\n                this._comm.postMessage(serialization_1.serialize({\n                    command: commands_1.WorkerCommands.Response,\n                    requestId: requestId,\n                    error: error,\n                    result: result\n                }));\n            };\n            /**\n             * @param {string} rawMessage\n             *\n             * @private\n             */\n            WorkerChannelImpl.prototype._onMessage = function (rawMessage) {\n                var _this = this;\n                var message = serialization_1.deserialize(rawMessage);\n                if (message.command === commands_1.WorkerCommands.Response) {\n                    var responseMessage = message;\n                    var deferred = this._pendingRequests.get(responseMessage.requestId);\n                    if (deferred !== undefined) {\n                        this._pendingRequests.delete(responseMessage.requestId);\n                        if (responseMessage.error === null) {\n                            deferred.resolve(responseMessage.result);\n                        } else {\n                            deferred.reject(responseMessage.error);\n                        }\n                    }\n                } else {\n                    var requestMessage = message;\n                    var requestId_1 = requestMessage.requestId;\n                    var commandCallback = misc_1.getWorkerCommandHandler(requestMessage.command);\n                    if (commandCallback === undefined) {\n                        this._respond({\n                            requestId: requestId_1,\n                            error: new Error(\"No handler registered for command \" + requestMessage.command),\n                            result: null\n                        });\n                        return;\n                    }\n                    commandCallback(requestMessage.parameters).then(function (result) {\n                        return {\n                            requestId: requestId_1,\n                            error: null,\n                            result: result\n                        };\n                    }, function (error) {\n                        return {\n                            requestId: requestId_1,\n                            error: error,\n                            result: null\n                        };\n                    }).then(function (responseMessage) {\n                        return _this._respond(responseMessage);\n                    });\n                }\n            };\n            WorkerChannelImpl._lastRequestId = -1;\n            return WorkerChannelImpl;\n        }();\n        exports.WorkerChannelImpl = WorkerChannelImpl;\n        misc_1.registerWorkerCommand(commands_1.WorkerCommands.Ping, function () {\n            return promise_1.Promise.resolve(null);\n        });\n    });\n    def(\"webworker/misc\", [ \"utility/map\" ], function (map_2, exports) {\n        var workerCommands = new map_2.Map();\n        /**\n         * Registers a handler for the given worker command.\n         *\n         * @param {number} command The command that this handler will handle. One of the {@link libjass.webworker.WorkerCommands} constants.\n         * @param {function(*, function(*, *))} handler The handler. A function of the form (parameters: *, response: function(error: *, result: *): void): void\n         */\n        function registerWorkerCommand(command, handler) {\n            workerCommands.set(command, handler);\n        }\n        exports.registerWorkerCommand = registerWorkerCommand;\n        /**\n         * Gets the handler for the given worker command.\n         *\n         * @param {number} command\n         * @return {?function(*, function(*, *))}\n         */\n        function getWorkerCommandHandler(command) {\n            return workerCommands.get(command);\n        }\n        exports.getWorkerCommandHandler = getWorkerCommandHandler;\n    });\n    def(\"webworker/commands\", [], function (exports) {\n        /**\n         * The commands that can be sent to or from a web worker.\n         */\n        (function (WorkerCommands) {\n            WorkerCommands[WorkerCommands[\"Response\"] = 0] = \"Response\";\n            WorkerCommands[WorkerCommands[\"Parse\"] = 1] = \"Parse\";\n            WorkerCommands[WorkerCommands[\"Ping\"] = 2] = \"Ping\";\n        })(exports.WorkerCommands || (exports.WorkerCommands = {}));\n    });\n    def(\"serialization\", [ \"utility/map\" ], function (map_1, exports) {\n        var classes = new map_1.Map();\n        /**\n         * Registers a class as a serializable type.\n         *\n         * @param {function(new:*)} clazz\n         */\n        function registerClass(clazz) {\n            clazz.prototype._classTag = classes.size;\n            classes.set(clazz.prototype._classTag, clazz);\n        }\n        exports.registerClass = registerClass;\n        /**\n         * Serializes the given object.\n         *\n         * @param {*} obj\n         * @return {string}\n         *\n         * @memberOf libjass\n         */\n        function serialize(obj) {\n            return JSON.stringify(obj, function (/* ujs:unreferenced */ key, value) {\n                if (value && value._classTag !== undefined && !Object.prototype.hasOwnProperty.call(value, \"_classTag\")) {\n                    // Copy the _classTag from this object's prototype to itself, so that it will be serialized.\n                    value._classTag = value._classTag;\n                }\n                return value;\n            });\n        }\n        exports.serialize = serialize;\n        /**\n         * @param {string} str\n         * @return {*}\n         *\n         * @memberOf libjass\n         */\n        function deserialize(str) {\n            return JSON.parse(str, function (/* ujs:unreferenced */ key, value) {\n                if (value && value._classTag !== undefined) {\n                    var clazz = classes.get(value._classTag);\n                    if (clazz === undefined) {\n                        throw new Error(\"Unknown class of tag \" + value._classTag + \" cannot be deserialized.\");\n                    }\n                    if (typeof clazz.fromJSON === \"function\") {\n                        value = clazz.fromJSON(value);\n                    } else {\n                        var hydratedValue = Object.create(clazz.prototype);\n                        for (var _i = 0, _a = Object.keys(value); _i < _a.length; _i++) {\n                            var key = _a[_i];\n                            hydratedValue[key] = value[key];\n                        }\n                        value = hydratedValue;\n                    }\n                }\n                return value;\n            });\n        }\n        exports.deserialize = deserialize;\n    });\n    def(\"utility/promise\", [], function (exports) {\n        // Based on https://github.com/petkaantonov/bluebird/blob/1b1467b95442c12378d0ea280ede61d640ab5510/src/schedule.js\n        var enqueueJob = function () {\n            var MutationObserver = global.MutationObserver || global.WebkitMutationObserver;\n            if (global.process !== undefined && typeof global.process.nextTick === \"function\") {\n                var nextTick_1 = global.process.nextTick;\n                return function (callback) {\n                    nextTick_1(callback);\n                };\n            } else if (MutationObserver !== undefined) {\n                var pending_1 = [];\n                var currentlyPending_1 = false;\n                var div_1 = document.createElement(\"div\");\n                var observer = new MutationObserver(function () {\n                    var processing = pending_1.splice(0, pending_1.length);\n                    for (var _i = 0, processing_1 = processing; _i < processing_1.length; _i++) {\n                        var callback = processing_1[_i];\n                        callback();\n                    }\n                    currentlyPending_1 = false;\n                    if (pending_1.length > 0) {\n                        div_1.classList.toggle(\"foo\");\n                        currentlyPending_1 = true;\n                    }\n                });\n                observer.observe(div_1, {\n                    attributes: true\n                });\n                return function (callback) {\n                    pending_1.push(callback);\n                    if (!currentlyPending_1) {\n                        div_1.classList.toggle(\"foo\");\n                        currentlyPending_1 = true;\n                    }\n                };\n            } else {\n                return function (callback) {\n                    return setTimeout(callback, 0);\n                };\n            }\n        }();\n        /**\n         * Promise implementation for browsers that don't support it.\n         *\n         * @param {function(function(T|!Thenable.<T>), function(*))} executor\n         *\n         * @constructor\n         * @template T\n         * @private\n         */\n        var SimplePromise = function () {\n            function SimplePromise(executor) {\n                this._state = {\n                    state: \"pending\"\n                };\n                this._fulfillReactions = [];\n                this._rejectReactions = [];\n                if (typeof executor !== \"function\") {\n                    throw new TypeError('typeof executor !== \"function\"');\n                }\n                var _a = this._createResolvingFunctions();\n                var resolve = _a.resolve;\n                var reject = _a.reject;\n                try {\n                    executor(resolve, reject);\n                } catch (ex) {\n                    reject(ex);\n                }\n            }\n            /**\n             * @param {T|!Thenable.<T>} value\n             * @return {!Promise.<T>}\n             *\n             * @template T\n             * @static\n             */\n            SimplePromise.resolve = function (value) {\n                if (value instanceof SimplePromise) {\n                    return value;\n                }\n                return new exports.Promise(function (resolve) {\n                    return resolve(value);\n                });\n            };\n            /**\n             * @param {*} reason\n             * @return {!Promise.<T>}\n             *\n             * @template T\n             * @static\n             */\n            SimplePromise.reject = function (reason) {\n                return new exports.Promise(function (/* ujs:unreferenced */ resolve, reject) {\n                    return reject(reason);\n                });\n            };\n            /**\n             * @param {!Array.<T|!Thenable.<T>>} values\n             * @return {!Promise.<!Array.<T>>}\n             *\n             * @template T\n             * @static\n             */\n            SimplePromise.all = function (values) {\n                return new exports.Promise(function (resolve, reject) {\n                    var result = [];\n                    var numUnresolved = values.length;\n                    if (numUnresolved === 0) {\n                        resolve(result);\n                        return;\n                    }\n                    values.forEach(function (value, index) {\n                        return exports.Promise.resolve(value).then(function (value) {\n                            result[index] = value;\n                            numUnresolved--;\n                            if (numUnresolved === 0) {\n                                resolve(result);\n                            }\n                        }, reject);\n                    });\n                });\n            };\n            /**\n             * @param {!Array.<T|!Thenable.<T>>} values\n             * @return {!Promise.<T>}\n             *\n             * @template T\n             * @static\n             */\n            SimplePromise.race = function (values) {\n                return new exports.Promise(function (resolve, reject) {\n                    for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                        var value = values_1[_i];\n                        exports.Promise.resolve(value).then(resolve, reject);\n                    }\n                });\n            };\n            /**\n             * @param {?function(T):(U|!Thenable.<U>)} onFulfilled\n             * @param {?function(*):(U|!Thenable.<U>)} onRejected\n             * @return {!Promise.<U>}\n             *\n             * @template U\n             */\n            SimplePromise.prototype.then = function (onFulfilled, onRejected) {\n                var resultCapability = new DeferredPromise();\n                if (typeof onFulfilled !== \"function\") {\n                    onFulfilled = function (value) {\n                        return value;\n                    };\n                }\n                if (typeof onRejected !== \"function\") {\n                    onRejected = function (reason) {\n                        throw reason;\n                    };\n                }\n                var fulfillReaction = {\n                    capabilities: resultCapability,\n                    handler: onFulfilled\n                };\n                var rejectReaction = {\n                    capabilities: resultCapability,\n                    handler: onRejected\n                };\n                switch (this._state.state) {\n                  case \"pending\":\n                    this._fulfillReactions.push(fulfillReaction);\n                    this._rejectReactions.push(rejectReaction);\n                    break;\n\n                  case \"fulfilled\":\n                    enqueueFulfilledReactionJob(fulfillReaction, this._state.value);\n                    break;\n\n                  case \"rejected\":\n                    enqueueRejectedReactionJob(rejectReaction, this._state.reason);\n                    break;\n                }\n                return resultCapability.promise;\n            };\n            /**\n             * @param {function(*):(T|!Thenable.<T>)} onRejected\n             * @return {!Promise.<T>}\n             */\n            SimplePromise.prototype.catch = function (onRejected) {\n                return this.then(undefined, onRejected);\n            };\n            /**\n             * @return {{ resolve(T|!Thenable.<T>), reject(*) }}\n             *\n             * @private\n             */\n            SimplePromise.prototype._createResolvingFunctions = function () {\n                var _this = this;\n                var alreadyResolved = false;\n                var resolve = function (resolution) {\n                    if (alreadyResolved) {\n                        return;\n                    }\n                    alreadyResolved = true;\n                    if (resolution === _this) {\n                        _this._reject(new TypeError(\"resolution === this\"));\n                        return;\n                    }\n                    if (resolution === null || typeof resolution !== \"object\" && typeof resolution !== \"function\") {\n                        _this._fulfill(resolution);\n                        return;\n                    }\n                    var then;\n                    try {\n                        then = resolution.then;\n                    } catch (ex) {\n                        _this._reject(ex);\n                        return;\n                    }\n                    if (typeof then !== \"function\") {\n                        _this._fulfill(resolution);\n                        return;\n                    }\n                    enqueueJob(function () {\n                        return _this._resolveWithThenable(resolution, then);\n                    });\n                };\n                var reject = function (reason) {\n                    if (alreadyResolved) {\n                        return;\n                    }\n                    alreadyResolved = true;\n                    _this._reject(reason);\n                };\n                return {\n                    resolve: resolve,\n                    reject: reject\n                };\n            };\n            /**\n             * @param {!Thenable.<T>} thenable\n             * @param {{function(this:!Thenable.<T>, function(T|!Thenable.<T>), function(*))}} then\n             *\n             * @private\n             */\n            SimplePromise.prototype._resolveWithThenable = function (thenable, then) {\n                var _a = this._createResolvingFunctions();\n                var resolve = _a.resolve;\n                var reject = _a.reject;\n                try {\n                    then.call(thenable, resolve, reject);\n                } catch (ex) {\n                    reject(ex);\n                }\n            };\n            /**\n             * @param {T} value\n             *\n             * @private\n             */\n            SimplePromise.prototype._fulfill = function (value) {\n                var reactions = this._fulfillReactions;\n                this._state = {\n                    state: \"fulfilled\",\n                    value: value\n                };\n                this._fulfillReactions = [];\n                this._rejectReactions = [];\n                for (var _i = 0, reactions_1 = reactions; _i < reactions_1.length; _i++) {\n                    var reaction = reactions_1[_i];\n                    enqueueFulfilledReactionJob(reaction, value);\n                }\n            };\n            /**\n             * @param {*} reason\n             *\n             * @private\n             */\n            SimplePromise.prototype._reject = function (reason) {\n                var reactions = this._rejectReactions;\n                this._state = {\n                    state: \"rejected\",\n                    reason: reason\n                };\n                this._fulfillReactions = [];\n                this._rejectReactions = [];\n                for (var _i = 0, reactions_2 = reactions; _i < reactions_2.length; _i++) {\n                    var reaction = reactions_2[_i];\n                    enqueueRejectedReactionJob(reaction, reason);\n                }\n            };\n            return SimplePromise;\n        }();\n        /**\n         * Set to the global implementation of Promise if the environment has one, else set to {@link ./utility/promise.SimplePromise}\n         *\n         * Can be set to a value using {@link libjass.configure}\n         *\n         * Set it to null to force {@link ./utility/promise.SimplePromise} to be used even if a global Promise is present.\n         *\n         * @type {function(new:Promise)}\n         *\n         * @memberOf libjass\n         */\n        exports.Promise = global.Promise || SimplePromise;\n        /**\n         * Sets the Promise implementation used by libjass to the provided one. If null, {@link ./utility/promise.SimplePromise} is used.\n         *\n         * @param {?function(new:Promise)} value\n         */\n        function setImplementation(value) {\n            if (value !== null) {\n                exports.Promise = value;\n            } else {\n                exports.Promise = SimplePromise;\n            }\n        }\n        exports.setImplementation = setImplementation;\n        /**\n         * A deferred promise.\n         *\n         * @constructor\n         * @memberOf libjass\n         * @template T\n         */\n        var DeferredPromise = function () {\n            function DeferredPromise() {\n                var _this = this;\n                this._promise = new exports.Promise(function (resolve, reject) {\n                    Object.defineProperties(_this, {\n                        resolve: {\n                            value: resolve,\n                            enumerable: true\n                        },\n                        reject: {\n                            value: reject,\n                            enumerable: true\n                        }\n                    });\n                });\n            }\n            Object.defineProperty(DeferredPromise.prototype, \"promise\", {\n                /**\n                 * @type {!Promise.<T>}\n                 */\n                get: function () {\n                    return this._promise;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return DeferredPromise;\n        }();\n        exports.DeferredPromise = DeferredPromise;\n        /**\n         * Returns a promise that resolves to the first (in iteration order) promise that fulfills, and rejects if all the promises reject.\n         *\n         * @param {!Array.<!Promise.<T>>} promises\n         * @return {!Promise.<T>}\n         *\n         * @template T\n         */\n        function first(promises) {\n            return first_rec(promises, []);\n        }\n        exports.first = first;\n        /**\n         * @param {!Array.<!Promise.<T>>} promises\n         * @param {!Array.<*>} previousRejections\n         * @return {!Promise.<T>}\n         *\n         * @template T\n         * @private\n         */\n        function first_rec(promises, previousRejections) {\n            if (promises.length === 0) {\n                return exports.Promise.reject(previousRejections);\n            }\n            var head = promises[0];\n            var tail = promises.slice(1);\n            return head.catch(function (reason) {\n                return first_rec(tail, previousRejections.concat(reason));\n            });\n        }\n        /**\n         * Returns a promise that resolves to the first (in time order) promise that fulfills, and rejects if all the promises reject.\n         *\n         * @param {!Array.<!Promise.<T>>} promises\n         * @return {!Promise.<T>}\n         *\n         * @template T\n         */\n        function any(promises) {\n            return new exports.Promise(function (resolve, reject) {\n                return exports.Promise.all(promises.map(function (promise) {\n                    return promise.then(resolve, function (reason) {\n                        return reason;\n                    });\n                })).then(reject);\n            });\n        }\n        exports.any = any;\n        /**\n         * Returns a promise that runs the given callback when the promise has resolved regardless of whether it fulfilled or rejected.\n         *\n         * @param {!Promise.<T>} promise\n         * @param {function()} body\n         * @return {!Promise.<T>}\n         *\n         * @template T\n         */\n        function lastly(promise, body) {\n            return promise.then(function (value) {\n                body();\n                return value;\n            }, function (reason) {\n                body();\n                throw reason;\n            });\n        }\n        exports.lastly = lastly;\n        /**\n         * @param {!FulfilledPromiseReaction.<T, *>} reaction\n         * @param {T} value\n         *\n         * @template T\n         * @private\n         */\n        function enqueueFulfilledReactionJob(reaction, value) {\n            enqueueJob(function () {\n                var _a = reaction.capabilities;\n                var resolve = _a.resolve;\n                var reject = _a.reject;\n                var handler = reaction.handler;\n                var handlerResult;\n                try {\n                    handlerResult = handler(value);\n                } catch (ex) {\n                    reject(ex);\n                    return;\n                }\n                resolve(handlerResult);\n            });\n        }\n        /**\n         * @param {!RejectedPromiseReaction.<*>} reaction\n         * @param {*} reason\n         *\n         * @private\n         */\n        function enqueueRejectedReactionJob(reaction, reason) {\n            enqueueJob(function () {\n                var _a = reaction.capabilities;\n                var resolve = _a.resolve;\n                var reject = _a.reject;\n                var handler = reaction.handler;\n                var handlerResult;\n                try {\n                    handlerResult = handler(reason);\n                } catch (ex) {\n                    reject(ex);\n                    return;\n                }\n                resolve(handlerResult);\n            });\n        }\n    });\n    def(\"utility/map\", [], function (exports) {\n        /**\n         * Map implementation for browsers that don't support it. Only supports keys which are of Number or String type, or which have a property called \"id\".\n         *\n         * Keys and values are stored as properties of an object, with property names derived from the key type.\n         *\n         * @param {!Array.<!Array.<*>>=} iterable Only an array of elements (where each element is a 2-tuple of key and value) is supported.\n         */\n        var SimpleMap = function () {\n            function SimpleMap(iterable) {\n                this.clear();\n                if (iterable === undefined) {\n                    return;\n                }\n                if (!Array.isArray(iterable)) {\n                    throw new Error(\"Non-array iterables are not supported by the SimpleMap constructor.\");\n                }\n                for (var _i = 0, iterable_2 = iterable; _i < iterable_2.length; _i++) {\n                    var element = iterable_2[_i];\n                    this.set(element[0], element[1]);\n                }\n            }\n            /**\n             * @param {K} key\n             * @return {?V}\n             */\n            SimpleMap.prototype.get = function (key) {\n                var property = keyToProperty(key);\n                if (property === null) {\n                    return undefined;\n                }\n                return this._values[property];\n            };\n            /**\n             * @param {K} key\n             * @return {boolean}\n             */\n            SimpleMap.prototype.has = function (key) {\n                var property = keyToProperty(key);\n                if (property === null) {\n                    return false;\n                }\n                return property in this._keys;\n            };\n            /**\n             * @param {K} key\n             * @param {V} value\n             * @return {libjass.Map.<K, V>} This map\n             */\n            SimpleMap.prototype.set = function (key, value) {\n                var property = keyToProperty(key);\n                if (property === null) {\n                    throw new Error(\"This Map implementation only supports Number and String keys, or keys with an id property.\");\n                }\n                if (!(property in this._keys)) {\n                    this._size++;\n                }\n                this._keys[property] = key;\n                this._values[property] = value;\n                return this;\n            };\n            /**\n             * @param {K} key\n             * @return {boolean} true if the key was present before being deleted, false otherwise\n             */\n            SimpleMap.prototype.delete = function (key) {\n                var property = keyToProperty(key);\n                if (property === null) {\n                    return false;\n                }\n                var result = property in this._keys;\n                if (result) {\n                    delete this._keys[property];\n                    delete this._values[property];\n                    this._size--;\n                }\n                return result;\n            };\n            /**\n             */\n            SimpleMap.prototype.clear = function () {\n                this._keys = Object.create(null);\n                this._values = Object.create(null);\n                this._size = 0;\n            };\n            /**\n             * @param {function(V, K, libjass.Map.<K, V>)} callbackfn A function that is called with each key and value in the map.\n             * @param {*} thisArg\n             */\n            SimpleMap.prototype.forEach = function (callbackfn, thisArg) {\n                for (var _i = 0, _a = Object.keys(this._keys); _i < _a.length; _i++) {\n                    var property = _a[_i];\n                    callbackfn.call(thisArg, this._values[property], this._keys[property], this);\n                }\n            };\n            Object.defineProperty(SimpleMap.prototype, \"size\", {\n                /**\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._size;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return SimpleMap;\n        }();\n        /**\n         * Set to the global implementation of Map if the environment has one, else set to {@link ./utility/map.SimpleMap}\n         *\n         * Can be set to a value using {@link libjass.configure}\n         *\n         * Set it to null to force {@link ./utility/map.SimpleMap} to be used even if a global Map is present.\n         *\n         * @type {function(new:Map, !Array.<!Array.<*>>=)}\n         *\n         * @memberOf libjass\n         */\n        exports.Map = function () {\n            var globalMap = global.Map;\n            if (globalMap === undefined) {\n                return SimpleMap;\n            }\n            if (typeof globalMap.prototype.forEach !== \"function\") {\n                return SimpleMap;\n            }\n            try {\n                if (new globalMap([ [ 1, \"foo\" ], [ 2, \"bar\" ] ]).size !== 2) {\n                    return SimpleMap;\n                }\n            } catch (ex) {\n                return SimpleMap;\n            }\n            return globalMap;\n        }();\n        /**\n         * Sets the Map implementation used by libjass to the provided one. If null, {@link ./utility/map.SimpleMap} is used.\n         *\n         * @param {?function(new:Map, !Array.<!Array.<*>>=)} value\n         */\n        function setImplementation(value) {\n            if (value !== null) {\n                exports.Map = value;\n            } else {\n                exports.Map = SimpleMap;\n            }\n        }\n        exports.setImplementation = setImplementation;\n        /**\n         * Converts the given key into a property name for the internal map.\n         *\n         * @param {*} key\n         * @return {?string}\n         *\n         * @private\n         */\n        function keyToProperty(key) {\n            if (typeof key === \"number\") {\n                return \"#\" + key;\n            }\n            if (typeof key === \"string\") {\n                return \"'\" + key;\n            }\n            if (key.id !== undefined) {\n                return \"!\" + key.id;\n            }\n            return null;\n        }\n    });\n    def(\"utility/set\", [], function (exports) {\n        /**\n         * Set implementation for browsers that don't support it. Only supports Number and String elements.\n         *\n         * Elements are stored as properties of an object, with names derived from their type.\n         *\n         * @param {!Array.<T>=} iterable Only an array of values is supported.\n         */\n        var SimpleSet = function () {\n            function SimpleSet(iterable) {\n                this.clear();\n                if (iterable === undefined) {\n                    return;\n                }\n                if (!Array.isArray(iterable)) {\n                    throw new Error(\"Non-array iterables are not supported by the SimpleSet constructor.\");\n                }\n                for (var _i = 0, iterable_1 = iterable; _i < iterable_1.length; _i++) {\n                    var value = iterable_1[_i];\n                    this.add(value);\n                }\n            }\n            /**\n             * @param {T} value\n             * @return {libjass.Set.<T>} This set\n             */\n            SimpleSet.prototype.add = function (value) {\n                var property = toProperty(value);\n                if (property === null) {\n                    throw new Error(\"This Set implementation only supports Number and String values.\");\n                }\n                if (!(property in this._elements)) {\n                    this._size++;\n                }\n                this._elements[property] = value;\n                return this;\n            };\n            /**\n             */\n            SimpleSet.prototype.clear = function () {\n                this._elements = Object.create(null);\n                this._size = 0;\n            };\n            /**\n             * @param {T} value\n             * @return {boolean}\n             */\n            SimpleSet.prototype.has = function (value) {\n                var property = toProperty(value);\n                if (property === null) {\n                    return false;\n                }\n                return property in this._elements;\n            };\n            /**\n             * @param {function(T, T, libjass.Set.<T>)} callbackfn A function that is called with each value in the set.\n             * @param {*} thisArg\n             */\n            SimpleSet.prototype.forEach = function (callbackfn, thisArg) {\n                for (var _i = 0, _a = Object.keys(this._elements); _i < _a.length; _i++) {\n                    var property = _a[_i];\n                    var element = this._elements[property];\n                    callbackfn.call(thisArg, element, element, this);\n                }\n            };\n            Object.defineProperty(SimpleSet.prototype, \"size\", {\n                /**\n                 * @type {number}\n                 */\n                get: function () {\n                    return this._size;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return SimpleSet;\n        }();\n        /**\n         * Set to the global implementation of Set if the environment has one, else set to {@link ./utility/set.SimpleSet}\n         *\n         * Can be set to a value using {@link libjass.configure}\n         *\n         * Set it to null to force {@link ./utility/set.SimpleSet} to be used even if a global Set is present.\n         *\n         * @type {function(new:Set, !Array.<T>=)}\n         *\n         * @memberOf libjass\n         */\n        exports.Set = function () {\n            var globalSet = global.Set;\n            if (globalSet === undefined) {\n                return SimpleSet;\n            }\n            if (typeof globalSet.prototype.forEach !== \"function\") {\n                return SimpleSet;\n            }\n            try {\n                if (new globalSet([ 1, 2 ]).size !== 2) {\n                    return SimpleSet;\n                }\n            } catch (ex) {\n                return SimpleSet;\n            }\n            return globalSet;\n        }();\n        /**\n         * Sets the Set implementation used by libjass to the provided one. If null, {@link ./utility/set.SimpleSet} is used.\n         *\n         * @param {?function(new:Set, !Array.<T>=)} value\n         */\n        function setImplementation(value) {\n            if (value !== null) {\n                exports.Set = value;\n            } else {\n                exports.Set = SimpleSet;\n            }\n        }\n        exports.setImplementation = setImplementation;\n        /**\n         * Converts the given value into a property name for the internal map.\n         *\n         * @param {*} value\n         * @return {?string}\n         *\n         * @private\n         */\n        function toProperty(value) {\n            if (typeof value === \"number\") {\n                return \"#\" + value;\n            }\n            if (typeof value === \"string\") {\n                return \"'\" + value;\n            }\n            return null;\n        }\n    });\n    def(\"settings\", [], function (exports) {\n        /**\n         * Debug mode. When true, libjass logs some debug messages.\n         *\n         * @type {boolean}\n         */\n        exports.debugMode = false;\n        /**\n         * Verbose debug mode. When true, libjass logs some more debug messages. This setting is independent of {@link libjass.debugMode}\n         *\n         * @type {boolean}\n         *\n         * @memberOf libjass\n         */\n        exports.verboseMode = false;\n        /**\n         * Sets the debug mode.\n         *\n         * @param {boolean} value\n         */\n        function setDebugMode(value) {\n            exports.debugMode = value;\n        }\n        exports.setDebugMode = setDebugMode;\n        /**\n         * Sets the verbose debug mode.\n         *\n         * @param {boolean} value\n         */\n        function setVerboseMode(value) {\n            exports.verboseMode = value;\n        }\n        exports.setVerboseMode = setVerboseMode;\n    });\n    return req(\"index\");\n});\n//# sourceMappingURL=libjass.js.map"],"sourceRoot":""}