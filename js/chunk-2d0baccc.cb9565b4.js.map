{"version":3,"sources":["webpack:///./src/components/PlexRecentlyAdded.vue?0610","webpack:///src/components/PlexRecentlyAdded.vue","webpack:///./src/components/PlexRecentlyAdded.vue?be0c","webpack:///./src/components/PlexRecentlyAdded.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","recentlyAdded","_t","attrs","_v","staticClass","style","on","recentlyAddedDown","recentlyAddedUp","_l","content","key","_e","staticRenderFns","name","components","PlexThumbnail","props","machineIdentifier","type","String","required","data","recentlyAddedOffset","abortController","computed","$vuetify","breakpoint","recentItemsPer","slice","watch","fetchRecentlyAdded","immediate","abortRequests","methods","abort","signal","FETCH_RECENTLY_ADDED_MEDIA","controller","AbortController","fetchRecentlyAddedCriticalSection","aborted","e","component","VBtn","VCol","VIcon","VRow","VSubheader"],"mappings":"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","file":"js/chunk-2d0baccc.cb9565b4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.recentlyAdded.length)?_c('div',[_vm._t(\"preHeader\"),_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',[_c('v-subheader',[_vm._v(\" Recently Added \")])],1),_c('v-col',{staticClass:\"ml-auto\",attrs:{\"cols\":\"auto\"}},[_c('v-btn',{style:(_vm.recentlyAddedDownStyle),attrs:{\"icon\":\"\"},on:{\"click\":_vm.recentlyAddedDown}},[_c('v-icon',[_vm._v(\"navigate_before\")])],1),_c('v-btn',{style:(_vm.recentlyAddedUpStyle),attrs:{\"icon\":\"\"},on:{\"click\":_vm.recentlyAddedUp}},[_c('v-icon',[_vm._v(\"navigate_next\")])],1)],1)],1),_c('v-row',_vm._l((_vm.subsetRecentlyAdded),function(content){return _c('v-col',{key:content.key,attrs:{\"cols\":\"4\",\"sm\":\"3\",\"md\":\"2\",\"xl\":\"1\"}},[_c('PlexThumbnail',{attrs:{\"content\":content,\"full-title\":\"\",\"type\":\"thumb\",\"cols\":\"4\",\"sm\":\"3\",\"md\":\"2\",\"xl\":\"1\"}})],1)}),1)],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"recentlyAdded.length\">\n    <slot name=\"preHeader\" />\n\n    <v-row\n      no-gutters\n    >\n      <v-col>\n        <v-subheader>\n          Recently Added\n        </v-subheader>\n      </v-col>\n\n      <v-col\n        cols=\"auto\"\n        class=\"ml-auto\"\n      >\n        <v-btn\n          icon\n          :style=\"recentlyAddedDownStyle\"\n          @click=\"recentlyAddedDown\"\n        >\n          <v-icon>navigate_before</v-icon>\n        </v-btn>\n\n        <v-btn\n          icon\n          :style=\"recentlyAddedUpStyle\"\n          @click=\"recentlyAddedUp\"\n        >\n          <v-icon>navigate_next</v-icon>\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <v-row>\n      <v-col\n        v-for=\"content in subsetRecentlyAdded\"\n        :key=\"content.key\"\n        cols=\"4\"\n        sm=\"3\"\n        md=\"2\"\n        xl=\"1\"\n      >\n        <PlexThumbnail\n          :content=\"content\"\n          full-title\n          type=\"thumb\"\n          cols=\"4\"\n          sm=\"3\"\n          md=\"2\"\n          xl=\"1\"\n        />\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\n\nexport default {\n  name: 'PlexOnDeck',\n\n  components: {\n    PlexThumbnail: () => import('@/components/PlexThumbnail.vue'),\n  },\n\n  props: {\n    machineIdentifier: {\n      type: String,\n      required: true,\n    },\n  },\n\n  data: () => ({\n    recentlyAdded: [],\n    recentlyAddedOffset: 0,\n    abortController: null,\n  }),\n\n  computed: {\n    recentItemsPer() {\n      switch (this.$vuetify.breakpoint.name) {\n        case 'xs': return 3;\n        case 'sm': return 4;\n        case 'md':\n        case 'lg': return 6;\n        default: return 12;\n      }\n    },\n\n    recentlyAddedDownStyle() {\n      return this.recentlyAddedOffset === 0\n        ? {\n          opacity: 0.5,\n        }\n        : {};\n    },\n\n    recentlyAddedUpStyle() {\n      return this.recentlyAddedOffset + this.recentItemsPer\n        >= this.recentlyAdded.length\n        ? {\n          opacity: 0.5,\n        }\n        : {};\n    },\n\n    subsetRecentlyAdded() {\n      return this.recentlyAdded.slice(this.recentlyAddedOffset,\n        this.recentlyAddedOffset + this.recentItemsPer);\n    },\n  },\n\n  watch: {\n    machineIdentifier: {\n      handler() {\n        this.recentlyAdded = [];\n        this.recentlyAddedOffset = 0;\n        return this.fetchRecentlyAdded();\n      },\n      immediate: true,\n    },\n  },\n\n  beforeDestroy() {\n    this.abortRequests();\n  },\n\n  methods: {\n    ...mapActions('plexservers', [\n      'FETCH_RECENTLY_ADDED_MEDIA',\n    ]),\n\n    abortRequests() {\n      if (this.abortController) {\n        // Cancel outstanding request\n        this.abortController.abort();\n        this.abortController = null;\n      }\n    },\n\n    recentlyAddedUp() {\n      if (this.recentlyAddedOffset + this.recentItemsPer\n        >= this.recentlyAdded.length) {\n        // This would overflow!\n      } else {\n        this.recentlyAddedOffset += this.recentItemsPer;\n      }\n    },\n\n    recentlyAddedDown() {\n      if (this.recentlyAddedOffset - this.recentItemsPer < 0) {\n        this.recentlyAddedOffset = 0;\n      } else {\n        this.recentlyAddedOffset -= this.recentItemsPer;\n      }\n    },\n\n    async fetchRecentlyAddedCriticalSection(signal) {\n      this.recentlyAdded = await this.FETCH_RECENTLY_ADDED_MEDIA({\n        machineIdentifier: this.machineIdentifier,\n        signal,\n      });\n    },\n\n    async fetchRecentlyAdded() {\n      this.abortRequests();\n\n      const controller = new AbortController();\n      this.abortController = controller;\n\n      try {\n        await this.fetchRecentlyAddedCriticalSection(controller.signal);\n      } catch (e) {\n        if (!controller.signal.aborted) {\n          throw e;\n        }\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlexRecentlyAdded.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlexRecentlyAdded.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlexRecentlyAdded.vue?vue&type=template&id=4b981e6f&\"\nimport script from \"./PlexRecentlyAdded.vue?vue&type=script&lang=js&\"\nexport * from \"./PlexRecentlyAdded.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\ninstallComponents(component, {VBtn,VCol,VIcon,VRow,VSubheader})\n"],"sourceRoot":""}